function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t={exports:{}},n={},r={exports:{}},i={},s=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}function x(){}function k(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=w.prototype;var S=k.prototype=new x;S.constructor=k,v(S,w.prototype),S.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,T={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&!I.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:s,type:e,key:o,ref:a,props:i,_owner:T.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var N=/\/+/g;function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function D(e,t,n,r,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case s:case o:l=!0}}if(l)return i=i(l=e),e=""===r?"."+R(l,0):r,_(i)?(n="",null!=e&&(n=e.replace(N,"$&/")+"/"),D(i,t,n,"",function(e){return e})):null!=i&&(A(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(N,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=""===r?".":r+":",_(e))for(var c=0;c<e.length;c++){var u=r+R(a=e[c],c);l+=D(a,t,n,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=g&&e[g]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=D(a=a.value,t,n,u=r+R(a,c++),i);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",function(e){return t.call(n,e,i++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},L={transition:null},M={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:L,ReactCurrentOwner:T};function z(){throw Error("act(...) is not supported in production builds of React.")}i.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},i.Component=w,i.Fragment=a,i.Profiler=c,i.PureComponent=k,i.StrictMode=l,i.Suspense=f,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,i.act=z,i.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=v({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=T.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!I.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:s,type:e.type,key:i,ref:o,props:r,_owner:a}},i.createContext=function(e){return(e={$$typeof:d,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},i.createElement=C,i.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},i.createRef=function(){return{current:null}},i.forwardRef=function(e){return{$$typeof:h,render:e}},i.isValidElement=A,i.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:j}},i.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},i.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},i.unstable_act=z,i.useCallback=function(e,t){return O.current.useCallback(e,t)},i.useContext=function(e){return O.current.useContext(e)},i.useDebugValue=function(){},i.useDeferredValue=function(e){return O.current.useDeferredValue(e)},i.useEffect=function(e,t){return O.current.useEffect(e,t)},i.useId=function(){return O.current.useId()},i.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},i.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},i.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},i.useMemo=function(e,t){return O.current.useMemo(e,t)},i.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},i.useRef=function(e){return O.current.useRef(e)},i.useState=function(e){return O.current.useState(e)},i.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},i.useTransition=function(){return O.current.useTransition()},i.version="18.3.1",r.exports=i;var F=r.exports;const U=e(F);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B=F,V=Symbol.for("react.element"),$=Symbol.for("react.fragment"),q=Object.prototype.hasOwnProperty,H=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K={key:!0,ref:!0,__self:!0,__source:!0};function W(e,t,n){var r,i={},s=null,o=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(o=t.ref),t)q.call(t,r)&&!K.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:V,type:e,key:s,ref:o,props:i,_owner:H.current}}n.Fragment=$,n.jsx=W,n.jsxs=W,t.exports=n;var G=t.exports,Q={},Y={exports:{}},X={},J={exports:{}},Z={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function w(e){if(m=!1,b(e),!p)if(null!==n(l))p=!0,D(x);else{var t=n(c);null!==t&&P(w,t.startTime-e)}}function x(t,i){p=!1,m&&(m=!1,y(E),E=-1),f=!0;var s=h;try{for(b(i),d=n(l);null!==d&&(!(d.expirationTime>i)||t&&!C());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var a=o(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?d.callback=a:d===n(l)&&r(l),b(i)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&P(w,g.startTime-i),u=!1}return u}finally{d=null,h=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,_=null,E=-1,T=5,I=-1;function C(){return!(e.unstable_now()-I<T)}function A(){if(null!==_){var t=e.unstable_now();I=t;var n=!0;try{n=_(!0,t)}finally{n?k():(S=!1,_=null)}}else S=!1}if("function"==typeof v)k=function(){v(A)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=A,k=function(){R.postMessage(null)}}else k=function(){g(A,0)};function D(e){_=e,S||(S=!0,k())}function P(t,n){E=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,D(x))},e.unstable_forceFrameRate=function(e){0>e||125<e||(T=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,s){var o=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?o+s:o:s=o,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(m?(y(E),E=-1):m=!0,P(w,s-o))):(r.sortIndex=a,t(l,r),p||f||(p=!0,D(x))),r},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(Z),J.exports=Z;var ee=J.exports,te=F,ne=ee;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ie=new Set,se={};function oe(e,t){ae(e,t),ae(e+"Capture",t)}function ae(e,t){for(se[e]=t,e=0;e<t.length;e++)ie.add(t[e])}var le=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ce=Object.prototype.hasOwnProperty,ue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,de={},he={};function fe(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pe[e]=new fe(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pe[t]=new fe(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){pe[e]=new fe(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pe[e]=new fe(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pe[e]=new fe(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){pe[e]=new fe(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){pe[e]=new fe(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){pe[e]=new fe(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){pe[e]=new fe(e,5,!1,e.toLowerCase(),null,!1,!1)});var me=/[\-:]([a-z])/g;function ge(e){return e[1].toUpperCase()}function ye(e,t,n,r){var i=pe.hasOwnProperty(t)?pe[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ce.call(he,e)||!ce.call(de,e)&&(ue.test(e)?he[e]=!0:(de[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(me,ge);pe[t]=new fe(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(me,ge);pe[t]=new fe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(me,ge);pe[t]=new fe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){pe[e]=new fe(e,1,!1,e.toLowerCase(),null,!1,!1)}),pe.xlinkHref=new fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){pe[e]=new fe(e,1,!1,e.toLowerCase(),null,!0,!0)});var ve=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,be=Symbol.for("react.element"),we=Symbol.for("react.portal"),xe=Symbol.for("react.fragment"),ke=Symbol.for("react.strict_mode"),Se=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),De=Symbol.iterator;function Pe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=De&&e[De]||e["@@iterator"])?e:null}var je,Oe=Object.assign;function Le(e){if(void 0===je)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);je=t&&t[1]||""}return"\n"+je+e}var Me=!1;function ze(e,t){if(!e||Me)return"";Me=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{Me=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Le(e):""}function Fe(e){switch(e.tag){case 5:return Le(e.type);case 16:return Le("Lazy");case 13:return Le("Suspense");case 19:return Le("SuspenseList");case 0:case 2:case 15:return e=ze(e.type,!1);case 11:return e=ze(e.type.render,!1);case 1:return e=ze(e.type,!0);default:return""}}function Ue(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case xe:return"Fragment";case we:return"Portal";case Se:return"Profiler";case ke:return"StrictMode";case Ie:return"Suspense";case Ce:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ee:return(e.displayName||"Context")+".Consumer";case _e:return(e._context.displayName||"Context")+".Provider";case Te:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Ae:return null!==(t=e.displayName||null)?t:Ue(e.type)||"Memo";case Ne:t=e._payload,e=e._init;try{return Ue(e(t))}catch(n){}}return null}function Be(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(t);case 8:return t===ke?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Ve(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $e(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function qe(e){e._valueTracker||(e._valueTracker=function(e){var t=$e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function He(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$e(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ke(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function We(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ge(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Qe(e,t){null!=(t=t.checked)&&ye(e,"checked",t,!1)}function Ye(e,t){Qe(e,t);var n=Ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Je(e,t.type,n):t.hasOwnProperty("defaultValue")&&Je(e,t.type,Ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Xe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Je(e,t,n){"number"===t&&Ke(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ze=Array.isArray;function et(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function tt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(re(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nt(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(re(92));if(Ze(n)){if(1<n.length)throw Error(re(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ve(n)}}function rt(e,t){var n=Ve(t.value),r=Ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function it(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function st(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ot(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?st(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var at,lt,ct=(lt=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((at=at||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=at.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return lt(e,t)})}:lt);function ut(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ht=["Webkit","ms","Moz","O"];function ft(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||dt.hasOwnProperty(e)&&dt[e]?(""+t).trim():t+"px"}function pt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ft(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(dt).forEach(function(e){ht.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dt[t]=dt[e]})});var mt=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(e,t){if(t){if(mt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(re(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(re(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(re(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(re(62))}}function yt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vt=null;function bt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var wt=null,xt=null,kt=null;function St(e){if(e=ys(e)){if("function"!=typeof wt)throw Error(re(280));var t=e.stateNode;t&&(t=bs(t),wt(e.stateNode,e.type,t))}}function _t(e){xt?kt?kt.push(e):kt=[e]:xt=e}function Et(){if(xt){var e=xt,t=kt;if(kt=xt=null,St(e),t)for(e=0;e<t.length;e++)St(t[e])}}function Tt(e,t){return e(t)}function It(){}var Ct=!1;function At(e,t,n){if(Ct)return e(t,n);Ct=!0;try{return Tt(e,t,n)}finally{Ct=!1,(null!==xt||null!==kt)&&(It(),Et())}}function Nt(e,t){var n=e.stateNode;if(null===n)return null;var r=bs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(re(231,t,typeof n));return n}var Rt=!1;if(le)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch(lt){Rt=!1}function Pt(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var jt=!1,Ot=null,Lt=!1,Mt=null,zt={onError:function(e){jt=!0,Ot=e}};function Ft(e,t,n,r,i,s,o,a,l){jt=!1,Ot=null,Pt.apply(zt,arguments)}function Ut(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Bt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Vt(e){if(Ut(e)!==e)throw Error(re(188))}function $t(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ut(e)))throw Error(re(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Vt(i),e;if(s===r)return Vt(i),t;s=s.sibling}throw Error(re(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(3!==n.tag)throw Error(re(188));return n.stateNode.current===n?e:t}(e))?qt(e):null}function qt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qt(e);if(null!==t)return t;e=e.sibling}return null}var Ht=ne.unstable_scheduleCallback,Kt=ne.unstable_cancelCallback,Wt=ne.unstable_shouldYield,Gt=ne.unstable_requestPaint,Qt=ne.unstable_now,Yt=ne.unstable_getCurrentPriorityLevel,Xt=ne.unstable_ImmediatePriority,Jt=ne.unstable_UserBlockingPriority,Zt=ne.unstable_NormalPriority,en=ne.unstable_LowPriority,tn=ne.unstable_IdlePriority,nn=null,rn=null;var sn=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(on(e)/an|0)|0},on=Math.log,an=Math.LN2;var ln=64,cn=4194304;function un(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=un(a):0!==(s&=o)&&(r=un(s))}else 0!==(o=n&~i)?r=un(o):0!==s&&(r=un(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-sn(t)),r|=e[n],t&=~i;return r}function hn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function fn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pn(){var e=ln;return!(4194240&(ln<<=1))&&(ln=64),e}function mn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-sn(t)]=n}function yn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-sn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vn=0;function bn(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wn,xn,kn,Sn,_n,En=!1,Tn=[],In=null,Cn=null,An=null,Nn=new Map,Rn=new Map,Dn=[],Pn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jn(e,t){switch(e){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Nn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(t.pointerId)}}function On(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=ys(t))&&xn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ln(e){var t=gs(e.target);if(null!==t){var n=Ut(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Bt(n)))return e.blockedOn=t,void _n(e.priority,function(){kn(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ys(n))&&xn(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);vt=r,n.target.dispatchEvent(r),vt=null,t.shift()}return!0}function zn(e,t,n){Mn(e)&&n.delete(t)}function Fn(){En=!1,null!==In&&Mn(In)&&(In=null),null!==Cn&&Mn(Cn)&&(Cn=null),null!==An&&Mn(An)&&(An=null),Nn.forEach(zn),Rn.forEach(zn)}function Un(e,t){e.blockedOn===t&&(e.blockedOn=null,En||(En=!0,ne.unstable_scheduleCallback(ne.unstable_NormalPriority,Fn)))}function Bn(e){function t(t){return Un(t,e)}if(0<Tn.length){Un(Tn[0],e);for(var n=1;n<Tn.length;n++){var r=Tn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==In&&Un(In,e),null!==Cn&&Un(Cn,e),null!==An&&Un(An,e),Nn.forEach(t),Rn.forEach(t),n=0;n<Dn.length;n++)(r=Dn[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dn.length&&null===(n=Dn[0]).blockedOn;)Ln(n),null===n.blockedOn&&Dn.shift()}var Vn=ve.ReactCurrentBatchConfig,$n=!0;function qn(e,t,n,r){var i=vn,s=Vn.transition;Vn.transition=null;try{vn=1,Kn(e,t,n,r)}finally{vn=i,Vn.transition=s}}function Hn(e,t,n,r){var i=vn,s=Vn.transition;Vn.transition=null;try{vn=4,Kn(e,t,n,r)}finally{vn=i,Vn.transition=s}}function Kn(e,t,n,r){if($n){var i=Gn(e,t,n,r);if(null===i)Vi(e,t,r,Wn,n),jn(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return In=On(In,e,t,n,r,i),!0;case"dragenter":return Cn=On(Cn,e,t,n,r,i),!0;case"mouseover":return An=On(An,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nn.set(s,On(Nn.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rn.set(s,On(Rn.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jn(e,r),4&t&&-1<Pn.indexOf(e)){for(;null!==i;){var s=ys(i);if(null!==s&&wn(s),null===(s=Gn(e,t,n,r))&&Vi(e,t,r,Wn,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Vi(e,t,r,null,n)}}var Wn=null;function Gn(e,t,n,r){if(Wn=null,null!==(e=gs(e=bt(r))))if(null===(t=Ut(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Bt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wn=e,null}function Qn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yt()){case Xt:return 1;case Jt:return 4;case Zt:case en:return 16;case tn:return 536870912;default:return 16}default:return 16}}var Yn=null,Xn=null,Jn=null;function Zn(){if(Jn)return Jn;var e,t,n=Xn,r=n.length,i="value"in Yn?Yn.value:Yn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Jn=i.slice(e,1<t?1-t:void 0)}function er(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tr(){return!0}function nr(){return!1}function rr(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tr:nr,this.isPropagationStopped=nr,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),t}var ir,sr,or,ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=rr(ar),cr=Oe({},ar,{view:0,detail:0}),ur=rr(cr),dr=Oe({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(ir=e.screenX-or.screenX,sr=e.screenY-or.screenY):sr=ir=0,or=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),hr=rr(dr),fr=rr(Oe({},dr,{dataTransfer:0})),pr=rr(Oe({},cr,{relatedTarget:0})),mr=rr(Oe({},ar,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=Oe({},ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=rr(gr),vr=rr(Oe({},ar,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xr[e])&&!!t[e]}function Sr(){return kr}var _r=Oe({},cr,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=er(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?er(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?er(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Er=rr(_r),Tr=rr(Oe({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ir=rr(Oe({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Cr=rr(Oe({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ar=Oe({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nr=rr(Ar),Rr=[9,13,27,32],Dr=le&&"CompositionEvent"in window,Pr=null;le&&"documentMode"in document&&(Pr=document.documentMode);var jr=le&&"TextEvent"in window&&!Pr,Or=le&&(!Dr||Pr&&8<Pr&&11>=Pr),Lr=String.fromCharCode(32),Mr=!1;function zr(e,t){switch(e){case"keyup":return-1!==Rr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var Br={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Br[e.type]:"textarea"===t}function $r(e,t,n,r){_t(r),0<(t=qi(t,"onChange")).length&&(n=new lr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qr=null,Hr=null;function Kr(e){Li(e,0)}function Wr(e){if(He(vs(e)))return e}function Gr(e,t){if("change"===e)return t}var Qr=!1;if(le){var Yr;if(le){var Xr="oninput"in document;if(!Xr){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),Xr="function"==typeof Jr.oninput}Yr=Xr}else Yr=!1;Qr=Yr&&(!document.documentMode||9<document.documentMode)}function Zr(){qr&&(qr.detachEvent("onpropertychange",ei),Hr=qr=null)}function ei(e){if("value"===e.propertyName&&Wr(Hr)){var t=[];$r(t,Hr,e,bt(e)),At(Kr,t)}}function ti(e,t,n){"focusin"===e?(Zr(),Hr=n,(qr=t).attachEvent("onpropertychange",ei)):"focusout"===e&&Zr()}function ni(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Wr(Hr)}function ri(e,t){if("click"===e)return Wr(t)}function ii(e,t){if("input"===e||"change"===e)return Wr(t)}var si="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function oi(e,t){if(si(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ce.call(t,i)||!si(e[i],t[i]))return!1}return!0}function ai(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function li(e,t){var n,r=ai(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ai(r)}}function ci(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ci(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ui(){for(var e=window,t=Ke();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Ke((e=t.contentWindow).document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hi(e){var t=ui(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ci(n.ownerDocument.documentElement,n)){if(null!==r&&di(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=li(n,s);var o=li(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fi=le&&"documentMode"in document&&11>=document.documentMode,pi=null,mi=null,gi=null,yi=!1;function vi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==pi||pi!==Ke(r)||("selectionStart"in(r=pi)&&di(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gi&&oi(gi,r)||(gi=r,0<(r=qi(mi,"onSelect")).length&&(t=new lr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pi)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},xi={},ki={};function Si(e){if(xi[e])return xi[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in ki)return xi[e]=n[t];return e}le&&(ki=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var _i=Si("animationend"),Ei=Si("animationiteration"),Ti=Si("animationstart"),Ii=Si("transitionend"),Ci=new Map,Ai="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(e,t){Ci.set(e,t),oe(t,[e])}for(var Ri=0;Ri<Ai.length;Ri++){var Di=Ai[Ri];Ni(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}Ni(_i,"onAnimationEnd"),Ni(Ei,"onAnimationIteration"),Ni(Ti,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(Ii,"onTransitionEnd"),ae("onMouseEnter",["mouseout","mouseover"]),ae("onMouseLeave",["mouseout","mouseover"]),ae("onPointerEnter",["pointerout","pointerover"]),ae("onPointerLeave",["pointerout","pointerover"]),oe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oe("onBeforeInput",["compositionend","keypress","textInput","paste"]),oe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ji=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function Oi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,a,l){if(Ft.apply(this,arguments),jt){if(!jt)throw Error(re(198));var c=Ot;jt=!1,Ot=null,Lt||(Lt=!0,Mt=c)}}(r,t,void 0,e),e.currentTarget=null}function Li(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Oi(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Oi(i,a,c),s=l}}}if(Lt)throw e=Mt,Lt=!1,Mt=null,e}function Mi(e,t){var n=t[fs];void 0===n&&(n=t[fs]=new Set);var r=e+"__bubble";n.has(r)||(Bi(t,e,2,!1),n.add(r))}function zi(e,t,n){var r=0;t&&(r|=4),Bi(n,e,r,t)}var Fi="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[Fi]){e[Fi]=!0,ie.forEach(function(t){"selectionchange"!==t&&(ji.has(t)||zi(t,!1,e),zi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fi]||(t[Fi]=!0,zi("selectionchange",!1,t))}}function Bi(e,t,n,r){switch(Qn(t)){case 1:var i=qn;break;case 4:i=Hn;break;default:i=Kn}n=i.bind(null,t,n,e),i=void 0,!Rt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vi(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=gs(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}At(function(){var r=s,i=bt(n),o=[];e:{var a=Ci.get(e);if(void 0!==a){var l=lr,c=e;switch(e){case"keypress":if(0===er(n))break e;case"keydown":case"keyup":l=Er;break;case"focusin":c="focus",l=pr;break;case"focusout":c="blur",l=pr;break;case"beforeblur":case"afterblur":l=pr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ir;break;case _i:case Ei:case Ti:l=mr;break;case Ii:l=Cr;break;case"scroll":l=ur;break;case"wheel":l=Nr;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tr}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Nt(p,h))&&u.push($i(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===vt||!(c=n.relatedTarget||n.fromElement)||!gs(c)&&!c[hs])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?gs(c):null)&&(c!==(d=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=hr,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tr,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:vs(l),f=null==c?a:vs(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,gs(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Hi(f))p++;for(f=0,m=h;m;m=Hi(m))f++;for(;0<p-f;)u=Hi(u),p--;for(;0<f-p;)h=Hi(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Hi(u),h=Hi(h)}u=null}else u=null;null!==l&&Ki(o,a,l,u,!1),null!==c&&null!==d&&Ki(o,d,c,u,!0)}if("select"===(l=(a=r?vs(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Gr;else if(Vr(a))if(Qr)g=ii;else{g=ni;var y=ti}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ri);switch(g&&(g=g(e,r))?$r(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&Je(a,"number",a.value)),y=r?vs(r):window,e){case"focusin":(Vr(y)||"true"===y.contentEditable)&&(pi=y,mi=r,gi=null);break;case"focusout":gi=mi=pi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,vi(o,n,i);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":vi(o,n,i)}var v;if(Dr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ur?zr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Or&&"ko"!==n.locale&&(Ur||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ur&&(v=Zn()):(Xn="value"in(Yn=i)?Yn.value:Yn.textContent,Ur=!0)),0<(y=qi(r,b)).length&&(b=new vr(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Fr(n))&&(b.data=v))),(v=jr?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Mr=!0,Lr);case"textInput":return(e=t.data)===Lr&&Mr?null:e;default:return null}}(e,n):function(e,t){if(Ur)return"compositionend"===e||!Dr&&zr(e,t)?(e=Zn(),Jn=Xn=Yn=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Or&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qi(r,"onBeforeInput")).length&&(i=new vr("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Li(o,t)})}function $i(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Nt(e,n))&&r.unshift($i(e,s,i)),null!=(s=Nt(e,t))&&r.push($i(e,s,i))),e=e.return}return r}function Hi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ki(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Nt(n,s))&&o.unshift($i(n,l,a)):i||null!=(l=Nt(n,s))&&o.push($i(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Wi=/\r\n?/g,Gi=/\u0000|\uFFFD/g;function Qi(e){return("string"==typeof e?e:""+e).replace(Wi,"\n").replace(Gi,"")}function Yi(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(re(425))}function Xi(){}var Ji=null,Zi=null;function es(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ts="function"==typeof setTimeout?setTimeout:void 0,ns="function"==typeof clearTimeout?clearTimeout:void 0,rs="function"==typeof Promise?Promise:void 0,is="function"==typeof queueMicrotask?queueMicrotask:void 0!==rs?function(e){return rs.resolve(null).then(e).catch(ss)}:ts;function ss(e){setTimeout(function(){throw e})}function os(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bn(t)}function as(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ls(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),us="__reactFiber$"+cs,ds="__reactProps$"+cs,hs="__reactContainer$"+cs,fs="__reactEvents$"+cs,ps="__reactListeners$"+cs,ms="__reactHandles$"+cs;function gs(e){var t=e[us];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hs]||n[us]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ls(e);null!==e;){if(n=e[us])return n;e=ls(e)}return t}n=(e=n).parentNode}return null}function ys(e){return!(e=e[us]||e[hs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(re(33))}function bs(e){return e[ds]||null}var ws=[],xs=-1;function ks(e){return{current:e}}function Ss(e){0>xs||(e.current=ws[xs],ws[xs]=null,xs--)}function _s(e,t){xs++,ws[xs]=e.current,e.current=t}var Es={},Ts=ks(Es),Is=ks(!1),Cs=Es;function As(e,t){var n=e.type.contextTypes;if(!n)return Es;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ns(e){return null!=(e=e.childContextTypes)}function Rs(){Ss(Is),Ss(Ts)}function Ds(e,t,n){if(Ts.current!==Es)throw Error(re(168));_s(Ts,t),_s(Is,n)}function Ps(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(re(108,Be(e)||"Unknown",i));return Oe({},n,r)}function js(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,Cs=Ts.current,_s(Ts,e),_s(Is,Is.current),!0}function Os(e,t,n){var r=e.stateNode;if(!r)throw Error(re(169));n?(e=Ps(e,t,Cs),r.__reactInternalMemoizedMergedChildContext=e,Ss(Is),Ss(Ts),_s(Ts,e)):Ss(Is),_s(Is,n)}var Ls=null,Ms=!1,zs=!1;function Fs(e){null===Ls?Ls=[e]:Ls.push(e)}function Us(){if(!zs&&null!==Ls){zs=!0;var e=0,t=vn;try{var n=Ls;for(vn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ls=null,Ms=!1}catch(i){throw null!==Ls&&(Ls=Ls.slice(e+1)),Ht(Xt,Us),i}finally{vn=t,zs=!1}}return null}var Bs=[],Vs=0,$s=null,qs=0,Hs=[],Ks=0,Ws=null,Gs=1,Qs="";function Ys(e,t){Bs[Vs++]=qs,Bs[Vs++]=$s,$s=e,qs=t}function Xs(e,t,n){Hs[Ks++]=Gs,Hs[Ks++]=Qs,Hs[Ks++]=Ws,Ws=e;var r=Gs;e=Qs;var i=32-sn(r)-1;r&=~(1<<i),n+=1;var s=32-sn(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gs=1<<32-sn(t)+i|n<<i|r,Qs=s+e}else Gs=1<<s|n<<i|r,Qs=e}function Js(e){null!==e.return&&(Ys(e,1),Xs(e,1,0))}function Zs(e){for(;e===$s;)$s=Bs[--Vs],Bs[Vs]=null,qs=Bs[--Vs],Bs[Vs]=null;for(;e===Ws;)Ws=Hs[--Ks],Hs[Ks]=null,Qs=Hs[--Ks],Hs[Ks]=null,Gs=Hs[--Ks],Hs[Ks]=null}var eo=null,to=null,no=!1,ro=null;function io(e,t){var n=Cu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,eo=e,to=as(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,eo=e,to=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ws?{id:Gs,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Cu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,eo=e,to=null,!0);default:return!1}}function oo(e){return!(!(1&e.mode)||128&e.flags)}function ao(e){if(no){var t=to;if(t){var n=t;if(!so(e,t)){if(oo(e))throw Error(re(418));t=as(n.nextSibling);var r=eo;t&&so(e,t)?io(r,n):(e.flags=-4097&e.flags|2,no=!1,eo=e)}}else{if(oo(e))throw Error(re(418));e.flags=-4097&e.flags|2,no=!1,eo=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;eo=e}function co(e){if(e!==eo)return!1;if(!no)return lo(e),no=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!es(e.type,e.memoizedProps)),t&&(t=to)){if(oo(e))throw uo(),Error(re(418));for(;t;)io(e,t),t=as(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){to=as(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}to=null}}else to=eo?as(e.stateNode.nextSibling):null;return!0}function uo(){for(var e=to;e;)e=as(e.nextSibling)}function ho(){to=eo=null,no=!1}function fo(e){null===ro?ro=[e]:ro.push(e)}var po=ve.ReactCurrentBatchConfig;function mo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(re(284));if(!n._owner)throw Error(re(290,e))}return e}function go(e,t){throw e=Object.prototype.toString.call(t),Error(re(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){return(0,e._init)(e._payload)}function vo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function a(e,t,n,r){return null===t||6!==t.tag?((t=ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===xe?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===Ne&&yo(s)===t.type)?((r=i(t,n.props)).ref=mo(e,t,n),r.return=e,r):((r=Ru(n.type,n.key,n.props,null,e.mode,r)).ref=mo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ou(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Du(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=ju(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case be:return(n=Ru(t.type,t.key,t.props,null,e.mode,n)).ref=mo(e,null,t),n.return=e,n;case we:return(t=Ou(t,e.mode,n)).return=e,t;case Ne:return d(e,(0,t._init)(t._payload),n)}if(Ze(t)||Pe(t))return(t=Du(t,e.mode,n,null)).return=e,t;go(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case be:return n.key===i?l(e,t,n,r):null;case we:return n.key===i?c(e,t,n,r):null;case Ne:return h(e,t,(i=n._init)(n._payload),r)}if(Ze(n)||Pe(n))return null!==i?null:u(e,t,n,r,null);go(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return a(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case be:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case we:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Ne:return f(e,t,n,(0,r._init)(r._payload),i)}if(Ze(r)||Pe(r))return u(t,e=e.get(n)||null,r,i,null);go(t,r)}return null}return function a(l,c,u,p){if("object"==typeof u&&null!==u&&u.type===xe&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case be:e:{for(var m=u.key,g=c;null!==g;){if(g.key===m){if((m=u.type)===xe){if(7===g.tag){n(l,g.sibling),(c=i(g,u.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Ne&&yo(m)===g.type){n(l,g.sibling),(c=i(g,u.props)).ref=mo(l,g,u),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}u.type===xe?((c=Du(u.props.children,l.mode,p,u.key)).return=l,l=c):((p=Ru(u.type,u.key,u.props,null,l.mode,p)).ref=mo(l,c,u),p.return=l,l=p)}return o(l);case we:e:{for(g=u.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=i(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=Ou(u,l.mode,p)).return=l,l=c}return o(l);case Ne:return a(l,c,(g=u._init)(u._payload),p)}if(Ze(u))return function(i,o,a,l){for(var c=null,u=null,p=o,m=o=0,g=null;null!==p&&m<a.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=h(i,p,a[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,p=g}if(m===a.length)return n(i,p),no&&Ys(i,m),c;if(null===p){for(;m<a.length;m++)null!==(p=d(i,a[m],l))&&(o=s(p,o,m),null===u?c=p:u.sibling=p,u=p);return no&&Ys(i,m),c}for(p=r(i,p);m<a.length;m++)null!==(g=f(p,i,m,a[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&p.forEach(function(e){return t(i,e)}),no&&Ys(i,m),c}(l,c,u,p);if(Pe(u))return function(i,o,a,l){var c=Pe(a);if("function"!=typeof c)throw Error(re(150));if(null==(a=c.call(a)))throw Error(re(151));for(var u=c=null,p=o,m=o=0,g=null,y=a.next();null!==p&&!y.done;m++,y=a.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=h(i,p,y.value,l);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,p=g}if(y.done)return n(i,p),no&&Ys(i,m),c;if(null===p){for(;!y.done;m++,y=a.next())null!==(y=d(i,y.value,l))&&(o=s(y,o,m),null===u?c=y:u.sibling=y,u=y);return no&&Ys(i,m),c}for(p=r(i,p);!y.done;m++,y=a.next())null!==(y=f(p,i,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y);return e&&p.forEach(function(e){return t(i,e)}),no&&Ys(i,m),c}(l,c,u,p);go(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=i(c,u)).return=l,l=c):(n(l,c),(c=ju(u,l.mode,p)).return=l,l=c),o(l)):n(l,c)}}var bo=vo(!0),wo=vo(!1),xo=ks(null),ko=null,So=null,_o=null;function Eo(){_o=So=ko=null}function To(e){var t=xo.current;Ss(xo),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Co(e,t){ko=e,_o=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(gl=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===So){if(null===ko)throw Error(re(308));So=e,ko.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var No=null;function Ro(e){null===No?No=[e]:No.push(e)}function Do(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ro(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var jo=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Ec){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,Ro(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Fo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yn(e,n)}}function Uo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bo(e,t,n,r){var i=e.updateQueue;jo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=Oe({},d,h);break e;case 2:jo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Pc|=o,e.lanes=o,e.memoizedState=d}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(re(191,i));i.call(r)}}}var $o={},qo=ks($o),Ho=ks($o),Ko=ks($o);function Wo(e){if(e===$o)throw Error(re(174));return e}function Go(e,t){switch(_s(Ko,t),_s(Ho,e),_s(qo,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ot(null,"");break;default:t=ot(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(qo),_s(qo,t)}function Qo(){Ss(qo),Ss(Ho),Ss(Ko)}function Yo(e){Wo(Ko.current);var t=Wo(qo.current),n=ot(t,e.type);t!==n&&(_s(Ho,e),_s(qo,n))}function Xo(e){Ho.current===e&&(Ss(qo),Ss(Ho))}var Jo=ks(0);function Zo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=[];function ta(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var na=ve.ReactCurrentDispatcher,ra=ve.ReactCurrentBatchConfig,ia=0,sa=null,oa=null,aa=null,la=!1,ca=!1,ua=0,da=0;function ha(){throw Error(re(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,i,s){if(ia=s,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=null===e||null===e.memoizedState?Xa:Ja,e=n(r,i),ca){s=0;do{if(ca=!1,ua=0,25<=s)throw Error(re(301));s+=1,aa=oa=null,t.updateQueue=null,na.current=Za,e=n(r,i)}while(ca)}if(na.current=Ya,t=null!==oa&&null!==oa.next,ia=0,aa=oa=sa=null,la=!1,t)throw Error(re(300));return e}function ma(){var e=0!==ua;return ua=0,e}function ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===aa?sa.memoizedState=aa=e:aa=aa.next=e,aa}function ya(){if(null===oa){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===aa?sa.memoizedState:aa.next;if(null!==t)aa=t,oa=e;else{if(null===e)throw Error(re(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===aa?sa.memoizedState=aa=e:aa=aa.next=e}return aa}function va(e,t){return"function"==typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(re(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ia&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(a=l=d,o=r):l=l.next=d,sa.lanes|=u,Pc|=u}c=c.next}while(null!==c&&c!==s);null===l?o=r:l.next=a,si(r,t.memoizedState)||(gl=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,sa.lanes|=s,Pc|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(re(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);si(s,t.memoizedState)||(gl=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function xa(){}function ka(e,t){var n=sa,r=ya(),i=t(),s=!si(r.memoizedState,i);if(s&&(r.memoizedState=i,gl=!0),r=r.queue,ja(Ea.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==aa&&1&aa.memoizedState.tag){if(n.flags|=2048,Aa(9,_a.bind(null,n,r,i,t),void 0,null),null===Tc)throw Error(re(349));30&ia||Sa(n,t,i)}return i}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&Ia(e)}function Ea(e,t,n){return n(function(){Ta(t)&&Ia(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(r){return!0}}function Ia(e){var t=Po(e,1);null!==t&&Zc(t,e,1,-1)}function Ca(e){var t=ga();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,sa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Na(){return ya().memoizedState}function Ra(e,t,n,r){var i=ga();sa.flags|=e,i.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var o=oa.memoizedState;if(s=o.destroy,null!==r&&fa(r,o.deps))return void(i.memoizedState=Aa(t,n,s,r))}sa.flags|=e,i.memoizedState=Aa(1|t,n,s,r)}function Pa(e,t){return Ra(8390656,8,e,t)}function ja(e,t){return Da(2048,8,e,t)}function Oa(e,t){return Da(4,2,e,t)}function La(e,t){return Da(4,4,e,t)}function Ma(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!=n?n.concat([e]):null,Da(4,4,Ma.bind(null,t,e),n)}function Fa(){}function Ua(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Va(e,t,n){return 21&ia?(si(n,t)||(n=pn(),sa.lanes|=n,Pc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gl=!0),e.memoizedState=n)}function $a(e,t){var n=vn;vn=0!==n&&4>n?n:4,e(!0);var r=ra.transition;ra.transition={};try{e(!1),t()}finally{vn=n,ra.transition=r}}function qa(){return ya().memoizedState}function Ha(e,t,n){var r=Jc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wa(e))Ga(t,n);else if(null!==(n=Do(e,t,n,r))){Zc(n,e,r,Xc()),Qa(n,t,r)}}function Ka(e,t,n){var r=Jc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wa(e))Ga(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,si(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ro(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Do(e,t,i,r))&&(Zc(n,e,r,i=Xc()),Qa(n,t,r))}}function Wa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ga(e,t){ca=la=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yn(e,n)}}var Ya={readContext:Ao,useCallback:ha,useContext:ha,useEffect:ha,useImperativeHandle:ha,useInsertionEffect:ha,useLayoutEffect:ha,useMemo:ha,useReducer:ha,useRef:ha,useState:ha,useDebugValue:ha,useDeferredValue:ha,useTransition:ha,useMutableSource:ha,useSyncExternalStore:ha,useId:ha,unstable_isNewReconciler:!1},Xa={readContext:Ao,useCallback:function(e,t){return ga().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ra(4194308,4,Ma.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var n=ga();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ga();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ha.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ga().memoizedState=e},useState:Ca,useDebugValue:Fa,useDeferredValue:function(e){return ga().memoizedState=e},useTransition:function(){var e=Ca(!1),t=e[0];return e=$a.bind(null,e[1]),ga().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=ga();if(no){if(void 0===n)throw Error(re(407));n=n()}else{if(n=t(),null===Tc)throw Error(re(349));30&ia||Sa(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Pa(Ea.bind(null,r,s,e),[e]),r.flags|=2048,Aa(9,_a.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ga(),t=Tc.identifierPrefix;if(no){var n=Qs;t=":"+t+"R"+(n=(Gs&~(1<<32-sn(Gs)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ja={readContext:Ao,useCallback:Ua,useContext:Ao,useEffect:ja,useImperativeHandle:za,useInsertionEffect:Oa,useLayoutEffect:La,useMemo:Ba,useReducer:ba,useRef:Na,useState:function(){return ba(va)},useDebugValue:Fa,useDeferredValue:function(e){return Va(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(va)[0],ya().memoizedState]},useMutableSource:xa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1},Za={readContext:Ao,useCallback:Ua,useContext:Ao,useEffect:ja,useImperativeHandle:za,useInsertionEffect:Oa,useLayoutEffect:La,useMemo:Ba,useReducer:wa,useRef:Na,useState:function(){return wa(va)},useDebugValue:Fa,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Va(t,oa.memoizedState,e)},useTransition:function(){return[wa(va)[0],ya().memoizedState]},useMutableSource:xa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1};function el(e,t){if(e&&e.defaultProps){for(var n in t=Oe({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function tl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Oe({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var nl={isMounted:function(e){return!!(e=e._reactInternals)&&Ut(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xc(),i=Jc(e),s=Mo(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=zo(e,s,i))&&(Zc(t,e,i,r),Fo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xc(),i=Jc(e),s=Mo(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=zo(e,s,i))&&(Zc(t,e,i,r),Fo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xc(),r=Jc(e),i=Mo(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=zo(e,i,r))&&(Zc(t,e,r,n),Fo(t,e,r))}};function rl(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!oi(n,r)||!oi(i,s))}function il(e,t,n){var r=!1,i=Es,s=t.contextType;return"object"==typeof s&&null!==s?s=Ao(s):(i=Ns(t)?Cs:Ts.current,s=(r=null!=(r=t.contextTypes))?As(e,i):Es),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function sl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function ol(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Oo(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Ao(s):(s=Ns(t)?Cs:Ts.current,i.context=As(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(tl(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&nl.enqueueReplaceState(i,i.state,null),Bo(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function al(e,t){try{var n="",r=t;do{n+=Fe(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ll(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var cl="function"==typeof WeakMap?WeakMap:Map;function ul(e,t,n){(n=Mo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bc||(Bc=!0,Vc=r)},n}function dl(e,t,n){(n=Mo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===$c?$c=new Set([this]):$c.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function hl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new cl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function fl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function pl(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mo(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e)}var ml=ve.ReactCurrentOwner,gl=!1;function yl(e,t,n,r){t.child=null===e?wo(t,null,n,r):bo(t,e.child,n,r)}function vl(e,t,n,r,i){n=n.render;var s=t.ref;return Co(t,i),r=pa(e,t,n,r,s,i),n=ma(),null===e||gl?(no&&n&&Js(t),t.flags|=1,yl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bl(e,t,i))}function bl(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Au(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ru(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,wl(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:oi)(o,r)&&e.ref===t.ref)return Bl(e,t,i)}return t.flags|=1,(e=Nu(s,r)).ref=t.ref,e.return=t,t.child=e}function wl(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(oi(s,r)&&e.ref===t.ref){if(gl=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Bl(e,t,i);131072&e.flags&&(gl=!0)}}return Sl(e,t,n,r,i)}function xl(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_s(Nc,Ac),Ac|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,_s(Nc,Ac),Ac|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_s(Nc,Ac),Ac|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,_s(Nc,Ac),Ac|=r;return yl(e,t,i,n),t.child}function kl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sl(e,t,n,r,i){var s=Ns(n)?Cs:Ts.current;return s=As(t,s),Co(t,i),n=pa(e,t,n,r,s,i),r=ma(),null===e||gl?(no&&r&&Js(t),t.flags|=1,yl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bl(e,t,i))}function _l(e,t,n,r,i){if(Ns(n)){var s=!0;js(t)}else s=!1;if(Co(t,i),null===t.stateNode)Ul(e,t),il(t,n,r),ol(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=Ao(c):c=As(t,c=Ns(n)?Cs:Ts.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==c)&&sl(t,o,r,c),jo=!1;var h=t.memoizedState;o.state=h,Bo(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Is.current||jo?("function"==typeof u&&(tl(t,n,u,r),l=t.memoizedState),(a=jo||rl(t,n,a,r,h,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Lo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:el(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=Ao(l):l=As(t,l=Ns(n)?Cs:Ts.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||h!==l)&&sl(t,o,r,l),jo=!1,h=t.memoizedState,o.state=h,Bo(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Is.current||jo?("function"==typeof f&&(tl(t,n,f,r),p=t.memoizedState),(c=jo||rl(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return El(e,t,n,r,s,i)}function El(e,t,n,r,i,s){kl(e,t);var o=!!(128&t.flags);if(!r&&!o)return i&&Os(t,n,!1),Bl(e,t,s);r=t.stateNode,ml.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bo(t,e.child,null,s),t.child=bo(t,null,a,s)):yl(e,t,a,s),t.memoizedState=r.state,i&&Os(t,n,!0),t.child}function Tl(e){var t=e.stateNode;t.pendingContext?Ds(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ds(0,t.context,!1),Go(e,t.containerInfo)}function Il(e,t,n,r,i){return ho(),fo(i),t.flags|=256,yl(e,t,n,r),t.child}var Cl,Al,Nl,Rl,Dl={dehydrated:null,treeContext:null,retryLane:0};function Pl(e){return{baseLanes:e,cachePool:null,transitions:null}}function jl(e,t,n){var r,i=t.pendingProps,s=Jo.current,o=!1,a=!!(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),_s(Jo,1&s),null===e)return ao(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},1&i||null===o?o=Pu(a,i,0,null):(o.childLanes=0,o.pendingProps=a),e=Du(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Pl(n),t.memoizedState=Dl,e):Ol(t,a));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,Ll(e,t,o,r=ll(Error(re(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Pu({mode:"visible",children:r.children},i,0,null),(s=Du(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&bo(t,e.child,null,o),t.child.memoizedState=Pl(o),t.memoizedState=Dl,s);if(!(1&t.mode))return Ll(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var a=r.dgst;return r=a,Ll(e,t,o,r=ll(s=Error(re(419)),r,void 0))}if(a=0!==(o&e.childLanes),gl||a){if(null!==(r=Tc)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Po(e,i),Zc(r,e,i,-1))}return hu(),Ll(e,t,o,r=ll(Error(re(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_u.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,to=as(i.nextSibling),eo=t,no=!0,ro=null,null!==e&&(Hs[Ks++]=Gs,Hs[Ks++]=Qs,Hs[Ks++]=Ws,Gs=e.id,Qs=e.overflow,Ws=t),t=Ol(t,r.children),t.flags|=4096,t)}(e,t,a,i,r,s,n);if(o){o=i.fallback,a=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&a||t.child===s?(i=Nu(s,l)).subtreeFlags=14680064&s.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==r?o=Nu(r,o):(o=Du(o,a,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,a=null===(a=e.child.memoizedState)?Pl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Dl,i}return e=(o=e.child).sibling,i=Nu(o,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ol(e,t){return(t=Pu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ll(e,t,n,r){return null!==r&&fo(r),bo(t,e.child,null,n),(e=Ol(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ml(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Io(e.return,t,n)}function zl(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Fl(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(yl(e,t,r.children,n),2&(r=Jo.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ml(e,n,t);else if(19===e.tag)Ml(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_s(Jo,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Zo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zl(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Zo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zl(t,!0,n,null,s);break;case"together":zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Ul(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(re(153));if(null!==t.child){for(n=Nu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vl(e,t){if(!no)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $l(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ql(e,t,n){var r=t.pendingProps;switch(Zs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $l(t),null;case 1:case 17:return Ns(t.type)&&Rs(),$l(t),null;case 3:return r=t.stateNode,Qo(),Ss(Is),Ss(Ts),ta(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(co(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ro&&(ru(ro),ro=null))),Al(e,t),$l(t),null;case 5:Xo(t);var i=Wo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)Nl(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(re(166));return $l(t),null}if(e=Wo(qo.current),co(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[us]=t,r[ds]=s,e=!!(1&t.mode),n){case"dialog":Mi("cancel",r),Mi("close",r);break;case"iframe":case"object":case"embed":Mi("load",r);break;case"video":case"audio":for(i=0;i<Pi.length;i++)Mi(Pi[i],r);break;case"source":Mi("error",r);break;case"img":case"image":case"link":Mi("error",r),Mi("load",r);break;case"details":Mi("toggle",r);break;case"input":Ge(r,s),Mi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Mi("invalid",r);break;case"textarea":nt(r,s),Mi("invalid",r)}for(var o in gt(n,s),i=null,s)if(s.hasOwnProperty(o)){var a=s[o];"children"===o?"string"==typeof a?r.textContent!==a&&(!0!==s.suppressHydrationWarning&&Yi(r.textContent,a,e),i=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(!0!==s.suppressHydrationWarning&&Yi(r.textContent,a,e),i=["children",""+a]):se.hasOwnProperty(o)&&null!=a&&"onScroll"===o&&Mi("scroll",r)}switch(n){case"input":qe(r),Xe(r,s,!0);break;case"textarea":qe(r),it(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Xi)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{o=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=st(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),"select"===n&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[us]=t,e[ds]=r,Cl(e,t,!1,!1),t.stateNode=e;e:{switch(o=yt(n,r),n){case"dialog":Mi("cancel",e),Mi("close",e),i=r;break;case"iframe":case"object":case"embed":Mi("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pi.length;i++)Mi(Pi[i],e);i=r;break;case"source":Mi("error",e),i=r;break;case"img":case"image":case"link":Mi("error",e),Mi("load",e),i=r;break;case"details":Mi("toggle",e),i=r;break;case"input":Ge(e,r),i=We(e,r),Mi("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Oe({},r,{value:void 0}),Mi("invalid",e);break;case"textarea":nt(e,r),i=tt(e,r),Mi("invalid",e)}for(s in gt(n,i),a=i)if(a.hasOwnProperty(s)){var l=a[s];"style"===s?pt(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&ct(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&ut(e,l):"number"==typeof l&&ut(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(se.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Mi("scroll",e):null!=l&&ye(e,s,l,o))}switch(n){case"input":qe(e),Xe(e,r,!1);break;case"textarea":qe(e),it(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?et(e,!!r.multiple,s,!1):null!=r.defaultValue&&et(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Xi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $l(t),null;case 6:if(e&&null!=t.stateNode)Rl(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(re(166));if(n=Wo(Ko.current),Wo(qo.current),co(t)){if(r=t.stateNode,n=t.memoizedProps,r[us]=t,(s=r.nodeValue!==n)&&null!==(e=eo))switch(e.tag){case 3:Yi(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yi(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[us]=t,t.stateNode=r}return $l(t),null;case 13:if(Ss(Jo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(no&&null!==to&&1&t.mode&&!(128&t.flags))uo(),ho(),t.flags|=98560,s=!1;else if(s=co(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(re(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(re(317));s[us]=t}else ho(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$l(t),s=!1}else null!==ro&&(ru(ro),ro=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Jo.current?0===Rc&&(Rc=3):hu())),null!==t.updateQueue&&(t.flags|=4),$l(t),null);case 4:return Qo(),Al(e,t),null===e&&Ui(t.stateNode.containerInfo),$l(t),null;case 10:return To(t.type._context),$l(t),null;case 19:if(Ss(Jo),null===(s=t.memoizedState))return $l(t),null;if(r=!!(128&t.flags),null===(o=s.rendering))if(r)Vl(s,!1);else{if(0!==Rc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=Zo(e))){for(t.flags|=128,Vl(s,!1),null!==(r=o.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(o=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _s(Jo,1&Jo.current|2),t.child}e=e.sibling}null!==s.tail&&Qt()>Fc&&(t.flags|=128,r=!0,Vl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Zo(o))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!o.alternate&&!no)return $l(t),null}else 2*Qt()-s.renderingStartTime>Fc&&1073741824!==n&&(t.flags|=128,r=!0,Vl(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=s.last)?n.sibling=o:t.child=o,s.last=o)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qt(),t.sibling=null,n=Jo.current,_s(Jo,r?1&n|2:1&n),t):($l(t),null);case 22:case 23:return lu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Ac)&&($l(t),6&t.subtreeFlags&&(t.flags|=8192)):$l(t),null;case 24:case 25:return null}throw Error(re(156,t.tag))}function Hl(e,t){switch(Zs(t),t.tag){case 1:return Ns(t.type)&&Rs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ss(Is),Ss(Ts),ta(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xo(t),null;case 13:if(Ss(Jo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(re(340));ho()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Jo),null;case 4:return Qo(),null;case 10:return To(t.type._context),null;case 22:case 23:return lu(),null;default:return null}}Cl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Al=function(){},Nl=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Wo(qo.current);var s,o=null;switch(n){case"input":i=We(e,i),r=We(e,r),o=[];break;case"select":i=Oe({},i,{value:void 0}),r=Oe({},r,{value:void 0}),o=[];break;case"textarea":i=tt(e,i),r=tt(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Xi)}for(c in gt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(se.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(null!=l||null!=a))if("style"===c)if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(se.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Mi("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Rl=function(e,t,n,r){n!==r&&(t.flags|=4)};var Kl=!1,Wl=!1,Gl="function"==typeof WeakSet?WeakSet:Set,Ql=null;function Yl(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){xu(e,t,r)}else n.current=null}function Xl(e,t,n){try{n()}catch(r){xu(e,t,r)}}var Jl=!1;function Zl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Xl(t,n,s)}i=i.next}while(i!==r)}}function ec(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function nc(e){var t=e.alternate;null!==t&&(e.alternate=null,nc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[us],delete t[ds],delete t[fs],delete t[ps],delete t[ms])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rc(e){return 5===e.tag||3===e.tag||4===e.tag}function ic(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function sc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Xi));else if(4!==r&&null!==(e=e.child))for(sc(e,t,n),e=e.sibling;null!==e;)sc(e,t,n),e=e.sibling}function oc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(oc(e,t,n),e=e.sibling;null!==e;)oc(e,t,n),e=e.sibling}var ac=null,lc=!1;function cc(e,t,n){for(n=n.child;null!==n;)uc(e,t,n),n=n.sibling}function uc(e,t,n){if(rn&&"function"==typeof rn.onCommitFiberUnmount)try{rn.onCommitFiberUnmount(nn,n)}catch(a){}switch(n.tag){case 5:Wl||Yl(n,t);case 6:var r=ac,i=lc;ac=null,cc(e,t,n),lc=i,null!==(ac=r)&&(lc?(e=ac,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ac.removeChild(n.stateNode));break;case 18:null!==ac&&(lc?(e=ac,n=n.stateNode,8===e.nodeType?os(e.parentNode,n):1===e.nodeType&&os(e,n),Bn(e)):os(ac,n.stateNode));break;case 4:r=ac,i=lc,ac=n.stateNode.containerInfo,lc=!0,cc(e,t,n),ac=r,lc=i;break;case 0:case 11:case 14:case 15:if(!Wl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(2&s||4&s)&&Xl(n,t,o),i=i.next}while(i!==r)}cc(e,t,n);break;case 1:if(!Wl&&(Yl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xu(n,t,a)}cc(e,t,n);break;case 21:cc(e,t,n);break;case 22:1&n.mode?(Wl=(r=Wl)||null!==n.memoizedState,cc(e,t,n),Wl=r):cc(e,t,n);break;default:cc(e,t,n)}}function dc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Gl),t.forEach(function(t){var r=Eu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function hc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;null!==a;){switch(a.tag){case 5:ac=a.stateNode,lc=!1;break e;case 3:case 4:ac=a.stateNode.containerInfo,lc=!0;break e}a=a.return}if(null===ac)throw Error(re(160));uc(s,o,i),ac=null,lc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){xu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fc(t,e),t=t.sibling}function fc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hc(t,e),pc(e),4&r){try{Zl(3,e,e.return),ec(3,e)}catch(m){xu(e,e.return,m)}try{Zl(5,e,e.return)}catch(m){xu(e,e.return,m)}}break;case 1:hc(t,e),pc(e),512&r&&null!==n&&Yl(n,n.return);break;case 5:if(hc(t,e),pc(e),512&r&&null!==n&&Yl(n,n.return),32&e.flags){var i=e.stateNode;try{ut(i,"")}catch(m){xu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===a&&"radio"===s.type&&null!=s.name&&Qe(i,s),yt(a,o);var c=yt(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];"style"===u?pt(i,d):"dangerouslySetInnerHTML"===u?ct(i,d):"children"===u?ut(i,d):ye(i,u,d,c)}switch(a){case"input":Ye(i,s);break;case"textarea":rt(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?et(i,!!s.multiple,f,!1):h!==!!s.multiple&&(null!=s.defaultValue?et(i,!!s.multiple,s.defaultValue,!0):et(i,!!s.multiple,s.multiple?[]:"",!1))}i[ds]=s}catch(m){xu(e,e.return,m)}}break;case 6:if(hc(t,e),pc(e),4&r){if(null===e.stateNode)throw Error(re(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){xu(e,e.return,m)}}break;case 3:if(hc(t,e),pc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bn(t.containerInfo)}catch(m){xu(e,e.return,m)}break;case 4:default:hc(t,e),pc(e);break;case 13:hc(t,e),pc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=Qt())),4&r&&dc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Wl=(c=Wl)||u,hc(t,e),Wl=c):hc(t,e),pc(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Ql=e,u=e.child;null!==u;){for(d=Ql=u;null!==Ql;){switch(f=(h=Ql).child,h.tag){case 0:case 11:case 14:case 15:Zl(4,h,h.return);break;case 1:Yl(h,h.return);var p=h.stateNode;if("function"==typeof p.componentWillUnmount){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){xu(r,n,m)}}break;case 5:Yl(h,h.return);break;case 22:if(null!==h.memoizedState){vc(d);continue}}null!==f?(f.return=h,Ql=f):vc(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{i=d.stateNode,c?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(a=d.stateNode,o=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,a.style.display=ft("display",o))}catch(m){xu(e,e.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){xu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:hc(t,e),pc(e),4&r&&dc(e);case 21:}}function pc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rc(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ut(i,""),r.flags&=-33),oc(e,ic(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;sc(e,ic(e),s);break;default:throw Error(re(161))}}catch(o){xu(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function mc(e,t,n){Ql=e,gc(e)}function gc(e,t,n){for(var r=!!(1&e.mode);null!==Ql;){var i=Ql,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Kl;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Wl;a=Kl;var c=Wl;if(Kl=o,(Wl=l)&&!c)for(Ql=i;null!==Ql;)l=(o=Ql).child,22===o.tag&&null!==o.memoizedState?bc(i):null!==l?(l.return=o,Ql=l):bc(i);for(;null!==s;)Ql=s,gc(s),s=s.sibling;Ql=i,Kl=a,Wl=c}yc(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,Ql=s):yc(e)}}function yc(e){for(;null!==Ql;){var t=Ql;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Wl||ec(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Wl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:el(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Vo(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,o,n)}break;case 5:var a=t.stateNode;if(null===n&&4&t.flags){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Bn(d)}}}break;default:throw Error(re(163))}Wl||512&t.flags&&tc(t)}catch(h){xu(t,t.return,h)}}if(t===e){Ql=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ql=n;break}Ql=t.return}}function vc(e){for(;null!==Ql;){var t=Ql;if(t===e){Ql=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ql=n;break}Ql=t.return}}function bc(e){for(;null!==Ql;){var t=Ql;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ec(4,t)}catch(l){xu(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xu(t,i,l)}}var s=t.return;try{tc(t)}catch(l){xu(t,s,l)}break;case 5:var o=t.return;try{tc(t)}catch(l){xu(t,o,l)}}}catch(l){xu(t,t.return,l)}if(t===e){Ql=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ql=a;break}Ql=t.return}}var wc,xc=Math.ceil,kc=ve.ReactCurrentDispatcher,Sc=ve.ReactCurrentOwner,_c=ve.ReactCurrentBatchConfig,Ec=0,Tc=null,Ic=null,Cc=0,Ac=0,Nc=ks(0),Rc=0,Dc=null,Pc=0,jc=0,Oc=0,Lc=null,Mc=null,zc=0,Fc=1/0,Uc=null,Bc=!1,Vc=null,$c=null,qc=!1,Hc=null,Kc=0,Wc=0,Gc=null,Qc=-1,Yc=0;function Xc(){return 6&Ec?Qt():-1!==Qc?Qc:Qc=Qt()}function Jc(e){return 1&e.mode?2&Ec&&0!==Cc?Cc&-Cc:null!==po.transition?(0===Yc&&(Yc=pn()),Yc):0!==(e=vn)?e:e=void 0===(e=window.event)?16:Qn(e.type):1}function Zc(e,t,n,r){if(50<Wc)throw Wc=0,Gc=null,Error(re(185));gn(e,n,r),2&Ec&&e===Tc||(e===Tc&&(!(2&Ec)&&(jc|=n),4===Rc&&iu(e,Cc)),eu(e,r),1===n&&0===Ec&&!(1&t.mode)&&(Fc=Qt()+500,Ms&&Us()))}function eu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-sn(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=hn(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dn(e,e===Tc?Cc:0);if(0===r)null!==n&&Kt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Kt(n),1===t)0===e.tag?function(e){Ms=!0,Fs(e)}(su.bind(null,e)):Fs(su.bind(null,e)),is(function(){!(6&Ec)&&Us()}),n=null;else{switch(bn(r)){case 1:n=Xt;break;case 4:n=Jt;break;case 16:default:n=Zt;break;case 536870912:n=tn}n=Tu(n,tu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tu(e,t){if(Qc=-1,Yc=0,6&Ec)throw Error(re(327));var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var r=dn(e,e===Tc?Cc:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=fu(e,r);else{t=r;var i=Ec;Ec|=2;var s=du();for(Tc===e&&Cc===t||(Uc=null,Fc=Qt()+500,cu(e,t));;)try{mu();break}catch(a){uu(e,a)}Eo(),kc.current=s,Ec=i,null!==Ic?t=0:(Tc=null,Cc=0,t=Rc)}if(0!==t){if(2===t&&(0!==(i=fn(e))&&(r=i,t=nu(e,i))),1===t)throw n=Dc,cu(e,0),iu(e,r),eu(e,Qt()),n;if(6===t)iu(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!si(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=fu(e,r),2===t&&(s=fn(e),0!==s&&(r=s,t=nu(e,s))),1!==t)))throw n=Dc,cu(e,0),iu(e,r),eu(e,Qt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(re(345));case 2:case 5:vu(e,Mc,Uc);break;case 3:if(iu(e,r),(130023424&r)===r&&10<(t=zc+500-Qt())){if(0!==dn(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Xc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ts(vu.bind(null,e,Mc,Uc),t);break}vu(e,Mc,Uc);break;case 4:if(iu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-sn(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xc(r/1960))-r)){e.timeoutHandle=ts(vu.bind(null,e,Mc,Uc),r);break}vu(e,Mc,Uc);break;default:throw Error(re(329))}}}return eu(e,Qt()),e.callbackNode===n?tu.bind(null,e):null}function nu(e,t){var n=Lc;return e.current.memoizedState.isDehydrated&&(cu(e,t).flags|=256),2!==(e=fu(e,t))&&(t=Mc,Mc=n,null!==t&&ru(t)),e}function ru(e){null===Mc?Mc=e:Mc.push.apply(Mc,e)}function iu(e,t){for(t&=~Oc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sn(t),r=1<<n;e[n]=-1,t&=~r}}function su(e){if(6&Ec)throw Error(re(327));bu();var t=dn(e,0);if(!(1&t))return eu(e,Qt()),null;var n=fu(e,t);if(0!==e.tag&&2===n){var r=fn(e);0!==r&&(t=r,n=nu(e,r))}if(1===n)throw n=Dc,cu(e,0),iu(e,t),eu(e,Qt()),n;if(6===n)throw Error(re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vu(e,Mc,Uc),eu(e,Qt()),null}function ou(e,t){var n=Ec;Ec|=1;try{return e(t)}finally{0===(Ec=n)&&(Fc=Qt()+500,Ms&&Us())}}function au(e){null!==Hc&&0===Hc.tag&&!(6&Ec)&&bu();var t=Ec;Ec|=1;var n=_c.transition,r=vn;try{if(_c.transition=null,vn=1,e)return e()}finally{vn=r,_c.transition=n,!(6&(Ec=t))&&Us()}}function lu(){Ac=Nc.current,Ss(Nc)}function cu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ns(n)),null!==Ic)for(n=Ic.return;null!==n;){var r=n;switch(Zs(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Rs();break;case 3:Qo(),Ss(Is),Ss(Ts),ta();break;case 5:Xo(r);break;case 4:Qo();break;case 13:case 19:Ss(Jo);break;case 10:To(r.type._context);break;case 22:case 23:lu()}n=n.return}if(Tc=e,Ic=e=Nu(e.current,null),Cc=Ac=t,Rc=0,Dc=null,Oc=jc=Pc=0,Mc=Lc=null,null!==No){for(t=0;t<No.length;t++)if(null!==(r=(n=No[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}No=null}return e}function uu(e,t){for(;;){var n=Ic;try{if(Eo(),na.current=Ya,la){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}la=!1}if(ia=0,aa=oa=sa=null,ca=!1,ua=0,Sc.current=null,null===n||null===n.return){Rc=1,Dc=t,Ic=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Cc,a.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=a,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=fl(o);if(null!==f){f.flags&=-257,pl(f,o,a,0,t),1&f.mode&&hl(s,c,t),l=c;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(!(1&t)){hl(s,c,t),hu();break e}l=Error(re(426))}else if(no&&1&a.mode){var g=fl(o);if(null!==g){!(65536&g.flags)&&(g.flags|=256),pl(g,o,a,0,t),fo(al(l,a));break e}}s=l=al(l,a),4!==Rc&&(Rc=2),null===Lc?Lc=[s]:Lc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Uo(s,ul(0,l,t));break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(128&s.flags||"function"!=typeof y.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==$c&&$c.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Uo(s,dl(s,a,t));break e}}s=s.return}while(null!==s)}yu(n)}catch(b){t=b,Ic===n&&null!==n&&(Ic=n=n.return);continue}break}}function du(){var e=kc.current;return kc.current=Ya,null===e?Ya:e}function hu(){0!==Rc&&3!==Rc&&2!==Rc||(Rc=4),null===Tc||!(268435455&Pc)&&!(268435455&jc)||iu(Tc,Cc)}function fu(e,t){var n=Ec;Ec|=2;var r=du();for(Tc===e&&Cc===t||(Uc=null,cu(e,t));;)try{pu();break}catch(i){uu(e,i)}if(Eo(),Ec=n,kc.current=r,null!==Ic)throw Error(re(261));return Tc=null,Cc=0,Rc}function pu(){for(;null!==Ic;)gu(Ic)}function mu(){for(;null!==Ic&&!Wt();)gu(Ic)}function gu(e){var t=wc(e.alternate,e,Ac);e.memoizedProps=e.pendingProps,null===t?yu(e):Ic=t,Sc.current=null}function yu(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Hl(n,t)))return n.flags&=32767,void(Ic=n);if(null===e)return Rc=6,void(Ic=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=ql(n,t,Ac)))return void(Ic=n);if(null!==(t=t.sibling))return void(Ic=t);Ic=t=e}while(null!==t);0===Rc&&(Rc=5)}function vu(e,t,n){var r=vn,i=_c.transition;try{_c.transition=null,vn=1,function(e,t,n,r){do{bu()}while(null!==Hc);if(6&Ec)throw Error(re(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-sn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,s),e===Tc&&(Ic=Tc=null,Cc=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||qc||(qc=!0,Tu(Zt,function(){return bu(),null})),s=!!(15990&n.flags),!!(15990&n.subtreeFlags)||s){s=_c.transition,_c.transition=null;var o=vn;vn=1;var a=Ec;Ec|=4,Sc.current=null,function(e,t){if(Ji=$n,di(e=ui())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(a=o+i),d!==s||0!==r&&3!==d.nodeType||(l=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===a||-1===l?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zi={focusedElem:e,selectionRange:n},$n=!1,Ql=t;null!==Ql;)if(e=(t=Ql).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ql=e;else for(;null!==Ql;){t=Ql;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:el(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(re(163))}}catch(w){xu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ql=e;break}Ql=t.return}p=Jl,Jl=!1}(e,n),fc(n,e),hi(Zi),$n=!!Ji,Zi=Ji=null,e.current=n,mc(n),Gt(),Ec=a,vn=o,_c.transition=s}else e.current=n;if(qc&&(qc=!1,Hc=e,Kc=i),s=e.pendingLanes,0===s&&($c=null),function(e){if(rn&&"function"==typeof rn.onCommitFiberRoot)try{rn.onCommitFiberRoot(nn,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),eu(e,Qt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bc)throw Bc=!1,e=Vc,Vc=null,e;!!(1&Kc)&&0!==e.tag&&bu(),s=e.pendingLanes,1&s?e===Gc?Wc++:(Wc=0,Gc=e):Wc=0,Us()}(e,t,n,r)}finally{_c.transition=i,vn=r}return null}function bu(){if(null!==Hc){var e=bn(Kc),t=_c.transition,n=vn;try{if(_c.transition=null,vn=16>e?16:e,null===Hc)var r=!1;else{if(e=Hc,Hc=null,Kc=0,6&Ec)throw Error(re(331));var i=Ec;for(Ec|=4,Ql=e.current;null!==Ql;){var s=Ql,o=s.child;if(16&Ql.flags){var a=s.deletions;if(null!==a){for(var l=0;l<a.length;l++){var c=a[l];for(Ql=c;null!==Ql;){var u=Ql;switch(u.tag){case 0:case 11:case 15:Zl(8,u,s)}var d=u.child;if(null!==d)d.return=u,Ql=d;else for(;null!==Ql;){var h=(u=Ql).sibling,f=u.return;if(nc(u),u===c){Ql=null;break}if(null!==h){h.return=f,Ql=h;break}Ql=f}}}var p=s.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Ql=s}}if(2064&s.subtreeFlags&&null!==o)o.return=s,Ql=o;else e:for(;null!==Ql;){if(2048&(s=Ql).flags)switch(s.tag){case 0:case 11:case 15:Zl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Ql=y;break e}Ql=s.return}}var v=e.current;for(Ql=v;null!==Ql;){var b=(o=Ql).child;if(2064&o.subtreeFlags&&null!==b)b.return=o,Ql=b;else e:for(o=v;null!==Ql;){if(2048&(a=Ql).flags)try{switch(a.tag){case 0:case 11:case 15:ec(9,a)}}catch(x){xu(a,a.return,x)}if(a===o){Ql=null;break e}var w=a.sibling;if(null!==w){w.return=a.return,Ql=w;break e}Ql=a.return}}if(Ec=i,Us(),rn&&"function"==typeof rn.onPostCommitFiberRoot)try{rn.onPostCommitFiberRoot(nn,e)}catch(x){}r=!0}return r}finally{vn=n,_c.transition=t}}return!1}function wu(e,t,n){e=zo(e,t=ul(0,t=al(n,t),1),1),t=Xc(),null!==e&&(gn(e,1,t),eu(e,t))}function xu(e,t,n){if(3===e.tag)wu(e,e,n);else for(;null!==t;){if(3===t.tag){wu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===$c||!$c.has(r))){t=zo(t,e=dl(t,e=al(n,e),1),1),e=Xc(),null!==t&&(gn(t,1,e),eu(t,e));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Xc(),e.pingedLanes|=e.suspendedLanes&n,Tc===e&&(Cc&n)===n&&(4===Rc||3===Rc&&(130023424&Cc)===Cc&&500>Qt()-zc?cu(e,0):Oc|=n),eu(e,t)}function Su(e,t){0===t&&(1&e.mode?(t=cn,!(130023424&(cn<<=1))&&(cn=4194304)):t=1);var n=Xc();null!==(e=Po(e,t))&&(gn(e,t,n),eu(e,n))}function _u(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Su(e,n)}function Eu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(re(314))}null!==r&&r.delete(t),Su(e,n)}function Tu(e,t){return Ht(e,t)}function Iu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cu(e,t,n,r){return new Iu(e,t,n,r)}function Au(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var n=e.alternate;return null===n?((n=Cu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ru(e,t,n,r,i,s){var o=2;if(r=e,"function"==typeof e)Au(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case xe:return Du(n.children,i,s,t);case ke:o=8,i|=8;break;case Se:return(e=Cu(12,n,t,2|i)).elementType=Se,e.lanes=s,e;case Ie:return(e=Cu(13,n,t,i)).elementType=Ie,e.lanes=s,e;case Ce:return(e=Cu(19,n,t,i)).elementType=Ce,e.lanes=s,e;case Re:return Pu(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case _e:o=10;break e;case Ee:o=9;break e;case Te:o=11;break e;case Ae:o=14;break e;case Ne:o=16,r=null;break e}throw Error(re(130,null==e?e:typeof e,""))}return(t=Cu(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Du(e,t,n,r){return(e=Cu(7,e,r,t)).lanes=n,e}function Pu(e,t,n,r){return(e=Cu(22,e,r,t)).elementType=Re,e.lanes=n,e.stateNode={isHidden:!1},e}function ju(e,t,n){return(e=Cu(6,e,null,t)).lanes=n,e}function Ou(e,t,n){return(t=Cu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mn(0),this.expirationTimes=mn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mn(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mu(e,t,n,r,i,s,o,a,l){return e=new Lu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Cu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(s),e}function zu(e){if(!e)return Es;e:{if(Ut(e=e._reactInternals)!==e||1!==e.tag)throw Error(re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ns(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(re(171))}if(1===e.tag){var n=e.type;if(Ns(n))return Ps(e,n,t)}return t}function Fu(e,t,n,r,i,s,o,a,l){return(e=Mu(n,r,!0,e,0,s,0,a,l)).context=zu(null),n=e.current,(s=Mo(r=Xc(),i=Jc(n))).callback=null!=t?t:null,zo(n,s,i),e.current.lanes=i,gn(e,i,r),eu(e,r),e}function Uu(e,t,n,r){var i=t.current,s=Xc(),o=Jc(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mo(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zo(i,t,o))&&(Zc(e,i,o,s),Fo(e,i,o)),o}function Bu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $u(e,t){Vu(e,t),(e=e.alternate)&&Vu(e,t)}wc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)gl=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return gl=!1,function(e,t,n){switch(t.tag){case 3:Tl(t),ho();break;case 5:Yo(t);break;case 1:Ns(t.type)&&js(t);break;case 4:Go(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_s(xo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_s(Jo,1&Jo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?jl(e,t,n):(_s(Jo,1&Jo.current),null!==(e=Bl(e,t,n))?e.sibling:null);_s(Jo,1&Jo.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Fl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_s(Jo,Jo.current),r)break;return null;case 22:case 23:return t.lanes=0,xl(e,t,n)}return Bl(e,t,n)}(e,t,n);gl=!!(131072&e.flags)}else gl=!1,no&&1048576&t.flags&&Xs(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ul(e,t),e=t.pendingProps;var i=As(t,Ts.current);Co(t,n),i=pa(null,t,r,e,i,n);var s=ma();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ns(r)?(s=!0,js(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(t),i.updater=nl,t.stateNode=i,i._reactInternals=t,ol(t,r,e,n),t=El(null,t,r,!0,s,n)):(t.tag=0,no&&s&&Js(t),yl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ul(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Au(e)?1:0;if(null!=e){if((e=e.$$typeof)===Te)return 11;if(e===Ae)return 14}return 2}(r),e=el(r,e),i){case 0:t=Sl(null,t,r,e,n);break e;case 1:t=_l(null,t,r,e,n);break e;case 11:t=vl(null,t,r,e,n);break e;case 14:t=bl(null,t,r,el(r.type,e),n);break e}throw Error(re(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Sl(e,t,r,i=t.elementType===r?i:el(r,i),n);case 1:return r=t.type,i=t.pendingProps,_l(e,t,r,i=t.elementType===r?i:el(r,i),n);case 3:e:{if(Tl(t),null===e)throw Error(re(387));r=t.pendingProps,i=(s=t.memoizedState).element,Lo(e,t),Bo(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Il(e,t,r,n,i=al(Error(re(423)),t));break e}if(r!==i){t=Il(e,t,r,n,i=al(Error(re(424)),t));break e}for(to=as(t.stateNode.containerInfo.firstChild),eo=t,no=!0,ro=null,n=wo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ho(),r===i){t=Bl(e,t,n);break e}yl(e,t,r,n)}t=t.child}return t;case 5:return Yo(t),null===e&&ao(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,es(r,i)?o=null:null!==s&&es(r,s)&&(t.flags|=32),kl(e,t),yl(e,t,o,n),t.child;case 6:return null===e&&ao(t),null;case 13:return jl(e,t,n);case 4:return Go(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bo(t,null,r,n):yl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,vl(e,t,r,i=t.elementType===r?i:el(r,i),n);case 7:return yl(e,t,t.pendingProps,n),t.child;case 8:case 12:return yl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,_s(xo,r._currentValue),r._currentValue=o,null!==s)if(si(s.value,o)){if(s.children===i.children&&!Is.current){t=Bl(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var a=s.dependencies;if(null!==a){o=s.child;for(var l=a.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=Mo(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Io(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(re(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Io(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}yl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Co(t,n),r=r(i=Ao(i)),t.flags|=1,yl(e,t,r,n),t.child;case 14:return i=el(r=t.type,t.pendingProps),bl(e,t,r,i=el(r.type,i),n);case 15:return wl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:el(r,i),Ul(e,t),t.tag=1,Ns(r)?(e=!0,js(t)):e=!1,Co(t,n),il(t,r,i),ol(t,r,i,n),El(null,t,r,!0,e,n);case 19:return Fl(e,t,n);case 22:return xl(e,t,n)}throw Error(re(156,t.tag))};var qu="function"==typeof reportError?reportError:function(e){};function Hu(e){this._internalRoot=e}function Ku(e){this._internalRoot=e}function Wu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Gu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function Yu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=Bu(o);a.call(e)}}Uu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Bu(o);s.call(e)}}var o=Fu(t,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=o,e[hs]=o.current,Ui(8===e.nodeType?e.parentNode:e),au(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=Bu(l);a.call(e)}}var l=Mu(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[hs]=l.current,Ui(8===e.nodeType?e.parentNode:e),au(function(){Uu(t,l,n,r)}),l}(n,t,e,i,r);return Bu(o)}Ku.prototype.render=Hu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(re(409));Uu(e,t,null,null)},Ku.prototype.unmount=Hu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;au(function(){Uu(null,e,null,null)}),t[hs]=null}},Ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dn.length&&0!==t&&t<Dn[n].priority;n++);Dn.splice(n,0,e),0===n&&Ln(e)}},wn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=un(t.pendingLanes);0!==n&&(yn(t,1|n),eu(t,Qt()),!(6&Ec)&&(Fc=Qt()+500,Us()))}break;case 13:au(function(){var t=Po(e,1);if(null!==t){var n=Xc();Zc(t,e,1,n)}}),$u(e,1)}},xn=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)Zc(t,e,134217728,Xc());$u(e,134217728)}},kn=function(e){if(13===e.tag){var t=Jc(e),n=Po(e,t);if(null!==n)Zc(n,e,t,Xc());$u(e,t)}},Sn=function(){return vn},_n=function(e,t){var n=vn;try{return vn=e,t()}finally{vn=n}},wt=function(e,t,n){switch(t){case"input":if(Ye(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bs(r);if(!i)throw Error(re(90));He(r),Ye(r,i)}}}break;case"textarea":rt(e,n);break;case"select":null!=(t=n.value)&&et(e,!!n.multiple,t,!1)}},Tt=ou,It=au;var Xu={usingClientEntryPoint:!1,Events:[ys,vs,bs,_t,Et,ou]},Ju={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zu={bundleType:Ju.bundleType,version:Ju.version,rendererPackageName:Ju.rendererPackageName,rendererConfig:Ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ve.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$t(e))?null:e.stateNode},findFiberByHostInstance:Ju.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{nn=ed.inject(Zu),rn=ed}catch(lt){}}X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xu,X.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Wu(t))throw Error(re(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:we,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},X.createRoot=function(e,t){if(!Wu(e))throw Error(re(299));var n=!1,r="",i=qu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Mu(e,1,!1,null,0,n,0,r,i),e[hs]=t.current,Ui(8===e.nodeType?e.parentNode:e),new Hu(t)},X.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(re(188));throw e=Object.keys(e).join(","),Error(re(268,e))}return e=null===(e=$t(t))?null:e.stateNode},X.flushSync=function(e){return au(e)},X.hydrate=function(e,t,n){if(!Gu(t))throw Error(re(200));return Yu(null,e,t,!0,n)},X.hydrateRoot=function(e,t,n){if(!Wu(e))throw Error(re(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=qu;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Fu(t,null,e,1,null!=n?n:null,i,0,s,o),e[hs]=t.current,Ui(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ku(t)},X.render=function(e,t,n){if(!Gu(t))throw Error(re(200));return Yu(null,e,t,!1,n)},X.unmountComponentAtNode=function(e){if(!Gu(e))throw Error(re(40));return!!e._reactRootContainer&&(au(function(){Yu(null,null,e,!1,function(){e._reactRootContainer=null,e[hs]=null})}),!0)},X.unstable_batchedUpdates=ou,X.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gu(n))throw Error(re(200));if(null==e||void 0===e._reactInternals)throw Error(re(38));return Yu(e,t,n,!1,r)},X.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),Y.exports=X;var td=Y.exports;Q.createRoot=td.createRoot,Q.hydrateRoot=td.hydrateRoot;var nd={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},id={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(rd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new sd;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class sd extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const od=function(e){return function(e){const t=rd(e);return id.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ad=function(e){try{return id.decodeString(e,!0)}catch(t){}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ld=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,cd=()=>{try{return ld()||(()=>{if("undefined"==typeof process)return;const e=nd.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&ad(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},ud=e=>{var t,n;return null===(n=null===(t=cd())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},dd=()=>{var e;return null===(e=cd())||void 0===e?void 0:e.config},hd=e=>{var t;return null===(t=cd())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pd(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function md(){return!function(){var e;const t=null===(e=cd())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class gd extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,gd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yd.prototype.create)}}class yd{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(vd,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new gd(r,o,n)}}const vd=/\{\$([^}]+)}/g;function bd(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(wd(n)&&wd(s)){if(!bd(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wd(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function kd(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Sd(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class _d{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ed),void 0===r.error&&(r.error=Ed),void 0===r.complete&&(r.complete=Ed);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ed(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(e){return e&&e._delegate?e._delegate:e}class Id{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new fd;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:Cd})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=Cd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Cd){return this.instances.has(e)}getOptions(e=Cd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Cd?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e=Cd){return this.component?this.component.multipleInstances?e:Cd:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Nd{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ad(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rd,Dd;(Dd=Rd||(Rd={}))[Dd.DEBUG=0]="DEBUG",Dd[Dd.VERBOSE=1]="VERBOSE",Dd[Dd.INFO=2]="INFO",Dd[Dd.WARN=3]="WARN",Dd[Dd.ERROR=4]="ERROR",Dd[Dd.SILENT=5]="SILENT";const Pd={debug:Rd.DEBUG,verbose:Rd.VERBOSE,info:Rd.INFO,warn:Rd.WARN,error:Rd.ERROR,silent:Rd.SILENT},jd=Rd.INFO,Od={[Rd.DEBUG]:"log",[Rd.VERBOSE]:"log",[Rd.INFO]:"info",[Rd.WARN]:"warn",[Rd.ERROR]:"error"},Ld=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!Od[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Md{constructor(e){this.name=e,this._logLevel=jd,this._logHandler=Ld,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rd))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Pd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rd.DEBUG,...e),this._logHandler(this,Rd.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rd.VERBOSE,...e),this._logHandler(this,Rd.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rd.INFO,...e),this._logHandler(this,Rd.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rd.WARN,...e),this._logHandler(this,Rd.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rd.ERROR,...e),this._logHandler(this,Rd.ERROR,...e)}}let zd,Fd;const Ud=new WeakMap,Bd=new WeakMap,Vd=new WeakMap,$d=new WeakMap,qd=new WeakMap;let Hd={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Bd.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Vd.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gd(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Kd(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fd||(Fd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Qd(this),t),Gd(Ud.get(this))}:function(...t){return Gd(e.apply(Qd(this),t))}:function(t,...n){const r=e.call(Qd(this),t,...n);return Vd.set(r,t.sort?t.sort():[t]),Gd(r)}}function Wd(e){return"function"==typeof e?Kd(e):(e instanceof IDBTransaction&&function(e){if(Bd.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Bd.set(e,t)}(e),t=e,(zd||(zd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Hd):e);var t}function Gd(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Gd(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Ud.set(t,e)}).catch(()=>{}),qd.set(t,e),t}(e);if($d.has(e))return $d.get(e);const t=Wd(e);return t!==e&&($d.set(e,t),qd.set(t,e)),t}const Qd=e=>qd.get(e);const Yd=["get","getKey","getAll","getAllKeys","count"],Xd=["put","add","delete","clear"],Jd=new Map;function Zd(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Jd.get(t))return Jd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Xd.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Yd.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return Jd.set(t,s),s}Hd=(e=>({...e,get:(t,n,r)=>Zd(t,n)||e.get(t,n,r),has:(t,n)=>!!Zd(t,n)||e.has(t,n)}))(Hd);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class eh{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const th="@firebase/app",nh="0.10.13",rh=new Md("@firebase/app"),ih="@firebase/app-compat",sh="@firebase/analytics-compat",oh="@firebase/analytics",ah="@firebase/app-check-compat",lh="@firebase/app-check",ch="@firebase/auth",uh="@firebase/auth-compat",dh="@firebase/database",hh="@firebase/data-connect",fh="@firebase/database-compat",ph="@firebase/functions",mh="@firebase/functions-compat",gh="@firebase/installations",yh="@firebase/installations-compat",vh="@firebase/messaging",bh="@firebase/messaging-compat",wh="@firebase/performance",xh="@firebase/performance-compat",kh="@firebase/remote-config",Sh="@firebase/remote-config-compat",_h="@firebase/storage",Eh="@firebase/storage-compat",Th="@firebase/firestore",Ih="@firebase/vertexai-preview",Ch="@firebase/firestore-compat",Ah="firebase",Nh="[DEFAULT]",Rh={[th]:"fire-core",[ih]:"fire-core-compat",[oh]:"fire-analytics",[sh]:"fire-analytics-compat",[lh]:"fire-app-check",[ah]:"fire-app-check-compat",[ch]:"fire-auth",[uh]:"fire-auth-compat",[dh]:"fire-rtdb",[hh]:"fire-data-connect",[fh]:"fire-rtdb-compat",[ph]:"fire-fn",[mh]:"fire-fn-compat",[gh]:"fire-iid",[yh]:"fire-iid-compat",[vh]:"fire-fcm",[bh]:"fire-fcm-compat",[wh]:"fire-perf",[xh]:"fire-perf-compat",[kh]:"fire-rc",[Sh]:"fire-rc-compat",[_h]:"fire-gcs",[Eh]:"fire-gcs-compat",[Th]:"fire-fst",[Ch]:"fire-fst-compat",[Ih]:"fire-vertex","fire-js":"fire-js",[Ah]:"fire-js-all"},Dh=new Map,Ph=new Map,jh=new Map;function Oh(e,t){try{e.container.addComponent(t)}catch(n){rh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Lh(e){const t=e.name;if(jh.has(t))return rh.debug(`There were multiple attempts to register component ${t}.`),!1;jh.set(t,e);for(const n of Dh.values())Oh(n,e);for(const n of Ph.values())Oh(n,e);return!0}function Mh(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function zh(e){return void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new yd("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Uh{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Id("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fh.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="10.14.1";function Vh(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:Nh,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw Fh.create("bad-app-name",{appName:String(i)});if(n||(n=dd()),!n)throw Fh.create("no-options");const s=Dh.get(i);if(s){if(bd(n,s.options)&&bd(r,s.config))return s;throw Fh.create("duplicate-app",{appName:i})}const o=new Nd(i);for(const l of jh.values())o.addComponent(l);const a=new Uh(n,r,o);return Dh.set(i,a),a}function $h(e=Nh){const t=Dh.get(e);if(!t&&e===Nh&&dd())return Vh();if(!t)throw Fh.create("no-app",{appName:e});return t}function qh(e,t,n){var r;let i=null!==(r=Rh[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void rh.warn(e.join(" "))}Lh(new Id(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="firebase-heartbeat-store";let Kh=null;function Wh(){return Kh||(Kh=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Gd(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Gd(o.result),e.oldVersion,e.newVersion,Gd(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Hh)}catch(n){}}}).catch(e=>{throw Fh.create("idb-open",{originalErrorMessage:e.message})})),Kh}async function Gh(e,t){try{const n=(await Wh()).transaction(Hh,"readwrite"),r=n.objectStore(Hh);await r.put(t,Qh(e)),await n.done}catch(n){if(n instanceof gd)rh.warn(n.message);else{const e=Fh.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});rh.warn(e.message)}}}function Qh(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Jh(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Xh();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){rh.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Xh(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Zh(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Zh(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=od(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return rh.warn(t),""}}}function Xh(){return(new Date).toISOString().substring(0,10)}class Jh{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Wh()).transaction(Hh),n=await t.objectStore(Hh).get(Qh(e));return await t.done,n}catch(t){if(t instanceof gd)rh.warn(t.message);else{const e=Fh.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});rh.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Gh(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Gh(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Zh(e){return od(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ef;ef="",Lh(new Id("platform-logger",e=>new eh(e),"PRIVATE")),Lh(new Id("heartbeat",e=>new Yh(e),"PRIVATE")),qh(th,nh,ef),qh(th,nh,"esm2017"),qh("fire-js","");var tf,nf,rf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,nf=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},tf=r}).apply(void 0!==rf?rf:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var sf,of,af,lf,cf,uf,df,hf,ff="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ff&&ff];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout(()=>{throw e},0)}function _(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,C=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);I=()=>{e.then(R)}};var R=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(n){S(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function D(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,P);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),z=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++z,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=$(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function K(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=Z(n),e&&e[M]?e.K(t,n,!!o(r)&&!!r.capture,i):function(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=X(e);if(l||(e[q]=l=new B(e)),n=l.add(t,n,r,a,s),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Y;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)j||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=Z(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=X(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&G(n))}function G(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=X(t))?(V(n,e),0==n.h&&(n.src=null,t[q]=null)):U(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function Y(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&G(e),e=n.call(r,t)}return e}function X(e){return(e=e[q])instanceof B?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){D.call(this),this.i=new B(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;x(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ne(o,r,!0,t)&&i}if(i=ne(o=t.g=e,r,!0,t)&&i,i=ne(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ne(o=t.g=n[s],r,!1,t)&&i}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&V(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ie(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,ie(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ee,D),ee.prototype[M]=!0,ee.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){D.call(this),this.h=e,this.g={}}d(oe,D);var ae=[];function le(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&G(e)},e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),le(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=i.JSON.stringify,ue=i.JSON.parse,de=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function he(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}he.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){P.call(this,"d")}function ye(){P.call(this,"c")}d(ge,P),d(ye,P);var ve={},be=null;function we(){return be=be||new ee}function xe(e){P.call(this,ve.La,e)}function ke(e){const t=we();te(t,new xe(t))}function Se(e,t){P.call(this,ve.STAT_EVENT,e),this.stat=t}function _e(e){const t=we();te(t,new Se(t,e))}function Ee(e,t){P.call(this,ve.Ma,e),this.size=t}function Te(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function Ce(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ce(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}ve.La="serverreachability",d(xe,P),ve.STAT_EVENT="statevent",d(Se,P),ve.Ma="timingevent",d(Ee,P),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Ae,Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}d(De,he),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Ae=new De;var Oe={},Le={};function Me(e,t,n){e.L=1,e.v=ut(it(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),Be(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new je,e.g=dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ae[0]=i.toString()),i=ae);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Fe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ue(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Le:(n=Number(t.substring(n,r)),isNaN(n)?Oe:(r+=1)+n>t.length?Le:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,Ve(e,e.I)}function Ve(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function $e(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||on(e.j,e)}function He(e){$e(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Xe(n.h,e)))if(!e.K&&Xe(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Gt(n)}tn(n),_e(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Ye(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else ln(n,11)}else if((e.K||n.g==e)&&sn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Je(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=un(r,r.J?r.ia:null,r.W),o.K){Ze(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&($e(a),Be(a)),r.g=o}else en(r);0<n.i.length&&Yt(n)}else"stop"!=c[0]&&"close"!=c[0]||ln(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ln(n,7):Wt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(u){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==$t(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const h=$t(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=h||7==t||ke(),$e(this);var n=this.g.Z();this.X=n;t:if(Fe(this)){var r=qt(this.g);e="";var s=r.length,o=4==$t(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),qe(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),He(this),qe(this);break e}Ce(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Ue(this,a),e==Le){4==h&&(this.s=4,_e(14),n=!1),Ce(this.i,this.l,null,"[Incomplete Response]");break}if(e==Oe){this.s=4,_e(15),Ce(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ce(this.i,this.l,e,null),Ke(this,e)}if(Fe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),nn(d),d.M=!0,_e(11))}}else Ce(this.i,this.l,a,"[Invalid Chunked Response]"),He(this),qe(this)}else Ce(this.i,this.l,a,null),Ke(this,a);4==h&&He(this),this.o&&!this.J&&(4==h?on(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=$t(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),He(this),qe(this)}}}catch(h){}},Pe.prototype.cancel=function(){this.J=!0,He(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),_e(17)),He(this),this.s=2,qe(this)):Ve(this,this.S-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ye(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ge.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,ot(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),at(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,st(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),ot(this,t[4]),this.l=dt(t[5]||"",!0),at(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function it(e){return new rt(e)}function st(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ot(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function at(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(xt(this,t),St(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,yt)),e.i=new bt(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function ut(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,pt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,pt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?gt:mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,vt)),e.join("")};var pt=/[#\/\?@]/g,mt=/[#\?:]/g,gt=/[#\?]/g,yt=/[#\?@]/g,vt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function xt(e,t){wt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return wt(e),t=_t(e,t),e.g.has(t)}function St(e,t,n){xt(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Tt(){this.g=new de}function It(e,t,n){const r=n||"";try{tt(e,function(e,n){let i=e;o(e)&&(i=ce(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ct(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Nt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Pt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Ot(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){wt(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"==typeof e)kt(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,kt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(Ct,he),Ct.prototype.g=function(){return new At(this.l,this.j)},Ct.prototype.i=function(e){return function(){return e}}({}),d(At,ee),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Dt(this),3==this.readyState&&Nt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Ot,ee);var Lt=/^https?$/i,Mt=["POST","PUT"];function zt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ft(e),Bt(e)}function Ft(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ut(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=$t(e)||2!=e.Z()))if(e.u&&4==$t(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==$t(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(nt)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Lt.test(o?o.toLowerCase():"")}n=s}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var a=2<$t(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Ft(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){Vt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Vt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function $t(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Wt(e){if(Qt(e),3==e.G){var t=e.U++,n=it(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),Jt(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=ut(it(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}cn(e)}function Gt(e){e.g&&(nn(e),e.g.cancel(),e.g=null)}function Qt(e){Gt(e),e.u&&(i.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Yt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;I||N(),C||(I(),C=!0),A.add(t,e),e.B=0}}function Xt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),Jt(e,r),e.m&&e.o&&jt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Zt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Me(n,r,t)}function Jt(e,t){e.H&&v(e.H,function(e,n){ct(t,n,e)}),e.l&&tt({},function(e,n){ct(t,n,e)})}function Zt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{It(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function en(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;I||N(),C||(I(),C=!0),A.add(t,e),e.v=0}}function tn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),an(e,e.v)),e.v++,!0)}function nn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function rn(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&jt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ut(it(t)),n.m=null,n.P=!0,ze(n,e)}function sn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){sn(e),nn(e),e.g=null;var r=2}else{if(!Xe(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;te(r=we(),new Ee(r,n)),Yt(e)}else en(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ye(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Te(c(e.Ga,e,t),an(e,e.B)),e.B++,0)))}(e,t)||2==r&&tn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:ln(e,5);break;case 4:ln(e,10);break;case 3:ln(e,6);break;default:ln(e,2)}}function an(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function ln(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),ut(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Et,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),cn(e),Qt(e)}function cn(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function un(e,t,n){var r=n instanceof rt?it(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ot(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new rt(null);r&&st(o,r),t&&(o.g=t),s&&ot(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),Jt(e,r),r}function dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ot(new Ct({eb:n})):new Ot(e.pa)).Ha(e.J),t}function hn(){}function fn(){}function pn(e,t){ee.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function mn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gn(){ye.call(this),this.status=1}function yn(e){this.g=e}(e=Ot.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?fe(this.o):fe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void zt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Mt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){zt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Ot.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},e.bb=function(){Ut(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch(lt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(lt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=un(this,null,this.W),Yt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Pe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Zt(this,i,t),ct(n=it(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),Jt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Pt(s)))+"&"+t:this.m&&jt(n,this.m,s)),Je(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,Me(i,n,null)):Me(i,n,t),this.G=2}}else 3==this.G&&(e?Xt(this,e):0==this.i.length||Qe(this.h)||Xt(this))},e.Fa=function(){if(this.u=null,rn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Gt(this),rn(this))},e.Za=function(){null!=this.C&&(this.C=null,Gt(this),tn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new pn(e,t)},d(pn,ee),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Wt(this.g)},pn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.G&&Yt(t)},pn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,pn.aa.N.call(this)},d(mn,ge),d(gn,ye),d(yn,hn),yn.prototype.ua=function(){te(this.g,"a")},yn.prototype.ta=function(e){te(this.g,new mn(e))},yn.prototype.sa=function(e){te(this.g,new gn)},yn.prototype.ra=function(){te(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,hf=function(){return new fn},df=function(){return we()},uf=ve,cf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,lf=Ne,Re.COMPLETE="complete",af=Re,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,of=pe,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,sf=Ot}).apply(void 0!==ff?ff:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const pf="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mf.UNAUTHENTICATED=new mf(null),mf.GOOGLE_CREDENTIALS=new mf("google-credentials-uid"),mf.FIRST_PARTY=new mf("first-party-uid"),mf.MOCK_USER=new mf("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let gf="10.14.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new Md("@firebase/firestore");function vf(){return yf.logLevel}function bf(e,...t){if(yf.logLevel<=Rd.DEBUG){const n=t.map(kf);yf.debug(`Firestore (${gf}): ${e}`,...n)}}function wf(e,...t){if(yf.logLevel<=Rd.ERROR){const n=t.map(kf);yf.error(`Firestore (${gf}): ${e}`,...n)}}function xf(e,...t){if(yf.logLevel<=Rd.WARN){const n=t.map(kf);yf.warn(`Firestore (${gf}): ${e}`,...n)}}function kf(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(e="Unexpected state"){const t=`FIRESTORE (${gf}) INTERNAL ASSERTION FAILED: `+e;throw wf(t),new Error(t)}function _f(e,t){e||Sf()}function Ef(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class If extends gd{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mf.UNAUTHENTICATED))}shutdown(){}}class Rf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Df{constructor(e){this.t=e,this.currentUser=mf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_f(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Cf;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cf,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{bf("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(bf("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cf)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(bf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(_f("string"==typeof t.accessToken),new Af(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _f(null===e||"string"==typeof e),new mf(e)}}class Pf{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=mf.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jf{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Pf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(mf.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Of{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lf{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){_f(void 0===this.o);const n=e=>{null!=e.error&&bf("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,bf("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{bf("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):bf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(_f("string"==typeof e.token),this.R=e.token,new Of(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Mf(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Ff(e,t){return e<t?-1:e>t?1:0}function Uf(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new If(Tf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new If(Tf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new If(Tf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new If(Tf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bf.fromMillis(Date.now())}static fromDate(e){return Bf.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Bf(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ff(this.nanoseconds,e.nanoseconds):Ff(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vf(e)}static min(){return new Vf(new Bf(0,0))}static max(){return new Vf(new Bf(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t,n){void 0===t?t=0:t>e.length&&Sf(),void 0===n?n=e.length-t:n>e.length-t&&Sf(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===$f.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $f?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qf extends $f{construct(e,t,n){return new qf(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new If(Tf.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new qf(t)}static emptyPath(){return new qf([])}}const Hf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kf extends $f{construct(e,t,n){return new Kf(e,t,n)}static isValidIdentifier(e){return Hf.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kf.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kf(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new If(Tf.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new If(Tf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new If(Tf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new If(Tf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kf(t)}static emptyPath(){return new Kf([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.path=e}static fromPath(e){return new Wf(qf.fromString(e))}static fromName(e){return new Wf(qf.fromString(e).popFirst(5))}static empty(){return new Wf(qf.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qf.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qf.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Wf(new qf(e.slice()))}}function Gf(e){return new Qf(e.readTime,e.key,-1)}class Qf{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Qf(Vf.min(),Wf.empty(),-1)}static max(){return new Qf(Vf.max(),Wf.empty(),-1)}}function Yf(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Wf.comparator(e.documentKey,t.documentKey),0!==n?n:Ff(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Xf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jf(e){if(e.code!==Tf.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;bf("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Sf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Zf((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Zf?t:Zf.resolve(t)}catch(t){return Zf.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Zf.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Zf.reject(t)}static resolve(e){return new Zf((t,n)=>{t(e)})}static reject(e){return new Zf((t,n)=>{n(e)})}static waitFor(e){return new Zf((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Zf.resolve(!1);for(const n of e)t=t.next(e=>e?Zf.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Zf((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Zf((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function ep(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function np(e){return null==e}function rp(e){return 0===e&&1/e==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ip(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sp(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function op(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tp.oe=-1;class ap{constructor(e,t){this.comparator=e,this.root=t||cp.EMPTY}insert(e,t){return new ap(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cp.BLACK,null,null))}remove(e){return new ap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cp.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lp(this.root,e,this.comparator,!1)}getReverseIterator(){return new lp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lp(this.root,e,this.comparator,!0)}}class lp{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cp{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:cp.RED,this.left=null!=r?r:cp.EMPTY,this.right=null!=i?i:cp.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new cp(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return cp.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return cp.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cp.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cp.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Sf();if(this.right.isRed())throw Sf();const e=this.left.check();if(e!==this.right.check())throw Sf();return e+(this.isRed()?0:1)}}cp.EMPTY=null,cp.RED=!0,cp.BLACK=!1,cp.EMPTY=new class{constructor(){this.size=0}get key(){throw Sf()}get value(){throw Sf()}get color(){throw Sf()}get left(){throw Sf()}get right(){throw Sf()}copy(e,t,n,r,i){return this}insert(e,t,n){return new cp(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class up{constructor(e){this.comparator=e,this.data=new ap(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dp(this.data.getIterator())}getIteratorFrom(e){return new dp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof up))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new up(this.comparator);return t.data=e,t}}class dp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this.fields=e,e.sort(Kf.comparator)}static empty(){return new hp([])}unionWith(e){let t=new up(Kf.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new hp(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uf(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new fp("Invalid base64 string: "+t):t}}(e);return new pp(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new pp(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ff(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pp.EMPTY_BYTE_STRING=new pp("");const mp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gp(e){if(_f(!!e),"string"==typeof e){let t=0;const n=mp.exec(e);if(_f(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:yp(e.seconds),nanos:yp(e.nanos)}}function yp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function vp(e){return"string"==typeof e?pp.fromBase64String(e):pp.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wp(e){const t=e.mapValue.fields.__previous_value__;return bp(t)?wp(t):t}function xp(e){const t=gp(e.mapValue.fields.__local_write_time__.timestampValue);return new Bf(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Sp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sp&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p={};function Ep(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bp(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}(e)?10:11:Sf()}function Tp(e,t){if(e===t)return!0;const n=Ep(e);if(n!==Ep(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xp(e).isEqual(xp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=gp(e.timestampValue),r=gp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,vp(e.bytesValue).isEqual(vp(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return yp(e.geoPointValue.latitude)===yp(t.geoPointValue.latitude)&&yp(e.geoPointValue.longitude)===yp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return yp(e.integerValue)===yp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=yp(e.doubleValue),r=yp(t.doubleValue);return n===r?rp(n)===rp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Uf(e.arrayValue.values||[],t.arrayValue.values||[],Tp);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ip(n)!==ip(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Tp(n[i],r[i])))return!1;return!0}(e,t);default:return Sf()}var r}function Ip(e,t){return void 0!==(e.values||[]).find(e=>Tp(e,t))}function Cp(e,t){if(e===t)return 0;const n=Ep(e),r=Ep(t);if(n!==r)return Ff(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ff(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=yp(e.integerValue||e.doubleValue),r=yp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ap(e.timestampValue,t.timestampValue);case 4:return Ap(xp(e),xp(t));case 5:return Ff(e.stringValue,t.stringValue);case 6:return function(e,t){const n=vp(e),r=vp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ff(n[i],r[i]);if(0!==e)return e}return Ff(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ff(yp(e.latitude),yp(t.latitude));return 0!==n?n:Ff(yp(e.longitude),yp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Np(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(r=a.value)||void 0===r?void 0:r.arrayValue,u=Ff((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Np(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===_p&&t===_p)return 0;if(e===_p)return 1;if(t===_p)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ff(r[o],s[o]);if(0!==e)return e;const t=Cp(n[r[o]],i[s[o]]);if(0!==t)return t}return Ff(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Sf()}}function Ap(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ff(e,t);const n=gp(e),r=gp(t),i=Ff(n.seconds,r.seconds);return 0!==i?i:Ff(n.nanos,r.nanos)}function Np(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Cp(n[i],r[i]);if(e)return e}return Ff(n.length,r.length)}function Rp(e){return Dp(e)}function Dp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=gp(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?vp(e.bytesValue).toBase64():"referenceValue"in e?function(e){return Wf.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Dp(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Dp(e.fields[i])}`;return n+"}"}(e.mapValue):Sf()}function Pp(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function jp(e){return!!e&&"integerValue"in e}function Op(e){return!!e&&"arrayValue"in e}function Lp(e){return!!e&&"nullValue"in e}function Mp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zp(e){return!!e&&"mapValue"in e}function Fp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sp(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Fp(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Fp(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Up{constructor(e){this.value=e}static empty(){return new Up({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!zp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fp(t)}setAll(e){let t=Kf.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Fp(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());zp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tp(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];zp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){sp(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Up(Fp(this.value))}}function Bp(e){const t=[];return sp(e.fields,(e,n)=>{const r=new Kf([e]);if(zp(n)){const e=Bp(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new hp(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Vp{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Vp(e,0,Vf.min(),Vf.min(),Vf.min(),Up.empty(),0)}static newFoundDocument(e,t,n,r){return new Vp(e,1,t,Vf.min(),n,r,0)}static newNoDocument(e,t){return new Vp(e,2,t,Vf.min(),Vf.min(),Up.empty(),0)}static newUnknownDocument(e,t){return new Vp(e,3,t,Vf.min(),Vf.min(),Up.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Vf.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Up.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Up.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vf.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t){this.position=e,this.inclusive=t}}function qp(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Wf.comparator(Wf.fromName(o.referenceValue),n.key):Cp(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Hp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Tp(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t="asc"){this.field=e,this.dir=t}}function Wp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{}class Qp extends Gp{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new nm(e,t,n):"array-contains"===t?new om(e,n):"in"===t?new am(e,n):"not-in"===t?new lm(e,n):"array-contains-any"===t?new cm(e,n):new Qp(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new rm(e,n):new im(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Cp(t,this.value)):null!==t&&Ep(this.value)===Ep(t)&&this.matchesComparison(Cp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Sf()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yp extends Gp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Yp(e,t)}matches(e){return Xp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xp(e){return"and"===e.op}function Jp(e){return function(e){for(const t of e.filters)if(t instanceof Yp)return!1;return!0}(e)&&Xp(e)}function Zp(e){if(e instanceof Qp)return e.field.canonicalString()+e.op.toString()+Rp(e.value);if(Jp(e))return e.filters.map(e=>Zp(e)).join(",");{const t=e.filters.map(e=>Zp(e)).join(",");return`${e.op}(${t})`}}function em(e,t){return e instanceof Qp?(n=e,(r=t)instanceof Qp&&n.op===r.op&&n.field.isEqual(r.field)&&Tp(n.value,r.value)):e instanceof Yp?function(e,t){return t instanceof Yp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&em(n,t.filters[r]),!0)}(e,t):void Sf();var n,r}function tm(e){return e instanceof Qp?`${(t=e).field.canonicalString()} ${t.op} ${Rp(t.value)}`:e instanceof Yp?function(e){return e.op.toString()+" {"+e.getFilters().map(tm).join(" ,")+"}"}(e):"Filter";var t}class nm extends Qp{constructor(e,t,n){super(e,t,n),this.key=Wf.fromName(n.referenceValue)}matches(e){const t=Wf.comparator(e.key,this.key);return this.matchesComparison(t)}}class rm extends Qp{constructor(e,t){super(e,"in",t),this.keys=sm("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class im extends Qp{constructor(e,t){super(e,"not-in",t),this.keys=sm("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Wf.fromName(e.referenceValue))}class om extends Qp{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Op(t)&&Ip(t.arrayValue,this.value)}}class am extends Qp{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ip(this.value.arrayValue,t)}}class lm extends Qp{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ip(this.value.arrayValue,t)}}class cm extends Qp{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Op(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ip(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function dm(e,t=null,n=[],r=[],i=null,s=null,o=null){return new um(e,t,n,r,i,s,o)}function hm(e){const t=Ef(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Zp(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),np(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Rp(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Rp(e)).join(",")),t.ue=e}return t.ue}function fm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Wp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!em(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Hp(e.startAt,t.startAt)&&Hp(e.endAt,t.endAt)}function pm(e){return Wf.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gm(e){return new mm(e)}function ym(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function vm(e){return null!==e.collectionGroup}function bm(e){const t=Ef(e);if(null===t.ce){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new up(Kf.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Kp(r,n))}),e.has(Kf.keyField().canonicalString())||t.ce.push(new Kp(Kf.keyField(),n))}return t.ce}function wm(e){const t=Ef(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return dm(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Kp(e.field,t)});const n=e.endAt?new $p(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new $p(e.startAt.position,e.startAt.inclusive):null;return dm(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,bm(e))),t.le}function xm(e,t){const n=e.filters.concat([t]);return new mm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function km(e,t,n){return new mm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Sm(e,t){return fm(wm(e),wm(t))&&e.limitType===t.limitType}function _m(e){return`${hm(wm(e))}|lt:${e.limitType}`}function Em(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>tm(e)).join(", ")}]`),np(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Rp(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Rp(e)).join(",")),`Target(${t})`}(wm(e))}; limitType=${e.limitType})`}function Tm(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Wf.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of bm(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=qp(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,bm(n),r)||n.endAt&&!function(e,t,n){const r=qp(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,bm(n),r)));var n,r}function Im(e){return(t,n)=>{let r=!1;for(const i of bm(e)){const e=Cm(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Cm(e,t,n){const r=e.field.isKeyField()?Wf.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Cp(r,i):Sf()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Sf()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sp(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return op(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=new ap(Wf.comparator);function Rm(){return Nm}const Dm=new ap(Wf.comparator);function Pm(...e){let t=Dm;for(const n of e)t=t.insert(n.key,n);return t}function jm(e){let t=Dm;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Om(){return Mm()}function Lm(){return Mm()}function Mm(){return new Am(e=>e.toString(),(e,t)=>e.isEqual(t))}const zm=new ap(Wf.comparator),Fm=new up(Wf.comparator);function Um(...e){let t=Fm;for(const n of e)t=t.add(n);return t}const Bm=new up(Ff);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Vm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rp(t)?"-0":t}}function $m(e){return{integerValue:""+e}}function qm(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!rp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?$m(t):Vm(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this._=void 0}}function Km(e,t,n){return e instanceof Qm?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&bp(t)&&(t=wp(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ym?Xm(e,t):e instanceof Jm?Zm(e,t):function(e,t){const n=Gm(e,t),r=tg(n)+tg(e.Pe);return jp(n)&&jp(e.Pe)?$m(r):Vm(e.serializer,r)}(e,t)}function Wm(e,t,n){return e instanceof Ym?Xm(e,t):e instanceof Jm?Zm(e,t):n}function Gm(e,t){return e instanceof eg?jp(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class Qm extends Hm{}class Ym extends Hm{constructor(e){super(),this.elements=e}}function Xm(e,t){const n=ng(t);for(const r of e.elements)n.some(e=>Tp(e,r))||n.push(r);return{arrayValue:{values:n}}}class Jm extends Hm{constructor(e){super(),this.elements=e}}function Zm(e,t){let n=ng(t);for(const r of e.elements)n=n.filter(e=>!Tp(e,r));return{arrayValue:{values:n}}}class eg extends Hm{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function tg(e){return yp(e.integerValue||e.doubleValue)}function ng(e){return Op(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t){this.field=e,this.transform=t}}class ig{constructor(e,t){this.version=e,this.transformResults=t}}class sg{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sg}static exists(e){return new sg(void 0,e)}static updateTime(e){return new sg(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function og(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ag{}function lg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new vg(e.key,sg.none()):new fg(e.key,e.data,sg.none());{const n=e.data,r=Up.empty();let i=new up(Kf.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new pg(e.key,r,new hp(i.toArray()),sg.none())}}function cg(e,t,n){var r;e instanceof fg?function(e,t,n){const r=e.value.clone(),i=gg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof pg?function(e,t,n){if(!og(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=gg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(mg(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function ug(e,t,n,r){return e instanceof fg?function(e,t,n,r){if(!og(e.precondition,t))return n;const i=e.value.clone(),s=yg(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof pg?function(e,t,n,r){if(!og(e.precondition,t))return n;const i=yg(e.fieldTransforms,r,t),s=t.data;return s.setAll(mg(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(i=t,s=n,og(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):s);var i,s}function dg(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Gm(r.transform,e||null);null!=i&&(null===n&&(n=Up.empty()),n.set(r.field,i))}return n||null}function hg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Uf(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Ym&&r instanceof Ym||n instanceof Jm&&r instanceof Jm?Uf(n.elements,r.elements,Tp):n instanceof eg&&r instanceof eg?Tp(n.Pe,r.Pe):n instanceof Qm&&r instanceof Qm);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class fg extends ag{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pg extends ag{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mg(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function gg(e,t,n){const r=new Map;_f(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Wm(o,a,n[i]))}return r}function yg(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Km(e,s,t))}return r}class vg extends ag{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bg extends ag{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&cg(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ug(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ug(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Lm();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=lg(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Vf.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Um())}isEqual(e){return this.batchId===e.batchId&&Uf(this.mutations,e.mutations,(e,t)=>hg(e,t))&&Uf(this.baseMutations,e.baseMutations,(e,t)=>hg(e,t))}}class xg{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){_f(e.mutations.length===n.length);let r=function(){return zm}();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new xg(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _g,Eg;function Tg(e){if(void 0===e)return wf("GRPC error has no .code"),Tf.UNKNOWN;switch(e){case _g.OK:return Tf.OK;case _g.CANCELLED:return Tf.CANCELLED;case _g.UNKNOWN:return Tf.UNKNOWN;case _g.DEADLINE_EXCEEDED:return Tf.DEADLINE_EXCEEDED;case _g.RESOURCE_EXHAUSTED:return Tf.RESOURCE_EXHAUSTED;case _g.INTERNAL:return Tf.INTERNAL;case _g.UNAVAILABLE:return Tf.UNAVAILABLE;case _g.UNAUTHENTICATED:return Tf.UNAUTHENTICATED;case _g.INVALID_ARGUMENT:return Tf.INVALID_ARGUMENT;case _g.NOT_FOUND:return Tf.NOT_FOUND;case _g.ALREADY_EXISTS:return Tf.ALREADY_EXISTS;case _g.PERMISSION_DENIED:return Tf.PERMISSION_DENIED;case _g.FAILED_PRECONDITION:return Tf.FAILED_PRECONDITION;case _g.ABORTED:return Tf.ABORTED;case _g.OUT_OF_RANGE:return Tf.OUT_OF_RANGE;case _g.UNIMPLEMENTED:return Tf.UNIMPLEMENTED;case _g.DATA_LOSS:return Tf.DATA_LOSS;default:return Sf()}}(Eg=_g||(_g={}))[Eg.OK=0]="OK",Eg[Eg.CANCELLED=1]="CANCELLED",Eg[Eg.UNKNOWN=2]="UNKNOWN",Eg[Eg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Eg[Eg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Eg[Eg.NOT_FOUND=5]="NOT_FOUND",Eg[Eg.ALREADY_EXISTS=6]="ALREADY_EXISTS",Eg[Eg.PERMISSION_DENIED=7]="PERMISSION_DENIED",Eg[Eg.UNAUTHENTICATED=16]="UNAUTHENTICATED",Eg[Eg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Eg[Eg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Eg[Eg.ABORTED=10]="ABORTED",Eg[Eg.OUT_OF_RANGE=11]="OUT_OF_RANGE",Eg[Eg.UNIMPLEMENTED=12]="UNIMPLEMENTED",Eg[Eg.INTERNAL=13]="INTERNAL",Eg[Eg.UNAVAILABLE=14]="UNAVAILABLE",Eg[Eg.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ig=new tf([4294967295,4294967295],0);function Cg(e){const t=(new TextEncoder).encode(e),n=new nf;return n.update(t),new Uint8Array(n.digest())}function Ag(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new tf([n,r],0),new tf([i,s],0)]}class Ng{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Rg(`Invalid padding: ${t}`);if(n<0)throw new Rg(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Rg(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Rg(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=tf.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(tf.fromNumber(n)));return 1===r.compare(Ig)&&(r=new tf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Cg(e),[n,r]=Ag(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Ng(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=Cg(e),[n,r]=Ag(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Rg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Pg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Dg(Vf.min(),r,new ap(Ff),Rm(),Um())}}class Pg{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Pg(n,t,Um(),Um(),Um())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Og{constructor(e,t){this.targetId=e,this.me=t}}class Lg{constructor(e,t,n=pp.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Mg{constructor(){this.fe=0,this.ge=Ug(),this.pe=pp.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Um(),t=Um(),n=Um();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Sf()}}),new Pg(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Ug()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_f(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zg{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rm(),this.qe=Fg(),this.Qe=new ap(Ff)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Sf()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(pm(i))if(0===n){const e=new Wf(i.path);this.Ue(t,e,Vp.newNoDocument(e,Vf.min()))}else _f(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=vp(n).toUint8Array()}catch(a){if(a instanceof fp)return xf("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Ng(s,r,i)}catch(a){return xf(a instanceof Rg?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&pm(i.target)){const t=new Wf(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Vp.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Um();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Dg(e,t,this.Qe,this.ke,n);return this.ke=Rm(),this.qe=Fg(),this.Qe=new ap(Ff),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Mg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new up(Ff),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||bf("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Fg(){return new ap(Wf.comparator)}function Ug(){return new ap(Wf.comparator)}const Bg=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Vg=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),$g=(()=>({and:"AND",or:"OR"}))();class qg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hg(e,t){return e.useProto3Json||np(t)?t:{value:t}}function Kg(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Wg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Gg(e,t){return Kg(e,t.toTimestamp())}function Qg(e){return _f(!!e),Vf.fromTimestamp(function(e){const t=gp(e);return new Bf(t.seconds,t.nanos)}(e))}function Yg(e,t){return Xg(e,t).canonicalString()}function Xg(e,t){const n=(r=e,new qf(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function Jg(e){const t=qf.fromString(e);return _f(gy(t)),t}function Zg(e,t){return Yg(e.databaseId,t.path)}function ey(e,t){const n=Jg(t);if(n.get(1)!==e.databaseId.projectId)throw new If(Tf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new If(Tf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wf(ry(n))}function ty(e,t){return Yg(e.databaseId,t)}function ny(e){return new qf(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ry(e){return _f(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function iy(e,t,n){return{name:Zg(e,t),fields:n.value.mapValue.fields}}function sy(e,t){return{documents:[ty(e,t.path)]}}function oy(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ty(e,i);const s=function(e){if(0!==e.length)return py(Yp.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>{return{field:hy((t=e).field),direction:cy(t.dir)};var t})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Hg(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i};var l}function ay(e){let t=function(e){const t=Jg(e);return 4===t.length?qf.emptyPath():ry(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_f(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ly(e);return t instanceof Yp&&Jp(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>{return new Kp(fy((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,np(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new $p(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new $p(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new mm(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",l,c)}function ly(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=fy(e.unaryFilter.field);return Qp.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=fy(e.unaryFilter.field);return Qp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=fy(e.unaryFilter.field);return Qp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=fy(e.unaryFilter.field);return Qp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Sf()}}(e):void 0!==e.fieldFilter?(t=e,Qp.create(fy(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Sf()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Yp.create(e.compositeFilter.filters.map(e=>ly(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Sf()}}(e.compositeFilter.op))}(e):Sf();var t}function cy(e){return Bg[e]}function uy(e){return Vg[e]}function dy(e){return $g[e]}function hy(e){return{fieldPath:e.canonicalString()}}function fy(e){return Kf.fromServerFormat(e.fieldPath)}function py(e){return e instanceof Qp?function(e){if("=="===e.op){if(Mp(e.value))return{unaryFilter:{field:hy(e.field),op:"IS_NAN"}};if(Lp(e.value))return{unaryFilter:{field:hy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Mp(e.value))return{unaryFilter:{field:hy(e.field),op:"IS_NOT_NAN"}};if(Lp(e.value))return{unaryFilter:{field:hy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hy(e.field),op:uy(e.op),value:e.value}}}(e):e instanceof Yp?function(e){const t=e.getFilters().map(e=>py(e));return 1===t.length?t[0]:{compositeFilter:{op:dy(e.op),filters:t}}}(e):Sf()}function my(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function gy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,t,n,r,i=Vf.min(),s=Vf.min(),o=pp.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new yy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yy(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){this.ct=e}}function by(e){const t=ay({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?km(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.un=new xy}addToCollectionParentIndex(e,t){return this.un.add(t),Zf.resolve()}getCollectionParents(e,t){return Zf.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Zf.resolve()}deleteFieldIndex(e,t){return Zf.resolve()}deleteAllFieldIndexes(e){return Zf.resolve()}createTargetIndexes(e,t){return Zf.resolve()}getDocumentsMatchingTarget(e,t){return Zf.resolve(null)}getIndexType(e,t){return Zf.resolve(0)}getFieldIndexes(e,t){return Zf.resolve([])}getNextCollectionGroupToUpdate(e){return Zf.resolve(null)}getMinOffset(e,t){return Zf.resolve(Qf.min())}getMinOffsetFromCollectionGroup(e,t){return Zf.resolve(Qf.min())}updateCollectionGroup(e,t,n){return Zf.resolve()}updateIndexEntries(e,t){return Zf.resolve()}}class xy{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new up(qf.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new up(qf.comparator)).toArray()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ky(0)}static kn(){return new ky(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.changes=new Am(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Zf.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&ug(n.mutation,e,hp.empty(),Bf.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Um()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Um()){const r=Om();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Pm();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Om();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Um()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Rm();const s=Mm(),o=Mm();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof pg)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),ug(o.mutation,t,o.mutation.getFieldMask(),Bf.now())):s.set(t.key,hp.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new _y(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Mm();let r=new ap((e,t)=>e-t),i=Um();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||hp.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Um()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Lm();l.forEach(e=>{if(!i.has(e)){const r=lg(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Zf.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return i=t,Wf.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):vm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Zf.resolve(Om());let o=-1,a=i;return s.next(t=>Zf.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Zf.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Um())).next(e=>({batchId:o,changes:jm(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Wf(t)).next(e=>{let t=Pm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Pm();return this.indexManager.getCollectionParents(e,i).next(o=>Zf.forEach(o,o=>{const a=(l=t,c=o.child(i),new mm(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Vp.newInvalidDocument(r)))});let n=Pm();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&ug(s.mutation,r,hp.empty(),Bf.now()),Tm(t,r)&&(n=n.insert(e,r))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Zf.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(n=t).id,version:n.version,createTime:Qg(n.createTime)}),Zf.resolve();var n}getNamedQuery(e,t){return Zf.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(n=t).name,query:by(n.bundledQuery),readTime:Qg(n.readTime)}),Zf.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.overlays=new ap(Wf.comparator),this.Ir=new Map}getOverlay(e,t){return Zf.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Om();return Zf.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),Zf.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),Zf.resolve()}getOverlaysForCollection(e,t,n){const r=Om(),i=t.length+1,s=new Wf(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Zf.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ap((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Om(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Om(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Zf.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new kg(t,n));let i=this.Ir.get(t);void 0===i&&(i=Um(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.sessionToken=pp.EMPTY_BYTE_STRING}getSessionToken(e){return Zf.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Zf.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.Tr=new up(Ny.Er),this.dr=new up(Ny.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Ny(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Ny(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Wf(new qf([])),n=new Ny(t,e),r=new Ny(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Wf(new qf([])),n=new Ny(t,e),r=new Ny(t,e+1);let i=Um();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Ny(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ny{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Wf.comparator(e.key,t.key)||Ff(e.wr,t.wr)}static Ar(e,t){return Ff(e.wr,t.wr)||Wf.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new up(Ny.Er)}checkEmpty(e){return Zf.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new wg(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.br=this.br.add(new Ny(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Zf.resolve(s)}lookupMutationBatch(e,t){return Zf.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Zf.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Zf.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Zf.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ny(t,0),r=new Ny(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),Zf.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new up(Ff);return t.forEach(e=>{const t=new Ny(e,0),r=new Ny(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),Zf.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Wf.isDocumentKey(i)||(i=i.child(""));const s=new Ny(new Wf(i),0);let o=new up(Ff);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)},s),Zf.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){_f(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Zf.forEach(t.mutations,r=>{const i=new Ny(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Ny(t,0),r=this.br.firstAfterOrEqual(n);return Zf.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Zf.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this.Mr=e,this.docs=new ap(Wf.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Zf.resolve(n?n.document.mutableCopy():Vp.newInvalidDocument(t))}getEntries(e,t){let n=Rm();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Vp.newInvalidDocument(e))}),Zf.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Rm();const s=t.path,o=new Wf(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Yf(Gf(o),n)<=0||(r.has(o.key)||Tm(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Zf.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Sf()}Or(e,t){return Zf.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Py(this)}getSize(e){return Zf.resolve(this.size)}}class Py extends Sy{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),Zf.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e){this.persistence=e,this.Nr=new Am(e=>hm(e),fm),this.lastRemoteSnapshotVersion=Vf.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ay,this.targetCount=0,this.kr=ky.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),Zf.resolve()}getLastRemoteSnapshotVersion(e){return Zf.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Zf.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Zf.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Zf.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ky(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Zf.resolve()}updateTargetData(e,t){return this.Kn(t),Zf.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Zf.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Zf.waitFor(i).next(()=>r)}getTargetCount(e){return Zf.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Zf.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Zf.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Zf.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Zf.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Zf.resolve(n)}containsKey(e,t){return Zf.resolve(this.Br.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,t){this.qr={},this.overlays={},this.Qr=new tp(0),this.Kr=!1,this.Kr=!0,this.$r=new Cy,this.referenceDelegate=e(this),this.Ur=new jy(this),this.indexManager=new wy,this.remoteDocumentCache=new Dy(e=>this.referenceDelegate.Wr(e)),this.serializer=new vy(t),this.Gr=new Ty(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Iy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Ry(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){bf("MemoryPersistence","Starting transaction:",e);const r=new Ly(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return Zf.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Ly extends Xf{constructor(e){super(),this.currentSequenceNumber=e}}class My{constructor(e){this.persistence=e,this.Jr=new Ay,this.Yr=null}static Zr(e){return new My(e)}get Xr(){if(this.Yr)return this.Yr;throw Sf()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Zf.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Zf.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Zf.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zf.forEach(this.Xr,n=>{const r=Wf.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Vf.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Zf.or([()=>Zf.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Um(),r=Um();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new zy(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=md()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(pd())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Fy;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(vf()<=Rd.DEBUG&&bf("QueryEngine","SDK will not create cache indexes for query:",Em(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Zf.resolve()):(vf()<=Rd.DEBUG&&bf("QueryEngine","Query:",Em(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(vf()<=Rd.DEBUG&&bf("QueryEngine","The SDK decides to create cache indexes for query:",Em(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wm(t))):Zf.resolve())}Yi(e,t){if(ym(t))return Zf.resolve(null);let n=wm(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=km(t,null,"F"),n=wm(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Um(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,km(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return ym(t)||r.isEqual(Vf.min())?Zf.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Zf.resolve(null):(vf()<=Rd.DEBUG&&bf("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Em(t)),this.rs(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Vf.fromTimestamp(1e9===r?new Bf(n+1,0):new Bf(n,r));return new Qf(i,Wf.empty(),t)}(r,-1)).next(e=>e))})}ts(e,t){let n=new up(Im(e));return t.forEach((t,r)=>{Tm(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return vf()<=Rd.DEBUG&&bf("QueryEngine","Using full collection scan to execute query:",Em(t)),this.Ji.getDocumentsMatchingQuery(e,t,Qf.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new ap(Ff),this._s=new Am(e=>hm(e),fm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ey(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}async function Vy(e,t){const n=Ef(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Um();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function $y(e){const t=Ef(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function qy(e,t){const n=Ef(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);var u,d,h;null!==t.targetMismatches.get(a)?c=c.withResumeToken(pp.EMPTY_BYTE_STRING,Vf.min()).withLastLimboFreeSnapshotVersion(Vf.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),d=c,h=s,(0===(u=l).resumeToken.approximateByteSize()||d.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&o.push(n.Ur.updateTargetData(e,c))});let a=Rm(),l=Um();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(function(e,t,n){let r=Um(),i=Um();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Rm();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Vf.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):bf("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Ps:r,Is:i}})}(e,s,t.documentUpdates).next(e=>{a=e.Ps,l=e.Is})),!r.isEqual(Vf.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Zf.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.os=i,e))}function Hy(e,t){const n=Ef(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function Ky(e,t,n){const r=Ef(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(o){if(!ep(o))throw o;bf("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function Wy(e,t,n){const r=Ef(e);let i=Vf.min(),s=Um();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Ef(e),i=r._s.get(n);return void 0!==i?Zf.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,wm(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Vf.min(),n?s:Um())).next(e=>(function(e,t,n){let r=e.us.get(t)||Vf.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Ts:s})))}class Gy{constructor(){this.activeTargetIds=Bm}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qy{constructor(){this.so=new Gy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Gy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{_o(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){bf("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){bf("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jy=null;function Zy(){return null===Jy?Jy=268435456+Math.round(2147483648*Math.random()):Jy++,"0x"+Jy.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const ev={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="WebChannelConnection";class rv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=Zy(),o=this.xo(e,t.toUriEncodedString());bf("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(e,o,a,n).then(t=>(bf("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw xf("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=ev[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Zy();return new Promise((s,o)=>{const a=new sf;a.setWithCredentials(!0),a.listenOnce(af.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case lf.NO_ERROR:const t=a.getResponseJson();bf(nv,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case lf.TIMEOUT:bf(nv,`RPC '${e}' ${i} timed out`),o(new If(Tf.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const n=a.getStatus();if(bf(nv,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Tf).indexOf(t)>=0?t:Tf.UNKNOWN}(t.status);o(new If(e,t.message))}else o(new If(Tf.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new If(Tf.UNAVAILABLE,"Connection failed."));break;default:Sf()}}finally{bf(nv,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);bf(nv,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Zy(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=hf(),o=df(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");bf(nv,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const f=new tv({Io:t=>{h?bf(nv,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(bf(nv,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),bf(nv,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,of.EventType.OPEN,()=>{h||(bf(nv,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(u,of.EventType.CLOSE,()=>{h||(h=!0,bf(nv,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(u,of.EventType.ERROR,t=>{h||(h=!0,xf(nv,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new If(Tf.UNAVAILABLE,"The operation could not be completed")))}),p(u,of.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];_f(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){bf(nv,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=_g[e];if(void 0!==t)return Tg(t)}(t),i=o.message;void 0===n&&(n=Tf.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.So(new If(n,i)),u.close()}else bf(nv,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}}),p(o,uf.STAT_EVENT,t=>{t.stat===cf.PROXY?bf(nv,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===cf.NOPROXY&&bf(nv,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function iv(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(e){return new qg(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&bf("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t,n,r,i,s,o,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ov(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Tf.RESOURCE_EXHAUSTED?(wf(t.toString()),wf("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Tf.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Yo===t&&this.P_(e,n)},t=>{e(()=>{const e=new If(Tf.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return bf("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(bf("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lv extends av{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Sf(),s=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(_f(void 0===t||"string"==typeof t),pp.fromBase64String(t||"")):(_f(void 0===t||t instanceof Buffer||t instanceof Uint8Array),pp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(e){const t=void 0===e.code?Tf.UNKNOWN:Tg(e.code);return new If(t,e.message||"")}(a);n=new Lg(i,s,o,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ey(e,r.document.name),s=Qg(r.document.updateTime),o=r.document.createTime?Qg(r.document.createTime):Vf.min(),a=new Up({mapValue:{fields:r.document.fields}}),l=Vp.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new jg(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ey(e,r.document),s=r.readTime?Qg(r.readTime):Vf.min(),o=Vp.newNoDocument(i,s),a=r.removedTargetIds||[];n=new jg([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ey(e,r.document),s=r.removedTargetIds||[];n=new jg([],s,i,null)}else{if(!("filter"in t))return Sf();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Sg(r,i),o=e.targetId;n=new Og(o,s)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Vf.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Vf.min():t.readTime?Qg(t.readTime):Vf.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=ny(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=pm(r)?{documents:sy(e,r)}:{query:oy(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Wg(e,t.resumeToken);const r=Hg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Vf.min())>0){n.readTime=Kg(e,t.snapshotVersion.toTimestamp());const r=Hg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Sf()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=ny(this.serializer),t.removeTarget=e,this.a_(t)}}class cv extends av{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return _f(!!e.streamToken),this.lastStreamToken=e.streamToken,_f(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){_f(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(_f(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Qg(e.updateTime):Qg(t);return n.isEqual(Vf.min())&&(n=Qg(t)),new ig(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Qg(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=ny(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof fg)n={update:iy(e,t.key,t.value)};else if(t instanceof vg)n={delete:Zg(e,t.key)};else if(t instanceof pg)n={update:iy(e,t.key,t.data),updateMask:my(t.fieldMask)};else{if(!(t instanceof bg))return Sf();n={verify:Zg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Qm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ym)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Jm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof eg)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Sf()}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:Gg(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Sf())),n;var r,i}(this.serializer,e))};this.a_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new If(Tf.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Mo(e,Xg(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Tf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new If(Tf.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Lo(e,Xg(t,n),r,s,o,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Tf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new If(Tf.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class dv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wf(t),this.D_=!1):bf("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{xv(this)&&(bf("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ef(e);t.L_.add(4),await pv(t),t.q_.set("Unknown"),t.L_.delete(4),await fv(t)}(this))})}),this.q_=new dv(n,r)}}async function fv(e){if(xv(e))for(const t of e.B_)await t(!0)}async function pv(e){for(const t of e.B_)await t(!1)}function mv(e,t){const n=Ef(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),wv(n)?bv(n):Fv(n).r_()&&yv(n,t))}function gv(e,t){const n=Ef(e),r=Fv(n);n.N_.delete(t),r.r_()&&vv(n,t),0===n.N_.size&&(r.r_()?r.o_():xv(n)&&n.q_.set("Unknown"))}function yv(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vf.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Fv(e).A_(t)}function vv(e,t){e.Q_.xe(t),Fv(e).R_(t)}function bv(e){e.Q_=new zg({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Fv(e).start(),e.q_.v_()}function wv(e){return xv(e)&&!Fv(e).n_()&&e.N_.size>0}function xv(e){return 0===Ef(e).L_.size}function kv(e){e.Q_=void 0}async function Sv(e){e.q_.set("Online")}async function _v(e){e.N_.forEach((t,n)=>{yv(e,t)})}async function Ev(e,t){kv(e),wv(e)?(e.q_.M_(t),bv(e)):e.q_.set("Unknown")}async function Tv(e,t,n){if(e.q_.set("Online"),t instanceof Lg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(r){bf("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Iv(e,r)}else if(t instanceof jg?e.Q_.Ke(t):t instanceof Og?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Vf.min()))try{const t=await $y(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(pp.EMPTY_BYTE_STRING,r.snapshotVersion)),vv(e,t);const i=new yy(r.target,t,n,r.sequenceNumber);yv(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){bf("RemoteStore","Failed to raise snapshot:",i),await Iv(e,i)}}async function Iv(e,t,n){if(!ep(t))throw t;e.L_.add(1),await pv(e),e.q_.set("Offline"),n||(n=()=>$y(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{bf("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await fv(e)})}function Cv(e,t){return t().catch(n=>Iv(e,n,t))}async function Av(e){const t=Ef(e),n=Uv(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Nv(t);)try{const e=await Hy(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Rv(t,e)}catch(i){await Iv(t,i)}Dv(t)&&Pv(t)}function Nv(e){return xv(e)&&e.O_.length<10}function Rv(e,t){e.O_.push(t);const n=Uv(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Dv(e){return xv(e)&&!Uv(e).n_()&&e.O_.length>0}function Pv(e){Uv(e).start()}async function jv(e){Uv(e).p_()}async function Ov(e){const t=Uv(e);for(const n of e.O_)t.m_(n.mutations)}async function Lv(e,t,n){const r=e.O_.shift(),i=xg.from(r,t,n);await Cv(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Av(e)}async function Mv(e,t){t&&Uv(e).V_&&await async function(e,t){if(function(e){switch(e){default:return Sf();case Tf.CANCELLED:case Tf.UNKNOWN:case Tf.DEADLINE_EXCEEDED:case Tf.RESOURCE_EXHAUSTED:case Tf.INTERNAL:case Tf.UNAVAILABLE:case Tf.UNAUTHENTICATED:return!1;case Tf.INVALID_ARGUMENT:case Tf.NOT_FOUND:case Tf.ALREADY_EXISTS:case Tf.PERMISSION_DENIED:case Tf.FAILED_PRECONDITION:case Tf.ABORTED:case Tf.OUT_OF_RANGE:case Tf.UNIMPLEMENTED:case Tf.DATA_LOSS:return!0}}(n=t.code)&&n!==Tf.ABORTED){const n=e.O_.shift();Uv(e).s_(),await Cv(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Av(e)}var n}(e,t),Dv(e)&&Pv(e)}async function zv(e,t){const n=Ef(e);n.asyncQueue.verifyOperationInProgress(),bf("RemoteStore","RemoteStore received new credentials");const r=xv(n);n.L_.add(3),await pv(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await fv(n)}function Fv(e){return e.K_||(e.K_=function(e,t,n){const r=Ef(e);return r.w_(),new lv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Sv.bind(null,e),Ro:_v.bind(null,e),mo:Ev.bind(null,e),d_:Tv.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),wv(e)?bv(e):e.q_.set("Unknown")):(await e.K_.stop(),kv(e))})),e.K_}function Uv(e){return e.U_||(e.U_=function(e,t,n){const r=Ef(e);return r.w_(),new cv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jv.bind(null,e),mo:Mv.bind(null,e),f_:Ov.bind(null,e),g_:Lv.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Av(e)):(await e.U_.stop(),e.O_.length>0&&(bf("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Bv{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Cf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Bv(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new If(Tf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vv(e,t){if(wf("AsyncQueue",`${t}: ${e}`),ep(e))return new If(Tf.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Wf.comparator(t.key,n.key):(e,t)=>Wf.comparator(e.key,t.key),this.keyedMap=Pm(),this.sortedSet=new ap(this.comparator)}static emptySet(e){return new $v(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $v))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new $v;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.W_=new ap(Wf.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Sf():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Hv{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Hv(e,t,$v.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Wv{constructor(){this.queries=Gv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Ef(e),r=n.queries;n.queries=Gv(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new If(Tf.ABORTED,"Firestore shutting down"))}}function Gv(){return new Am(e=>_m(e),Sm)}async function Qv(e,t){const n=Ef(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Kv,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const e=Vv(o,`Initialization of query '${Em(t.query)}' failed`);return void t.onError(e)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&Zv(n)}async function Yv(e,t){const n=Ef(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Xv(e,t){const n=Ef(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&Zv(n)}function Jv(e,t,n){const r=Ef(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function Zv(e){e.Y_.forEach(e=>{e.next()})}var eb,tb;(tb=eb||(eb={})).ea="default",tb.Cache="cache";class nb{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Hv(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Hv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==eb.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.key=e}}class ib{constructor(e){this.key=e}}class sb{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Um(),this.mutatedKeys=Um(),this.Aa=Im(e),this.Ra=new $v(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new qv,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Tm(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Aa(u,a)>0||l&&this.Aa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sf()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new Hv(this.query,e.Ra,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Um(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new ib(e))}),this.da.forEach(n=>{e.has(n)||t.push(new rb(n))}),t}ba(e){this.Ta=e.Ts,this.da=Um();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Hv.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class ob{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ab{constructor(e){this.key=e,this.va=!1}}class lb{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Am(e=>_m(e),Sm),this.Ma=new Map,this.xa=new Set,this.Oa=new ap(Wf.comparator),this.Na=new Map,this.La=new Ay,this.Ba={},this.ka=new Map,this.qa=ky.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function cb(e,t,n=!0){const r=Nb(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await db(r,t,n,!0),i}async function ub(e,t){const n=Nb(e);await db(n,t,!0,!1)}async function db(e,t,n,r){const i=await function(e,t){const n=Ef(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,Zf.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new yy(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}(e.localStore,wm(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await async function(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Wy(e.localStore,t.query,!1).then(({documents:e})=>t.view.ma(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return _b(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const s=await Wy(e.localStore,t,!0),o=new sb(t,s.Ts),a=o.ma(s.documents),l=Pg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);_b(e,n,c.wa);const u=new ob(t,n,o);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&mv(e.remoteStore,i),a}async function hb(e,t,n){const r=Ef(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!Sm(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ky(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gv(r.remoteStore,i.targetId),kb(r,i.targetId)}).catch(Jf)):(kb(r,i.targetId),await Ky(r.localStore,i.targetId,!0))}async function fb(e,t){const n=Ef(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gv(n.remoteStore,r.targetId))}async function pb(e,t,n){const r=function(e){const t=Ef(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bb.bind(null,t),t}(e);try{const e=await function(e,t){const n=Ef(e),r=Bf.now(),i=t.reduce((e,t)=>e.add(t.key),Um());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Rm(),l=Um();return n.cs.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=dg(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new pg(e.key,t,Bp(t.value.mapValue),sg.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:jm(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new ap(Ff)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ib(r,e.changes),await Av(r.remoteStore)}catch(i){const e=Vv(i,"Failed to persist write");n.reject(e)}}async function mb(e,t){const n=Ef(e);try{const e=await qy(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(_f(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?_f(r.va):e.removedDocuments.size>0&&(_f(r.va),r.va=!1))}),await Ib(n,e,t)}catch(r){await Jf(r)}}function gb(e,t,n){const r=Ef(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ef(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&Zv(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function yb(e,t,n){const r=Ef(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new ap(Wf.comparator);e=e.insert(s,Vp.newNoDocument(s,Vf.min()));const n=Um().add(s),i=new Dg(Vf.min(),new Map,new ap(Ff),e,n);await mb(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),Tb(r)}else await Ky(r.localStore,t,!1).then(()=>kb(r,t,n)).catch(Jf)}async function vb(e,t){const n=Ef(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ef(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Zf.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);_f(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Um();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);xb(n,r,null),wb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ib(n,e)}catch(i){await Jf(i)}}async function bb(e,t,n){const r=Ef(e);try{const e=await function(e,t){const n=Ef(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(_f(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);xb(r,t,n),wb(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ib(r,e)}catch(i){await Jf(i)}}function wb(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function xb(e,t,n){const r=Ef(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function kb(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Sb(e,t)})}function Sb(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(gv(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Tb(e))}function _b(e,t,n){for(const r of n)r instanceof rb?(e.La.addReference(r.key,t),Eb(e,r)):r instanceof ib?(bf("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Sb(e,r.key)):Sf()}function Eb(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(bf("SyncEngine","New document in limbo: "+n),e.xa.add(r),Tb(e))}function Tb(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Wf(qf.fromString(t)),r=e.qa.next();e.Na.set(r,new ab(n)),e.Oa=e.Oa.insert(n,r),mv(e.remoteStore,new yy(wm(gm(n.path)),r,"TargetPurposeLimboResolution",tp.oe))}}async function Ib(e,t,n){const r=Ef(e),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((e,a)=>{o.push(r.Ka(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=zy.Wi(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(e,t){const n=Ef(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Zf.forEach(t,t=>Zf.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Zf.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!ep(r))throw r;bf("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function Cb(e,t){const n=Ef(e);if(!n.currentUser.isEqual(t)){bf("SyncEngine","User change. New user:",t.toKey());const e=await Vy(n.localStore,t);n.currentUser=t,i="'waitForPendingWrites' promise is rejected due to a user change.",(r=n).ka.forEach(e=>{e.forEach(e=>{e.reject(new If(Tf.CANCELLED,i))})}),r.ka.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ib(n,e.hs)}var r,i}function Ab(e,t){const n=Ef(e),r=n.Na.get(t);if(r&&r.va)return Um().add(r.key);{let e=Um();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Nb(e){const t=Ef(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=mb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ab.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=yb.bind(null,t),t.Ca.d_=Xv.bind(null,t.eventManager),t.Ca.$a=Jv.bind(null,t.eventManager),t}class Rb{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sv(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return function(e,t,n,r){return new By(e,t,n,r)}(this.persistence,new Uy,e.initialUser,this.serializer)}Ga(e){return new Oy(My.Zr,this.serializer)}Wa(e){return new Qy}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rb.provider={build:()=>new Rb};class Db{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>gb(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cb.bind(null,this.syncEngine),await async function(e,t){const n=Ef(e);t?(n.L_.delete(2),await fv(n)):t||(n.L_.add(2),await pv(n),n.q_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Wv}createDatastore(e){const t=sv(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new rv(r));var r;return function(e,t,n,r){return new uv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>gb(this.syncEngine,e,0),s=Xy.D()?new Xy:new Yy,new hv(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new lb(e,t,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ef(e);bf("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await pv(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Db.provider={build:()=>new Db};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wf("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=mf.UNAUTHENTICATED,this.clientId=zf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{bf("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(bf("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Vv(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ob(e,t){e.asyncQueue.verifyOperationInProgress(),bf("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Vy(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Lb(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){bf("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ob(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!("FirebaseError"===(n=i).name?n.code===Tf.FAILED_PRECONDITION||n.code===Tf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;xf("Error using user provided cache. Falling back to memory cache: "+i),await Ob(e,new Rb)}}else bf("FirestoreClient","Using default OfflineComponentProvider"),await Ob(e,new Rb);var n;return e._offlineComponents}(e);bf("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>zv(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>zv(t.remoteStore,n)),e._onlineComponents=t}async function Mb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(bf("FirestoreClient","Using user provided OnlineComponentProvider"),await Lb(e,e._uninitializedComponentsProvider._online)):(bf("FirestoreClient","Using default OnlineComponentProvider"),await Lb(e,new Db))),e._onlineComponents}async function zb(e){const t=await Mb(e),n=t.eventManager;return n.onListen=cb.bind(null,t.syncEngine),n.onUnlisten=hb.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ub.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fb.bind(null,t.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Fb(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Ub=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(e,t,n){if(!n)throw new If(Tf.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Vb(e,t,n,r){if(!0===t&&!0===r)throw new If(Tf.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function $b(e){if(!Wf.isDocumentKey(e))throw new If(Tf.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function qb(e){if(Wf.isDocumentKey(e))throw new If(Tf.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Hb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Sf()}function Kb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new If(Tf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hb(e);throw new If(Tf.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new If(Tf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new If(Tf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fb(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new If(Tf.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new If(Tf.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new If(Tf.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Gb{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new If(Tf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new If(Tf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Nf;switch(e.type){case"firstParty":return new jf(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new If(Tf.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ub.get(e);t&&(bf("ComponentProvider","Removing Datastore"),Ub.delete(e),t.terminate())}(this),Promise.resolve()}}function Qb(e,t,n,r={}){var i;const s=(e=Kb(e,Gb))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&xf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=mf.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[od(JSON.stringify({alg:"none",type:"JWT"})),od(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new If(Tf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new mf(s)}e._authCredentials=new Rf(new Af(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yb(this.firestore,e,this._query)}}class Xb{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xb(this.firestore,e,this._key)}}class Jb extends Yb{constructor(e,t,n){super(e,t,gm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xb(this.firestore,null,new Wf(e))}withConverter(e){return new Jb(this.firestore,e,this._path)}}function Zb(e,t,...n){if(e=Td(e),Bb("collection","path",t),e instanceof Gb){const r=qf.fromString(t,...n);return qb(r),new Jb(e,null,r)}{if(!(e instanceof Xb||e instanceof Jb))throw new If(Tf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(qf.fromString(t,...n));return qb(r),new Jb(e.firestore,null,r)}}function ew(e,t,...n){if(e=Td(e),1===arguments.length&&(t=zf.newId()),Bb("doc","path",t),e instanceof Gb){const r=qf.fromString(t,...n);return $b(r),new Xb(e,null,new Wf(r))}{if(!(e instanceof Xb||e instanceof Jb))throw new If(Tf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(qf.fromString(t,...n));return $b(r),new Xb(e.firestore,e instanceof Jb?e.converter:null,new Wf(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ov(this,"async_queue_retry"),this.Vu=()=>{const e=iv();e&&bf("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=iv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=iv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Cf;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ep(e))throw e;bf("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;throw wf("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Bv.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Sf()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class nw extends Gb{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new tw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tw(e),this._firestoreClient=void 0,await e}}}function rw(e,t){const n="string"==typeof e?e:"(default)",r=Mh("object"==typeof e?e:$h(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=ud(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Qb(r,...e)}return r}function iw(e){if(e._terminated)throw new If(Tf.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const i=e._freezeSettings(),s=(o=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,c=i,new kp(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Fb(c.experimentalLongPollingOptions),c.useFetchStreams));var o,a,l,c;e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new jb(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class sw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sw(pp.fromBase64String(e))}catch(t){throw new If(Tf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sw(pp.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new If(Tf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kf(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new If(Tf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new If(Tf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ff(this._lat,e._lat)||Ff(this._long,e._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=/^__.*__$/;class dw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new pg(e,this.data,this.fieldMask,t,this.fieldTransforms):new fg(e,this.data,t,this.fieldTransforms)}}class hw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new pg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Sf()}}class pw{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new pw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Iw(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(fw(this.Cu)&&uw.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class mw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||sv(e)}Qu(e,t,n,r=!1){return new pw({Cu:e,methodName:t,qu:n,path:Kf.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gw(e){const t=e._freezeSettings(),n=sv(e._databaseId);return new mw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yw(e,t,n,r,i,s={}){const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);Sw("Data must be an object, but it was:",o,r);const a=xw(r,o);let l,c;if(s.merge)l=new hp(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=_w(t,r,n);if(!o.contains(i))throw new If(Tf.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Cw(e,i)||e.push(i)}l=new hp(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new dw(new Up(a),l,c)}class vw extends aw{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vw}}class bw extends aw{_toFieldTransform(e){return new rg(e.path,new Qm)}isEqual(e){return e instanceof bw}}function ww(e,t){if(kw(e=Td(e)))return Sw("Unsupported field value:",t,e),xw(e,t);if(e instanceof aw)return function(e,t){if(!fw(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ww(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Td(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qm(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Bf.fromDate(e);return{timestampValue:Kg(t.serializer,n)}}if(e instanceof Bf){const n=new Bf(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Kg(t.serializer,n)}}if(e instanceof lw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sw)return{bytesValue:Wg(t.serializer,e._byteString)};if(e instanceof Xb){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Yg(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof cw)return n=t,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw n.Bu("VectorValues must only contain numeric values.");return Vm(n.serializer,e)})}}}}};var n;throw t.Bu(`Unsupported field value: ${Hb(e)}`)}(e,t)}function xw(e,t){const n={};return op(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sp(e,(e,r)=>{const i=ww(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function kw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Bf||e instanceof lw||e instanceof sw||e instanceof Xb||e instanceof aw||e instanceof cw)}function Sw(e,t,n){if(!kw(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){const r=Hb(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}var r}function _w(e,t,n){if((t=Td(t))instanceof ow)return t._internalPath;if("string"==typeof t)return Tw(e,t);throw Iw("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ew=new RegExp("[~\\*/\\[\\]]");function Tw(e,t,n){if(t.search(Ew)>=0)throw Iw(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ow(...t.split("."))._internalPath}catch(r){throw Iw(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Iw(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new If(Tf.INVALID_ARGUMENT,a+e+l)}function Cw(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xb(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Nw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Nw extends Aw{data(){return super.data()}}function Rw(e,t){return"string"==typeof t?Tw(e,t):t instanceof ow?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{}class Pw extends Dw{}function jw(e,t,...n){let r=[];t instanceof Dw&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof Mw).length,n=e.filter(e=>e instanceof Ow).length;if(t>1||t>0&&n>0)throw new If(Tf.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Ow extends Pw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ow(e,t,n)}_apply(e){const t=this._parse(e);return qw(e._query,t),new Yb(e.firestore,e.converter,xm(e._query,t))}_parse(e){const t=gw(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new If(Tf.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){$w(o,s);const t=[];for(const n of o)t.push(Vw(r,e,n));a={arrayValue:{values:t}}}else a=Vw(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||$w(o,s),a=function(e,t,n,r=!1){return ww(n,e.Qu(r?4:3,t))}(n,t,o,"in"===s||"not-in"===s);return Qp.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Lw(e,t,n){const r=t,i=Rw("where",e);return Ow._create(i,r,n)}class Mw extends Dw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mw(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Yp.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)qw(n,i),n=xm(n,i)}(e._query,t),new Yb(e.firestore,e.converter,xm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class zw extends Pw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zw(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new If(Tf.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new If(Tf.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kp(t,n)}(e._query,this._field,this._direction);return new Yb(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new mm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Fw(e,t="asc"){const n=t,r=Rw("orderBy",e);return zw._create(r,n)}class Uw extends Pw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Uw(e,t,n)}_apply(e){return new Yb(e.firestore,e.converter,km(e._query,this._limit,this._limitType))}}function Bw(e){return Uw._create("limit",e,"F")}function Vw(e,t,n){if("string"==typeof(n=Td(n))){if(""===n)throw new If(Tf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vm(t)&&-1!==n.indexOf("/"))throw new If(Tf.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(qf.fromString(n));if(!Wf.isDocumentKey(r))throw new If(Tf.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pp(e,new Wf(r))}if(n instanceof Xb)return Pp(e,n._key);throw new If(Tf.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hb(n)}.`)}function $w(e,t){if(!Array.isArray(e)||0===e.length)throw new If(Tf.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function qw(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new If(Tf.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new If(Tf.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Hw{convertValue(e,t="none"){switch(Ep(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Sf()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return sp(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>yp(e.doubleValue));return new cw(i)}convertGeoPoint(e){return new lw(yp(e.latitude),yp(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xp(e));default:return null}}convertTimestamp(e){const t=gp(e);return new Bf(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=qf.fromString(e);_f(gy(n));const r=new Sp(n.get(1),n.get(3)),i=new Wf(n.popFirst(5));return r.isEqual(t)||wf(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ww{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gw extends Aw{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Rw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Qw extends Gw{data(e={}){return super.data(e)}}class Yw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ww(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Qw(this._firestore,this._userDataWriter,n.key,n,new Ww(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new If(Tf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Qw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ww(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Qw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ww(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Xw(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Xw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sf()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends Hw{constructor(e){super(),this.firestore=e}convertBytes(e){return new sw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xb(this.firestore,null,t)}}function Zw(e){e=Kb(e,Yb);const t=Kb(e.firestore,nw),n=iw(t),r=new Jw(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new If(Tf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const r=new Cf;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Pb({next:n=>{s.Za(),t.enqueueAndForget(()=>Yv(e,o)),n.fromCache&&"server"===r.source?i.reject(new If(Tf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new nb(n,s,{includeMetadataChanges:!0,_a:!0});return Qv(e,o)}(await zb(e),e.asyncQueue,t,n,r)),r.promise}(n,e._query).then(n=>new Yw(t,r,e,n))}function ex(e,t,n){e=Kb(e,Xb);const r=Kb(e.firestore,nw),i=Kw(e.converter,t,n);return rx(r,[yw(gw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,sg.none())])}function tx(e,t,n,...r){e=Kb(e,Xb);const i=Kb(e.firestore,nw),s=gw(i);let o;return o="string"==typeof(t=Td(t))||t instanceof ow?function(e,t,n,r,i,s){const o=e.Qu(1,t,n),a=[_w(t,r,n)],l=[i];if(s.length%2!=0)throw new If(Tf.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(_w(t,s[h])),l.push(s[h+1]);const c=[],u=Up.empty();for(let h=a.length-1;h>=0;--h)if(!Cw(c,a[h])){const e=a[h];let t=l[h];t=Td(t);const n=o.Nu(e);if(t instanceof vw)c.push(e);else{const r=ww(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new hp(c);return new hw(u,d,o.fieldTransforms)}(s,"updateDoc",e._key,t,n,r):function(e,t,n,r){const i=e.Qu(1,t,n);Sw("Data must be an object, but it was:",i,r);const s=[],o=Up.empty();sp(r,(e,r)=>{const a=Tw(t,e,n);r=Td(r);const l=i.Nu(a);if(r instanceof vw)s.push(a);else{const e=ww(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new hp(s);return new hw(o,a,i.fieldTransforms)}(s,"updateDoc",e._key,t),rx(i,[o.toMutation(e._key,sg.exists(!0))])}function nx(e,t){const n=Kb(e.firestore,nw),r=ew(e),i=Kw(e.converter,t);return rx(n,[yw(gw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,sg.exists(!1))]).then(()=>r)}function rx(e,t){return function(e,t){const n=new Cf;return e.asyncQueue.enqueueAndForget(async()=>pb(await function(e){return Mb(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(iw(e),t)}function ix(){return new bw("serverTimestamp")}!function(e,t=!0){gf=Bh,Lh(new Id("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new nw(new Df(e.getProvider("auth-internal")),new Lf(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new If(Tf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sp(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),qh(pf,"4.7.3",e),qh(pf,"4.7.3","esm2017")}();const sx=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Hw,Bytes:sw,CollectionReference:Jb,DocumentReference:Xb,DocumentSnapshot:Gw,FieldPath:ow,FieldValue:aw,Firestore:nw,FirestoreError:If,GeoPoint:lw,Query:Yb,QueryCompositeFilterConstraint:Mw,QueryConstraint:Pw,QueryDocumentSnapshot:Qw,QueryFieldFilterConstraint:Ow,QueryLimitConstraint:Uw,QueryOrderByConstraint:zw,QuerySnapshot:Yw,SnapshotMetadata:Ww,Timestamp:Bf,VectorValue:cw,_AutoId:zf,_ByteString:pp,_DatabaseId:Sp,_DocumentKey:Wf,_EmptyAuthCredentialsProvider:Nf,_FieldPath:Kf,_cast:Kb,_logWarn:xf,_validateIsNotUsedTogether:Vb,addDoc:nx,collection:Zb,connectFirestoreEmulator:Qb,doc:ew,ensureFirestoreConfigured:iw,executeWrite:rx,getDoc:function(e){e=Kb(e,Xb);const t=Kb(e.firestore,nw);return function(e,t,n={}){const r=new Cf;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Pb({next:a=>{s.Za(),t.enqueueAndForget(()=>Yv(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new If(Tf.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new If(Tf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new nb(gm(n.path),s,{includeMetadataChanges:!0,_a:!0});return Qv(e,o)}(await zb(e),e.asyncQueue,t,n,r)),r.promise}(iw(t),e._key).then(n=>function(e,t,n){const r=n.docs.get(t._key),i=new Jw(e);return new Gw(e,i,t._key,r,new Ww(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n))},getDocs:Zw,getFirestore:rw,limit:Bw,orderBy:Fw,query:jw,serverTimestamp:ix,setDoc:ex,updateDoc:tx,where:Lw},Symbol.toStringTag,{value:"Module"}));function ox(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function ax(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
qh("firebase","10.14.1","app"),"function"==typeof SuppressedError&&SuppressedError;const lx=ax,cx=new yd("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ux=new Md("@firebase/auth");function dx(e,...t){ux.logLevel<=Rd.ERROR&&ux.error(`Auth (${Bh}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(e,...t){throw gx(e,...t)}function fx(e,...t){return gx(e,...t)}function px(e,t,n){const r=Object.assign(Object.assign({},lx()),{[t]:n});return new yd("auth","Firebase",r).create(t,{appName:e.name})}function mx(e){return px(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gx(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return cx.create(e,...t)}function yx(e,t,...n){if(!e)throw gx(t,...n)}function vx(e){const t="INTERNAL ASSERTION FAILED: "+e;throw dx(t),new Error(t)}function bx(e,t){e||vx(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function xx(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==xx()&&"https:"!==xx()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Sx{constructor(e,t){this.shortDelay=e,this.longDelay=t,bx(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pd())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return kx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(e,t){bx(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void vx("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void vx("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void vx("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ix=new Sx(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ax(e,t,n,r,i={}){return Nx(e,i,async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=xd(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Ex.fetch()(Dx(e,e.config.apiHost,n,o),l)})}async function Nx(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Tx),t);try{const t=new jx(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Ox(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ox(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ox(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ox(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw px(e,a,o);hx(e,a)}}catch(i){if(i instanceof gd)throw i;hx(e,"network-request-failed",{message:String(i)})}}async function Rx(e,t,n,r,i={}){const s=await Ax(e,t,n,r,i);return"mfaPendingCredential"in s&&hx(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Dx(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?_x(e.config,i):`${e.config.apiScheme}://${i}`}function Px(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(fx(this.auth,"network-request-failed")),Ix.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ox(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fx(e,t,r);return i.customData._tokenResponse=n,i}function Lx(e){return void 0!==e&&void 0!==e.enterprise}class Mx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Px(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function zx(e,t){return Ax(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Ux(e){return 1e3*Number(e)}function Bx(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return dx("JWT malformed, contained fewer than 3 sections"),null;try{const e=ad(n);return e?JSON.parse(e):(dx("Failed to decode base64 JWT payload"),null)}catch(i){return dx("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}function Vx(e){const t=Bx(e);return yx(t,"internal-error"),yx(void 0!==t.exp,"internal-error"),yx(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof gd&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class qx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fx(this.lastLoginAt),this.creationTime=Fx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kx(e){var t;const n=e.auth,r=await e.getIdToken(),i=await $x(e,zx(n,{idToken:r}));yx(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Wx(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Hx(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Wx(e){return e.map(e=>{var{providerId:t}=e,n=ox(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yx(e.idToken,"internal-error"),yx(void 0!==e.idToken,"internal-error"),yx(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):Vx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){yx(0!==e.length,"internal-error");const t=Vx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(yx(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Nx(e,{},async()=>{const n=xd({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Dx(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ex.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Gx;return n&&(yx("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(yx("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(yx("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gx,this.toJSON())}_performRefresh(){return vx("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(e,t){yx("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Yx{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ox(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await $x(this,this.stsTokenManager.getToken(this.auth,e));return yx(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Td(e),r=await n.getIdToken(t),i=Bx(r);yx(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Fx(Ux(i.auth_time)),issuedAtTime:Fx(Ux(i.iat)),expirationTime:Fx(Ux(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Td(e);await Kx(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(yx(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yx(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){yx(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Kx(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zh(this.auth.app))return Promise.reject(mx(this.auth));const e=await this.getIdToken();return await $x(this,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return Ax(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:k}=t;yx(v&&k,e,"internal-error");const S=Gx.fromJSON(this.name,k);yx("string"==typeof v,e,"internal-error"),Qx(u,e.name),Qx(d,e.name),yx("boolean"==typeof b,e,"internal-error"),yx("boolean"==typeof w,e,"internal-error"),Qx(h,e.name),Qx(f,e.name),Qx(p,e.name),Qx(m,e.name),Qx(g,e.name),Qx(y,e.name);const _=new Yx({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(_.providerData=x.map(e=>Object.assign({},e))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t,n=!1){const r=new Gx;r.updateFromServerResponse(t);const i=new Yx({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Kx(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];yx(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Wx(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),o=new Gx;o.updateFromIdToken(n);const a=new Yx({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Hx(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(a,l),a}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=new Map;function Jx(e){bx(e instanceof Function,"Expected a class definition");let t=Xx.get(e);return t?(bx(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xx.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zx.type="NONE";const ek=Zx;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(e,t,n){return`firebase:${e}:${t}:${n}`}class nk{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=tk(this.userKey,r.apiKey,i),this.fullPersistenceKey=tk("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yx._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new nk(Jx(ek),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Jx(ek);const s=tk(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Yx._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new nk(i,e,n)):new nk(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ak(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ik(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ck(t))return"Blackberry";if(uk(t))return"Webos";if(sk(t))return"Safari";if((t.includes("chrome/")||ok(t))&&!t.includes("edge/"))return"Chrome";if(lk(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ik(e=pd()){return/firefox\//i.test(e)}function sk(e=pd()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ok(e=pd()){return/crios\//i.test(e)}function ak(e=pd()){return/iemobile/i.test(e)}function lk(e=pd()){return/android/i.test(e)}function ck(e=pd()){return/blackberry/i.test(e)}function uk(e=pd()){return/webos/i.test(e)}function dk(e=pd()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function hk(){return function(){const e=pd();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function fk(e=pd()){return dk(e)||lk(e)||uk(e)||ck(e)||/windows phone/i.test(e)||ak(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(e,t=[]){let n;switch(e){case"Browser":n=rk(pd());break;case"Worker":n=`${rk(pd())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bh}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bk(this),this.idTokenSubscription=new bk(this),this.beforeStateQueue=new mk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jx(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await nk.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await zx(this,{idToken:e}),n=await Yx._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(zh(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return yx(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kx(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zh(this.app))return Promise.reject(mx(this));const t=e?Td(e):null;return t&&yx(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&yx(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zh(this.app)?Promise.reject(mx(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zh(this.app)?Promise.reject(mx(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jx(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Ax(e,"GET","/v2/passwordPolicy",Cx(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new gk(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yd("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ax(e,"POST","/v2/accounts:revokeToken",Cx(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Jx(e)||this._popupRedirectResolver;yx(t,this,"argument-error"),this.redirectPersistenceManager=await nk.create(this,[Jx(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(yx(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yx(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){ux.logLevel<=Rd.WARN&&ux.warn(`Auth (${Bh}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function vk(e){return Td(e)}class bk{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new _d(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return yx(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wk={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xk(e){return wk.loadJS(e)}class kk{constructor(e){this.type="recaptcha-enterprise",this.auth=vk(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{(async function(e,t){return Ax(e,"GET","/v2/recaptchaConfig",Cx(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Mx(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})}function r(t,n,r){const i=window.grecaptcha;Lx(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&Lx(window.grecaptcha))r(n,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=wk.recaptchaEnterpriseScript;0!==t.length&&(t+=n),xk(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function Sk(e,t,n,r=!1){const i=new kk(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _k(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Sk(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){const i=await Sk(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(e,t,n){const r=vk(e);yx(r._canInitEmulator,r,"emulator-config-failed"),yx(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=Tk(t),{host:s,port:o}=function(e){const t=Tk(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ik(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ik(t)}}}(t),a=null===o?"":`:${o}`;r.config.emulator={url:`${i}//${s}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Tk(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ik(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ck{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vx("not implemented")}_getIdTokenResponse(e){return vx("not implemented")}_linkToIdToken(e,t){return vx("not implemented")}_getReauthenticationResolver(e){return vx("not implemented")}}async function Ak(e,t){return Ax(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(e,t){return Rx(e,"POST","/v1/accounts:signInWithPassword",Cx(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rk extends Ck{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Rk(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Rk(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return _k(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Nk);case"emailLink":return async function(e,t){return Rx(e,"POST","/v1/accounts:signInWithEmailLink",Cx(e,t))}(e,{email:this._email,oobCode:this._password});default:hx(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return _k(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ak);case"emailLink":return async function(e,t){return Rx(e,"POST","/v1/accounts:signInWithEmailLink",Cx(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:hx(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(e,t){return Rx(e,"POST","/v1/accounts:signInWithIdp",Cx(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk extends Ck{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pk(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hx("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ox(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Pk(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Dk(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Dk(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Dk(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xd(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){var t,n,r,i,s,o;const a=kd(Sd(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);yx(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=kd(Sd(e)).link,n=t?kd(Sd(t)).deep_link_id:null,r=kd(Sd(e)).deep_link_id;return(r?kd(Sd(r)).link:null)||r||n||t||e}(e);try{return new jk(t)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this.providerId=Ok.PROVIDER_ID}static credential(e,t){return Rk._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=jk.parseLink(t);return yx(n,"argument-error"),Rk._fromEmailAndCode(e,n.code,n.tenantId)}}Ok.PROVIDER_ID="password",Ok.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ok.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Lk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk extends Lk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk extends Mk{constructor(){super("facebook.com")}static credential(e){return Pk._fromParams({providerId:zk.PROVIDER_ID,signInMethod:zk.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zk.credentialFromTaggedObject(e)}static credentialFromError(e){return zk.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return zk.credential(e.oauthAccessToken)}catch(t){return null}}}zk.FACEBOOK_SIGN_IN_METHOD="facebook.com",zk.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Fk extends Mk{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pk._fromParams({providerId:Fk.PROVIDER_ID,signInMethod:Fk.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fk.credentialFromTaggedObject(e)}static credentialFromError(e){return Fk.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Fk.credential(t,n)}catch(r){return null}}}Fk.GOOGLE_SIGN_IN_METHOD="google.com",Fk.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Uk extends Mk{constructor(){super("github.com")}static credential(e){return Pk._fromParams({providerId:Uk.PROVIDER_ID,signInMethod:Uk.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uk.credentialFromTaggedObject(e)}static credentialFromError(e){return Uk.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Uk.credential(e.oauthAccessToken)}catch(t){return null}}}Uk.GITHUB_SIGN_IN_METHOD="github.com",Uk.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Bk extends Mk{constructor(){super("twitter.com")}static credential(e,t){return Pk._fromParams({providerId:Bk.PROVIDER_ID,signInMethod:Bk.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bk.credentialFromTaggedObject(e)}static credentialFromError(e){return Bk.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Bk.credential(t,n)}catch(r){return null}}}Bk.TWITTER_SIGN_IN_METHOD="twitter.com",Bk.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Vk{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Yx._fromIdTokenResponse(e,n,r),s=$k(n);return new Vk({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=$k(n);return new Vk({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function $k(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk extends gd{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,qk.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new qk(e,t,n,r)}}function Hk(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw qk._fromErrorAndOperation(e,n,t,r);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Kk(e,t,n=!1){if(zh(e.app))return Promise.reject(mx(e));const r="signIn",i=await Hk(e,r,t),s=await Vk._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Wk(e,t,n){return zh(e.app)?Promise.reject(mx(e)):async function(e,t){return Kk(vk(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Td(e),Ok.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&async function(e){const t=vk(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}(e),t})}function Gk(e){return Td(e).signOut()}const Qk="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qk,"1"),this.storage.removeItem(Qk),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk extends Yk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);hk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xk.type="LOCAL";const Jk=Xk;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk extends Yk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Zk.type="SESSION";const eS=Zk;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class tS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new tS(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function nS(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tS.receivers=[];class rS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=nS("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function sS(){return void 0!==iS().WorkerGlobalScope&&"function"==typeof iS().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const oS="firebaseLocalStorageDb",aS="firebaseLocalStorage",lS="fbase_key";class cS{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uS(e,t){return e.transaction([aS],t?"readwrite":"readonly").objectStore(aS)}function dS(){const e=indexedDB.open(oS,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(aS,{keyPath:lS})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(aS)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(oS);return new cS(e).toPromise()}(),t(await dS()))})})}async function hS(e,t,n){const r=uS(e,!0).put({[lS]:t,value:n});return new cS(r).toPromise()}function fS(e,t){const n=uS(e,!0).delete(t);return new cS(n).toPromise()}class pS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await dS()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tS._getInstance(sS()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new rS(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dS();return await hS(e,Qk,"1"),await fS(e,Qk),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>hS(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=uS(e,!1).get(t),r=await new cS(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=uS(e,!1).getAll();return new cS(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}pS.type="LOCAL";const mS=pS;new Sx(3e4,6e4);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gS extends Ck{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dk(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Dk(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Dk(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yS(e){return Kk(e.auth,new gS(e),e.bypassAuthState)}function vS(e){const{auth:t,user:n}=e;return yx(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:r}=e;if(zh(r.app))return Promise.reject(mx(r));const i="reauthenticate";try{const s=await $x(e,Hk(r,i,t,e),n);yx(s.idToken,r,"internal-error");const o=Bx(s.idToken);yx(o,r,"internal-error");const{sub:a}=o;return yx(e.uid===a,r,"user-mismatch"),Vk._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&hx(r,"user-mismatch"),s}}(n,new gS(e),e.bypassAuthState)}async function bS(e){const{auth:t,user:n}=e;return yx(n,t,"internal-error"),async function(e,t,n=!1){const r=await $x(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Vk._forOperation(e,"link",r)}(n,new gS(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yS;case"linkViaPopup":case"linkViaRedirect":return bS;case"reauthViaPopup":case"reauthViaRedirect":return vS;default:hx(this.auth,"internal-error")}}resolve(e){bx(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bx(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new Sx(2e3,1e4);class kS extends wS{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,kS.currentPopupAction&&kS.currentPopupAction.cancel(),kS.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yx(e,this.auth,"internal-error"),e}async onExecution(){bx(1===this.filter.length,"Popup operations only handle one event");const e=nS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(fx(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(fx(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kS.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fx(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,xS.get())};e()}}kS.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const SS="pendingRedirect",_S=new Map;class ES extends wS{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=_S.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return tk(SS,e.config.apiKey,e.name)}(t),r=function(e){return Jx(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}_S.set(this.auth._key(),e)}return this.bypassAuthState||_S.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function TS(e,t){_S.set(e._key(),t)}async function IS(e,t,n=!1){if(zh(e.app))return Promise.reject(mx(e));const r=vk(e),i=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return t?Jx(t):(yx(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new ES(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NS(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!NS(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(fx(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(AS(e))}saveEventToCache(e){this.cachedEventUids.add(AS(e)),this.lastProcessedEventTime=Date.now()}}function AS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function NS({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const RS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DS=/^https?/;async function PS(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Ax(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(jS(r))return}catch(n){}hx(e,"unauthorized-domain")}function jS(e){const t=wx(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!DS.test(n))return!1;if(RS.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=new Sx(3e4,6e4);function LS(){const e=iS().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function MS(e){return new Promise((t,n)=>{var r,i,s;function o(){LS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{LS(),n(fx(e,"network-request-failed"))},timeout:OS.get()})}if(null===(i=null===(r=iS().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=iS().gapi)||void 0===s?void 0:s.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return iS()[t]=()=>{gapi.load?o():n(fx(e,"network-request-failed"))},xk(`${wk.gapiScript}?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw zS=null,e})}let zS=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const FS=new Sx(5e3,15e3),US={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VS(e){const t=e.config;yx(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_x(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Bh},i=BS.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xd(r).slice(1)}`}async function $S(e){const t=await function(e){return zS=zS||MS(e),zS}(e),n=iS().gapi;return yx(n,e,"internal-error"),t.open({where:document.body,url:VS(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:US,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=fx(e,"network-request-failed"),s=iS().setTimeout(()=>{r(i)},FS.get());function o(){iS().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class HS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function KS(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},qS),{width:r.toString(),height:i.toString(),top:s,left:o}),c=pd().toLowerCase();n&&(a=ok(c)?"_blank":n),ik(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=pd()){var t;return dk(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",a),new HS(null);const d=window.open(t||"",a,u);yx(d,e,"popup-blocked");try{d.focus()}catch(h){}return new HS(d)}const WS="__/auth/handler",GS="emulator/auth/handler",QS=encodeURIComponent("fac");async function YS(e,t,n,r,i,s){yx(e.config.authDomain,e,"auth-domain-config-required"),yx(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Bh,eventId:i};if(t instanceof Lk){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))o[e]=t}if(t instanceof Mk){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${QS}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${WS}`;return _x(e,GS)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${xd(a).slice(1)}${c}`}const XS="webStorageSupport";const JS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eS,this._completeRedirectFn=IS,this._overrideRedirectResult=TS}async _openPopup(e,t,n,r){var i;bx(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return KS(e,await YS(e,t,n,wx(),r),nS())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){iS().location.href=e}(await YS(e,t,n,wx(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(bx(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await $S(e),n=new CS(e);return t.register("authEvent",t=>{yx(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(XS,{type:XS},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[XS];void 0!==i&&t(!!i),hx(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fk()||sk()||dk()}};var ZS="@firebase/auth",e_="1.7.9";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class t_{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){yx(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const n_=hd("authIdTokenMaxAge")||300;let r_=null;var i_;wk={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=fx("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},i_="Browser",Lh(new Id("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;yx(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:i_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pk(i_)},l=new yk(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jx);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Lh(new Id("auth-internal",e=>{const t=vk(e.getProvider("auth").getImmediate());return new t_(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qh(ZS,e_,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(i_)),qh(ZS,e_,"esm2017");const s_=Vh({apiKey:"AIzaSyB3v0ebnm6HMJTM84vY8IVrSkmfXpZxDw0",authDomain:"poopcount-1a556.firebaseapp.com",projectId:"poopcount-1a556",storageBucket:"poopcount-1a556.firebasestorage.app",messagingSenderId:"644753590566",appId:"1:644753590566:web:311b83690ceaaa2c9919e7"}),o_=rw(s_),a_=function(e=$h()){const t=Mh(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Mh(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(bd(n.getOptions(),null!=t?t:{}))return e;hx(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:JS,persistence:[mS,Jk,eS]}),r=hd("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>n_)return;const r=null==t?void 0:t.token;r_!==r&&(r_=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Td(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Td(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=ud("auth");return s&&Ek(n,`http://${s}`),n}(s_),l_=Object.freeze(Object.defineProperty({__proto__:null,auth:a_,db:o_},Symbol.toStringTag,{value:"Module"})),c_=async e=>{try{if(!(e=>/^1905-[a-z0-9-]+$/.test(e))(e))throw new Error("Geçersiz room ID formatı");const t=jw(Zb(o_,"rooms"),Lw("id","==",e)),n=await Zw(t);if(n.empty)return null;const r=n.docs[0];return{firestoreId:r.id,id:r.data().id,...r.data()}}catch(t){throw t}},u_=async e=>{try{const t=jw(Zb(o_,"characters"),Lw("roomId","==",e)),n=await Zw(t),r=[];return n.forEach(e=>{r.push({id:e.id,...e.data()})}),r.sort((e,t)=>"male"===e.gender&&"female"===t.gender?-1:"female"===e.gender&&"male"===t.gender?1:0),r}catch(t){throw t}},d_={male:{colors:["#4ecdc4","#45b7b8","#96ceb4","#74b9ff","#0984e3"],emojis:["💙","🦸","👨","🎮","⚽","🎯","🚀","💪"]},female:{colors:["#ff6b9d","#e55a8a","#fd79a8","#fdcb6e","#e17055"],emojis:["💖","🦸‍♀️","👩","🌸","💄","🎀","🦋","💅"]}},h_=({children:e,onClick:t,variant:n="primary",size:r="md",disabled:i=!1,className:s="",...o})=>{const a=["pixel-button","primary"===n?"primary":"secondary","sm"===r?"small":"lg"===r?"large":"",i?"disabled":"",s].filter(Boolean).join(" ");return G.jsx("button",{className:a,onClick:t,disabled:i,...o,children:e})},f_=({onRoomSelected:e})=>{const[t,n]=F.useState("select"),[r,i]=F.useState(""),[s,o]=F.useState(""),[a,l]=F.useState(!1),[c,u]=F.useState(""),d=async t=>{if(t.preventDefault(),r.trim()){l(!0),u("");try{const t=await(async e=>{try{const t=(e=>`1905-${e.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"")}`)(e);if(await c_(t))throw new Error("Bu oda adı zaten kullanımda. Farklı bir isim deneyin.");const n={id:t,name:e,createdAt:ix(),status:"waiting_for_partner",characterCount:0,characters:[]};return{firestoreId:(await nx(Zb(o_,"rooms"),n)).id,id:n.id,...n}}catch(c){throw c}})(r.trim());e(t)}catch(n){u(n.message)}finally{l(!1)}}else u("Oda adı boş olamaz")},h=async t=>{if(t.preventDefault(),s.trim()){l(!0),u("");try{const t=await c_(s.trim());if(!t)return void u("Room ID bulunamadı");if((await u_(s.trim())).length>=2)return void(window.location.href=`?room=${s.trim()}`);e(t)}catch(n){u(n.message||"Room ID bulunamadı")}finally{l(!1)}}else u("Room ID boş olamaz")};return G.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f0f0f0",padding:"20px"},children:G.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #333",borderRadius:"8px",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.2)",padding:"30px",width:"100%",maxWidth:"400px",textAlign:"center"},children:["select"===t&&G.jsxs("div",{style:{textAlign:"center"},children:[G.jsx("h2",{style:{fontSize:"20px",color:"#333",marginBottom:"30px"},children:"🏠 Oda Seçimi"}),G.jsxs("div",{style:{marginBottom:"20px"},children:[G.jsx(h_,{onClick:()=>n("create"),variant:"primary",size:"lg",style:{marginBottom:"15px",width:"100%"},children:"🆕 Yeni Oda Oluştur"}),G.jsx(h_,{onClick:()=>n("join"),variant:"secondary",size:"lg",style:{width:"100%"},children:"🔑 Room ID ile Gir"})]}),G.jsxs("div",{style:{fontSize:"12px",color:"#666",lineHeight:"1.4",marginTop:"20px"},children:["💡 İpucu: Oda adı benzersiz olmalıdır",G.jsx("br",{}),"Örnek: kutayverumeysa → 1905-kutayverumeysa"]})]}),"create"===t&&G.jsxs("div",{children:[G.jsx("div",{style:{marginBottom:"20px",textAlign:"center"},children:G.jsx(h_,{onClick:()=>n("select"),variant:"secondary",size:"sm",children:"← Geri"})}),G.jsx("h2",{style:{fontSize:"20px",color:"#333",marginBottom:"20px",textAlign:"center"},children:"🆕 Yeni Oda Oluştur"}),G.jsxs("form",{onSubmit:d,children:[G.jsxs("div",{style:{marginBottom:"20px",textAlign:"left"},children:[G.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"Oda Adı (Benzersiz)"}),G.jsx("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"örn: kutayverumeysa",required:!0,style:{width:"100%",padding:"12px",border:"3px solid #333",borderRadius:"4px",fontSize:"16px",boxSizing:"border-box"}}),G.jsxs("div",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},children:["Oluşturulacak Room ID: 1905-",r.toLowerCase().replace(/[^a-z0-9]/g,"")]})]}),c&&G.jsx("div",{style:{backgroundColor:"#ff6b6b",color:"#fff",padding:"10px",borderRadius:"4px",marginBottom:"20px",fontSize:"14px"},children:c}),G.jsx(h_,{type:"submit",variant:"primary",size:"lg",disabled:a,style:{width:"100%"},children:a?"Oluşturuluyor...":"Oda Oluştur"})]})]}),"join"===t&&G.jsxs("div",{children:[G.jsx("div",{style:{marginBottom:"20px",textAlign:"center"},children:G.jsx(h_,{onClick:()=>n("select"),variant:"secondary",size:"sm",children:"← Geri"})}),G.jsx("h2",{style:{fontSize:"20px",color:"#333",marginBottom:"20px",textAlign:"center"},children:"🔑 Room ID ile Gir"}),G.jsxs("form",{onSubmit:h,children:[G.jsxs("div",{style:{marginBottom:"20px",textAlign:"left"},children:[G.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"Room ID"}),G.jsx("input",{type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"örn: 1905-kutayverumeysa",required:!0,style:{width:"100%",padding:"12px",border:"3px solid #333",borderRadius:"4px",fontSize:"16px",boxSizing:"border-box"}})]}),c&&G.jsx("div",{style:{backgroundColor:"#ff6b6b",color:"#fff",padding:"10px",borderRadius:"4px",marginBottom:"20px",fontSize:"14px"},children:c}),G.jsx(h_,{type:"submit",variant:"primary",size:"lg",disabled:a,style:{width:"100%"},children:a?"Katılıyor...":"Odaya Katıl"})]})]})]})})},p_=({roomId:e,onCharacterCreated:t})=>{const[n,r]=F.useState(""),[i,s]=F.useState(""),[o,a]=F.useState(""),[l,c]=F.useState(""),[u,d]=F.useState(!1),[h,f]=F.useState(""),[p,m]=F.useState(["male","female"]),[g,y]=F.useState([]);F.useEffect(()=>{v()},[e]);const v=async()=>{try{const t=await u_(e);y(t);const n=t.map(e=>e.gender),r=["male","female"].filter(e=>!n.includes(e));if(m(r),t.length>=2)return void(window.location.href=`?room=${e}`)}catch(t){}},b=async r=>{if(r.preventDefault(),n&&i.trim()&&o&&l){d(!0),f("");try{const r={gender:n,name:i.trim(),emoji:o,color:l},s=await(async(e,t)=>{try{const n={roomId:e,gender:t.gender,name:t.name,emoji:t.emoji,color:t.color,createdAt:ix()};return{id:(await nx(Zb(o_,"characters"),n)).id,...n}}catch(h){throw h}})(e,r);await(async(e,t)=>{try{const n=await c_(e);if(!n)throw new Error("Room bulunamadı");const r=ew(o_,"rooms",n.firestoreId),i=[...n.characters||[],t],s=i.length,o=s>=2?"active":"waiting_for_partner";return await tx(r,{characters:i,characterCount:s,status:o}),{...n,characters:i,characterCount:s,status:o}}catch(h){throw h}})(e,s.id);if((await u_(e)).length>=2)return void(window.location.href=`?room=${e}`);t(s)}catch(s){f(s.message)}finally{d(!1)}}else f("Lütfen tüm alanları doldurun")};return G.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f0f0f0",padding:"20px"},children:G.jsx("div",{style:{backgroundColor:"#fff",border:"3px solid #333",borderRadius:"8px",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.2)",padding:"30px",width:"100%",maxWidth:"500px",textAlign:"center"},children:n?G.jsxs("div",{children:[G.jsx("div",{style:{marginBottom:"20px",textAlign:"center"},children:G.jsx(h_,{onClick:()=>r(""),variant:"secondary",size:"sm",children:"← Geri"})}),G.jsx("h2",{style:{fontSize:"20px",color:"#333",marginBottom:"20px",textAlign:"center"},children:"🎨 Karakterini Özelleştir"}),G.jsxs("form",{onSubmit:b,children:[G.jsxs("div",{style:{marginBottom:"20px",textAlign:"left"},children:[G.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"Karakter İsmi"}),G.jsx("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"örn: Kutay, Rümeysa",required:!0,style:{width:"100%",padding:"12px",border:"3px solid #333",borderRadius:"4px",fontSize:"16px",boxSizing:"border-box"}})]}),G.jsxs("div",{style:{marginBottom:"20px"},children:[G.jsx("label",{style:{display:"block",marginBottom:"10px",fontSize:"14px",fontWeight:"bold",color:"#333",textAlign:"left"},children:"Emoji Seç"}),G.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px"},children:null==(w=d_[n])?void 0:w.emojis.map((e,t)=>G.jsx(h_,{onClick:()=>a(e),variant:o===e?"primary":"secondary",size:"sm",style:{padding:"15px",fontSize:"20px"},children:e},t))})]}),G.jsxs("div",{style:{marginBottom:"20px"},children:[G.jsx("label",{style:{display:"block",marginBottom:"10px",fontSize:"14px",fontWeight:"bold",color:"#333",textAlign:"left"},children:"Renk Seç"}),G.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"10px"},children:null==(x=d_[n])?void 0:x.colors.map((e,t)=>G.jsx(h_,{onClick:()=>c(e),variant:l===e?"primary":"secondary",size:"sm",style:{padding:"15px",backgroundColor:l===e?e:"#f0f0f0",borderColor:e,borderWidth:l===e?"3px":"2px"},children:G.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:e,borderRadius:"50%",margin:"0 auto"}})},t))})]}),o&&l&&i&&G.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"3px solid #333",borderRadius:"8px",padding:"20px",marginBottom:"20px",textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"14px",marginBottom:"10px",color:"#666"},children:"Önizleme:"}),G.jsx("div",{style:{fontSize:"32px",marginBottom:"10px"},children:o}),G.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:l},children:i})]}),h&&G.jsx("div",{style:{backgroundColor:"#ff6b6b",color:"#fff",padding:"10px",borderRadius:"4px",marginBottom:"20px",fontSize:"14px"},children:h}),G.jsx(h_,{type:"submit",variant:"primary",size:"lg",disabled:u||!n||!i.trim()||!o||!l,style:{width:"100%"},children:u?"Oluşturuluyor...":"Karakter Oluştur"})]})]}):(()=>{const e=()=>0===g.length?null:G.jsxs("div",{style:{marginBottom:"30px"},children:[G.jsx("h3",{style:{fontSize:"16px",color:"#333",marginBottom:"15px",textAlign:"center"},children:"👥 Odadaki Mevcut Karakterler"}),G.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px"},children:g.map((e,t)=>G.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"2px solid #333",borderRadius:"8px",padding:"15px",textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"24px",marginBottom:"5px"},children:e.emoji}),G.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",color:e.color},children:e.name}),G.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"male"===e.gender?"👨 Erkek":"👩 Kadın"})]},t))})]});return 1===p.length?G.jsxs("div",{children:[G.jsx("h2",{style:{fontSize:"20px",color:"#333",marginBottom:"20px",textAlign:"center"},children:"👤 Karakter Cinsiyeti Seç"}),e(),G.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"2px solid #333",borderRadius:"8px",padding:"20px",marginBottom:"30px",textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"32px",marginBottom:"10px"},children:"male"===p[0]?"👨":"👩"}),G.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#333"},children:["male"===p[0]?"Erkek":"Kadın"," Karakter"]}),G.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"5px"},children:"Bu cinsiyet seçildi"})]}),G.jsx(h_,{onClick:()=>r(p[0]),variant:"primary",size:"lg",style:{width:"100%"},children:"Bu Cinsiyeti Seç →"})]}):G.jsxs("div",{children:[G.jsx("h2",{style:{fontSize:"20px",color:"#333",marginBottom:"20px",textAlign:"center"},children:"👤 Karakter Cinsiyeti Seç"}),e(),G.jsx("div",{style:{display:"grid",gridTemplateColumns:1===p.length?"1fr":"1fr 1fr",gap:"15px",marginBottom:"30px"},children:p.map(e=>G.jsxs(h_,{onClick:()=>r(e),variant:n===e?"primary":"secondary",size:"lg",style:{padding:"20px"},children:[G.jsx("div",{style:{fontSize:"24px",marginBottom:"5px"},children:"male"===e?"👨":"👩"}),G.jsx("div",{children:"male"===e?"Erkek":"Kadın"})]},e))})]})})()})});var w,x},m_=async e=>{try{const t=jw(Zb(o_,"profiles"),Lw("roomId","==",e)),n=await Zw(t),r=[];return n.forEach(e=>{r.push({id:e.id,...e.data()})}),r}catch(t){throw t}},g_=({roomId:e,characterId:t,onProfileCreated:n})=>{const[r,i]=F.useState(""),[s,o]=F.useState(""),[a,l]=F.useState(""),[c,u]=F.useState(null),[d,h]=F.useState(null),[f,p]=F.useState(!1),[m,g]=F.useState("");return G.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f0f0f0",padding:"20px"},children:G.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #333",borderRadius:"8px",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.2)",padding:"30px",width:"100%",maxWidth:"400px",textAlign:"center"},children:[G.jsx("h2",{style:{fontSize:"20px",color:"#333",marginBottom:"30px"},children:"📝 Profil Bilgilerini Doldur"}),G.jsxs("form",{onSubmit:async i=>{if(i.preventDefault(),!(r.trim()&&s.trim()&&a&&c))return void g("Lütfen tüm alanları doldurun");const o=parseInt(a);if(o<1||o>120)g("Yaş 1-120 arasında olmalıdır");else{p(!0),g("");try{const i={firstName:r.trim(),lastName:s.trim(),age:o,profilePhoto:c},a=await(async(e,t,n)=>{try{const r={roomId:t,characterId:n,firstName:e.firstName,lastName:e.lastName,age:e.age,profilePhoto:e.profilePhoto,createdAt:ix()};return{id:(await nx(Zb(o_,"profiles"),r)).id,...r}}catch(m){throw m}})(i,e,t);n(a)}catch(l){g(l.message)}finally{p(!1)}}},children:[G.jsxs("div",{style:{marginBottom:"20px"},children:[G.jsx("label",{style:{display:"block",marginBottom:"10px",fontSize:"14px",fontWeight:"bold",color:"#333",textAlign:"left"},children:"Profil Fotoğrafı"}),G.jsx("div",{style:{border:"3px dashed #333",borderRadius:"8px",padding:"20px",marginBottom:"10px",backgroundColor:"#f8f9fa",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>document.getElementById("photo-upload").click(),onMouseOver:e=>{e.target.style.backgroundColor="#e9ecef",e.target.style.borderColor="#666"},onMouseOut:e=>{e.target.style.backgroundColor="#f8f9fa",e.target.style.borderColor="#333"},children:d?G.jsxs("div",{children:[G.jsx("img",{src:d,alt:"Profil önizleme",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"50%",border:"3px solid #333",marginBottom:"10px"}}),G.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Fotoğraf seçildi ✓"})]}):G.jsxs("div",{children:[G.jsx("div",{style:{fontSize:"32px",marginBottom:"10px"},children:"📷"}),G.jsx("div",{style:{fontSize:"14px",color:"#666"},children:"Fotoğraf seçmek için tıklayın"})]})}),G.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)try{(e=>{if(!["image/jpeg","image/png","image/gif"].includes(e.type))throw new Error("Sadece JPEG, PNG ve GIF formatları desteklenir");if(e.size>2097152)throw new Error("Dosya boyutu 2MB'dan küçük olmalıdır")})(t);const e=await(e=>new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=e=>n(e)}))(t);u(e),h(e),g("")}catch(n){g(n.message),u(null),h(null)}},style:{display:"none"},id:"photo-upload"}),G.jsx(h_,{type:"button",variant:"secondary",size:"sm",style:{width:"100%"},onClick:()=>document.getElementById("photo-upload").click(),children:d?"Fotoğrafı Değiştir":"Fotoğraf Seç"})]}),G.jsxs("div",{style:{marginBottom:"20px",textAlign:"left"},children:[G.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"Ad"}),G.jsx("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Adınız",required:!0,style:{width:"100%",padding:"12px",border:"3px solid #333",borderRadius:"4px",fontSize:"16px",boxSizing:"border-box"}})]}),G.jsxs("div",{style:{marginBottom:"20px",textAlign:"left"},children:[G.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"Soyad"}),G.jsx("input",{type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"Soyadınız",required:!0,style:{width:"100%",padding:"12px",border:"3px solid #333",borderRadius:"4px",fontSize:"16px",boxSizing:"border-box"}})]}),G.jsxs("div",{style:{marginBottom:"20px",textAlign:"left"},children:[G.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"Yaş"}),G.jsx("input",{type:"number",value:a,onChange:e=>l(e.target.value),placeholder:"Yaşınız",min:"1",max:"120",required:!0,style:{width:"100%",padding:"12px",border:"3px solid #333",borderRadius:"4px",fontSize:"16px",boxSizing:"border-box"}})]}),m&&G.jsx("div",{style:{backgroundColor:"#ff6b6b",color:"#fff",padding:"10px",borderRadius:"4px",marginBottom:"20px",fontSize:"14px"},children:m}),G.jsx(h_,{type:"submit",variant:"primary",size:"lg",disabled:f||!r.trim()||!s.trim()||!a||!c,style:{width:"100%"},children:f?"Kaydediliyor...":"Profili Tamamla"})]}),G.jsxs("div",{style:{marginTop:"20px",fontSize:"12px",color:"#666",lineHeight:"1.4"},children:["💡 İpucu: Profil fotoğrafınız 2MB'dan küçük olmalıdır",G.jsx("br",{}),"Desteklenen formatlar: JPEG, PNG, GIF"]})]})})},y_=({room:e,character:t,onPartnerJoined:n})=>{const[r,i]=F.useState(!1),[s,o]=F.useState(!1),[a,l]=F.useState(null),c=`${window.location.origin}${window.location.pathname}?room=${e.id}&invite=true`;return G.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f0f0f0",padding:"20px"},children:G.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #333",borderRadius:"8px",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.2)",padding:"30px",width:"100%",maxWidth:"500px",textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"✅"}),G.jsx("h2",{style:{fontSize:"24px",color:"#333",marginBottom:"20px"},children:"Karakterin Tamamlandı!"}),G.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"2px solid #333",borderRadius:"8px",padding:"20px",marginBottom:"30px"},children:[G.jsx("div",{style:{fontSize:"32px",marginBottom:"10px"},children:t.emoji}),G.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:t.color,marginBottom:"5px"},children:t.name}),G.jsxs("div",{style:{fontSize:"14px",color:"#666"},children:["male"===t.gender?"Erkek":"Kadın"," Karakter"]})]}),G.jsx("h3",{style:{fontSize:"18px",color:"#333",marginBottom:"20px"},children:"🎯 Partnerini Davet Et"}),G.jsxs("div",{style:{backgroundColor:"#e6f7ff",border:"2px solid #4ecdc4",borderRadius:"8px",padding:"15px",marginBottom:"20px",textAlign:"left"},children:[G.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"10px",color:"#333"},children:"Room ID:"}),G.jsx("div",{style:{fontSize:"16px",fontFamily:"monospace",backgroundColor:"#fff",padding:"10px",borderRadius:"4px",border:"2px solid #333",wordBreak:"break-all"},children:e.id})]}),G.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"20px",lineHeight:"1.5"},children:"Partnerin bu Room ID'yi kullanarak odaya katılabilir ve kendi karakterini oluşturabilir."}),G.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",marginBottom:"20px"},children:[G.jsx(h_,{onClick:async()=>{try{await navigator.clipboard.writeText(c),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){}},variant:"secondary",size:"sm",children:r?"Kopyalandı!":"Room ID Kopyala"}),G.jsx(h_,{onClick:async()=>{o(!0);try{const t=await(async e=>{try{const t=await c_(e);if(!t)throw new Error("Room bulunamadı");return{status:t.status,characterCount:t.characterCount||0,characters:t.characters||[],isComplete:t.characterCount>=2}}catch(t){throw t}})(e.id);l(t),t.isComplete&&setTimeout(()=>{n()},1e3)}catch(t){l({error:"Kontrol edilemedi"})}finally{o(!1)}},variant:"primary",size:"sm",disabled:s,children:s?"Kontrol Ediliyor...":"Partner Katıldı mı?"})]}),a&&G.jsx("div",{style:{backgroundColor:a.isComplete?"#d4edda":"#f8d7da",border:"2px solid "+(a.isComplete?"#28a745":"#dc3545"),borderRadius:"8px",padding:"15px",marginBottom:"20px",textAlign:"center"},children:a.error?G.jsxs("div",{style:{color:"#721c24",fontSize:"14px"},children:["❌ ",a.error]}):a.isComplete?G.jsx("div",{style:{color:"#155724",fontSize:"14px"},children:"✅ Partner katıldı! Dashboard açılıyor..."}):G.jsxs("div",{style:{color:"#721c24",fontSize:"14px"},children:["⏳ Partner henüz katılmadı (",a.characterCount,"/2 karakter)"]})}),G.jsxs("div",{style:{fontSize:"12px",color:"#666",lineHeight:"1.4"},children:['💡 İpucu: Partnerin Room ID\'yi kopyalayıp "Odaya Gir" bölümünde kullanabilir',G.jsx("br",{}),"Her iki karakter de oluşturulduğunda dashboard açılacak"]})]})})},v_=async(e,t,n,r=null)=>{try{const i={roomId:e,characterId:t,profileId:n,timestamp:r||ix(),date:(new Date).toISOString().split("T")[0],createdAt:(new Date).toISOString()};return(await nx(Zb(o_,"poops"),i)).id}catch(i){throw"permission-denied"===i.code?new Error("Firestore güvenlik kuralları izin vermiyor. Lütfen Firebase Console'da kuralları kontrol edin."):"unavailable"===i.code?new Error("Firebase bağlantısı kurulamadı. İnternet bağlantınızı kontrol edin."):new Error(`Poop eklenemedi: ${i.message}`)}},b_=async(e,t)=>{try{const n=jw(Zb(o_,"poops"),Lw("roomId","==",e),Lw("date","==",t)),r=await Zw(n),i=[];return r.forEach(e=>{i.push({id:e.id,...e.data()})}),i.sort((e,t)=>{var n,r;return((null==(n=e.timestamp)?void 0:n.seconds)||new Date(e.createdAt).getTime()/1e3)-((null==(r=t.timestamp)?void 0:r.seconds)||new Date(t.createdAt).getTime()/1e3)}),i}catch(n){throw n}},w_=async(e,t,n)=>{try{const r=jw(Zb(o_,"poops"),Lw("roomId","==",e),Lw("date",">=",t),Lw("date","<=",n)),i=await Zw(r),s=[];return i.forEach(e=>{s.push({id:e.id,...e.data()})}),s.sort((e,t)=>{var n,r;if(e.date!==t.date)return t.date.localeCompare(e.date);const i=(null==(n=e.timestamp)?void 0:n.seconds)||new Date(e.createdAt).getTime()/1e3;return((null==(r=t.timestamp)?void 0:r.seconds)||new Date(t.createdAt).getTime()/1e3)-i}),s}catch(r){throw r}},x_=async e=>{const t=(new Date).toISOString().split("T")[0];return await b_(e,t)},k_=Object.freeze(Object.defineProperty({__proto__:null,addPoopEntry:v_,getPoopsByDate:b_,getPoopsByDateRange:w_,getTodayPoops:x_},Symbol.toStringTag,{value:"Module"})),S_=({children:e,className:t="",onClick:n,style:r={},...i})=>{const s=["pixel-card",t].filter(Boolean).join(" ");return G.jsx("div",{className:s,onClick:n,style:r,...i,children:e})},__={id:"daily_hero",name:"Günlük Kahraman",description:"Günde 3+ poop yap",emoji:"🏆",target:3,type:"daily",rarity:"common"},E_={id:"daily_champion",name:"Günlük Şampiyon",description:"Günde 5+ poop yap",emoji:"👑",target:5,type:"daily",rarity:"rare"},T_={id:"daily_legend",name:"Günlük Efsane",description:"Günde 7+ poop yap",emoji:"💎",target:7,type:"daily",rarity:"legendary"},I_={id:"night_owl",name:"Gece Kuşu",description:"Gece 2'den sonra poop yap",emoji:"🦉",type:"special",rarity:"rare"},C_={id:"early_bird",name:"Erken Kalkan",description:"Sabah 6'dan önce poop yap",emoji:"🐦",type:"special",rarity:"rare"},A_={id:"speed_demon",name:"Hız Şeytanı",description:"10 dakika içinde 2 poop yap",emoji:"⚡",type:"special",rarity:"epic"},N_={id:"perfect_day",name:"Mükemmel Gün",description:"Günde tam 3 poop yap",emoji:"✨",target:3,type:"special",rarity:"rare"},R_={id:"streak_3",name:"3 Günlük Seri",description:"3 gün arka arkaya poop yap",emoji:"🔥",target:3,type:"streak",rarity:"common"},D_={id:"streak_7",name:"1 Haftalık Seri",description:"7 gün arka arkaya poop yap",emoji:"🚀",target:7,type:"streak",rarity:"rare"},P_={id:"streak_14",name:"2 Haftalık Seri",description:"14 gün arka arkaya poop yap",emoji:"💫",target:14,type:"streak",rarity:"epic"},j_={id:"streak_30",name:"1 Aylık Seri",description:"30 gün arka arkaya poop yap",emoji:"🌟",target:30,type:"streak",rarity:"legendary"},O_={common:"#95A5A6",rare:"#3498DB",epic:"#9B59B6",legendary:"#F39C12"},L_=async(e,t,n,r)=>{const i=ew(o_,"rooms",e,"characters",t,"achievements",`${n.id}_${r}`);try{await ex(i,{achievementId:n.id,name:n.name,description:n.description,emoji:n.emoji,type:n.type,rarity:n.rarity,date:r,timestamp:new Date,roomId:e,characterId:t})}catch(s){}},M_=async(e,t)=>{const n=(new Date).toISOString().split("T")[0];return z_(e,t,n)},z_=async(e,t,n)=>{const r=jw(Zb(o_,"rooms",e,"poops"),Lw("characterId","==",t),Lw("date","==",n));try{return(await Zw(r)).docs.map(e=>({id:e.id,...e.data()}))}catch(i){return[]}},F_=({achievement:e,onClose:t})=>{const[n,r]=F.useState(!1),[i,s]=F.useState(!1);if(F.useEffect(()=>{setTimeout(()=>r(!0),100),setTimeout(()=>s(!0),200);const e=setTimeout(()=>{s(!1),setTimeout(()=>{r(!1),setTimeout(()=>t(),300)},300)},4e3);return()=>clearTimeout(e)},[t]),!e)return null;const o=O_[e.rarity]||"#95A5A6";return G.jsx("div",{className:"achievement-notification "+(n?"visible":""),style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3,transform:n?"translateX(0)":"translateX(400px)",transition:"transform 0.3s ease-in-out",maxWidth:"300px"},children:G.jsxs(S_,{style:{backgroundColor:"#fff",borderColor:o,borderWidth:"3px",position:"relative",overflow:"hidden",animation:i?"achievement-celebration 0.6s ease-out":"none"},children:[G.jsx("div",{className:"achievement-glow",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`linear-gradient(45deg, ${o}20, transparent, ${o}20)`,animation:i?"achievement-glow 2s ease-in-out infinite":"none"}}),G.jsxs("div",{style:{position:"relative",zIndex:2},children:[G.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[G.jsx("div",{style:{fontSize:"24px",animation:i?"achievement-bounce 0.6s ease-out":"none"},children:e.emoji}),G.jsxs("div",{children:[G.jsx("h3",{style:{color:o,fontSize:"12px",margin:0,fontWeight:"bold"},children:"🏆 BAŞARI KAZANDIN!"}),G.jsx("h4",{style:{color:"#333",fontSize:"10px",margin:0,fontWeight:"normal"},children:e.name})]})]}),G.jsx("p",{style:{fontSize:"8px",color:"#666",margin:0,lineHeight:1.2},children:e.description}),G.jsx("div",{style:{position:"absolute",top:"5px",right:"5px",backgroundColor:o,color:"#fff",fontSize:"6px",padding:"2px 6px",borderRadius:"10px",textTransform:"uppercase",fontWeight:"bold"},children:e.rarity}),G.jsx("button",{onClick:()=>{s(!1),setTimeout(()=>{r(!1),setTimeout(()=>t(),300)},300)},style:{position:"absolute",top:"5px",right:"5px",backgroundColor:"transparent",border:"none",color:"#999",fontSize:"12px",cursor:"pointer",padding:"2px",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:"×"})]}),i&&G.jsx("div",{className:"achievement-confetti",children:[...Array(8)].map((e,t)=>G.jsx("div",{className:"confetti-piece",style:{position:"absolute",width:"4px",height:"4px",backgroundColor:o,left:20+10*t+"%",top:"50%",animation:"confetti-fall 1.5s ease-out forwards",animationDelay:.1*t+"s"}},t))})]})})},U_=({message:e,type:t="general",onClose:n,duration:r=3e3})=>{const[i,s]=F.useState(!1),[o,a]=F.useState(!1);if(F.useEffect(()=>{setTimeout(()=>s(!0),100),setTimeout(()=>a(!0),200);const e=setTimeout(()=>{a(!1),setTimeout(()=>{s(!1),setTimeout(()=>n&&n(),300)},300)},r);return()=>clearTimeout(e)},[r,n]),!e)return null;const l=(()=>{switch(t){case"achievement":return"#F39C12";case"streak":return"#E74C3C";case"daily":return"#3498DB";case"partner":return"#9B59B6";case"special":return"#1ABC9C";default:return"#2ECC71"}})();return G.jsx("div",{className:"motivation-message",style:{position:"fixed",top:"80px",left:"50%",transform:i?"translateX(-50%) translateY(0)":"translateX(-50%) translateY(-100%)",transition:"transform 0.3s ease-in-out",zIndex:999,maxWidth:"90%",width:"400px"},children:G.jsxs(S_,{style:{backgroundColor:"#fff",borderColor:l,borderWidth:"3px",position:"relative",overflow:"hidden",animation:o?"motivation-pulse 0.8s ease-out":"none"},children:[G.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`linear-gradient(45deg, ${l}15, transparent, ${l}15)`,animation:o?"motivation-glow 2s ease-in-out infinite":"none"}}),G.jsxs("div",{style:{position:"relative",zIndex:2,textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"32px",marginBottom:"10px",animation:o?"motivation-bounce 0.6s ease-out":"none"},children:e.emoji}),G.jsx("p",{style:{fontSize:"12px",color:"#333",margin:0,lineHeight:1.3,fontWeight:"bold"},children:e.text}),G.jsx("button",{onClick:()=>{a(!1),setTimeout(()=>{s(!1),setTimeout(()=>n&&n(),300)},300)},style:{position:"absolute",top:"5px",right:"5px",backgroundColor:"transparent",border:"none",color:"#999",fontSize:"14px",cursor:"pointer",padding:"2px",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:"×"})]}),o&&G.jsx("div",{className:"motivation-particles",children:[...Array(6)].map((e,t)=>G.jsx("div",{style:{position:"absolute",width:"6px",height:"6px",backgroundColor:l,borderRadius:"50%",left:15+15*t+"%",top:"50%",animation:"motivation-particle 1.5s ease-out forwards",animationDelay:.1*t+"s"}},t))})]})})},B_={},V_=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in B_)return;B_[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,n&&i.setAttribute("nonce",n),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},$_={classic:{id:"classic",name:"Klasik",emoji:"💩",description:"Klasik poop emoji",unlocked:!0,rarity:"common"},rainbow:{id:"rainbow",name:"Gökkuşağı",emoji:"🌈💩",description:"Renkli poop emoji",unlocked:!1,rarity:"rare"},sparkle:{id:"sparkle",name:"Parlak",emoji:"✨💩",description:"Parlayan poop emoji",unlocked:!1,rarity:"rare"},fire:{id:"fire",name:"Ateş",emoji:"🔥💩",description:"Ateşli poop emoji",unlocked:!1,rarity:"epic"},ice:{id:"ice",name:"Buz",emoji:"❄️💩",description:"Buzlu poop emoji",unlocked:!1,rarity:"epic"},golden:{id:"golden",name:"Altın",emoji:"🥇💩",description:"Altın poop emoji",unlocked:!1,rarity:"legendary"},diamond:{id:"diamond",name:"Elmas",emoji:"💎💩",description:"Elmas poop emoji",unlocked:!1,rarity:"legendary"}},q_={default:{id:"default",name:"Varsayılan",emoji:"👤",description:"Klasik görünüm",unlocked:!0,rarity:"common"},superhero:{id:"superhero",name:"Süper Kahraman",emoji:"🦸‍♀️",description:"Süper güçlü görünüm",unlocked:!1,rarity:"rare"},wizard:{id:"wizard",name:"Büyücü",emoji:"🧙‍♀️",description:"Büyülü görünüm",unlocked:!1,rarity:"rare"},ninja:{id:"ninja",name:"Ninja",emoji:"🥷",description:"Gizli savaşçı",unlocked:!1,rarity:"epic"},robot:{id:"robot",name:"Robot",emoji:"🤖",description:"Gelecekçi görünüm",unlocked:!1,rarity:"epic"},alien:{id:"alien",name:"Uzaylı",emoji:"👽",description:"Uzaydan gelme",unlocked:!1,rarity:"legendary"},unicorn:{id:"unicorn",name:"Tek Boynuzlu",emoji:"🦄",description:"Efsanevi yaratık",unlocked:!1,rarity:"legendary"}},H_={basic:{id:"basic",name:"Temel",description:"Sade ve temiz görünüm",backgroundColor:"#f8f9fa",borderColor:"#dee2e6",unlocked:!0,rarity:"common"},cozy:{id:"cozy",name:"Sıcak",description:"Sıcak ve rahat atmosfer",backgroundColor:"#fff3cd",borderColor:"#ffeaa7",unlocked:!1,rarity:"rare"},ocean:{id:"ocean",name:"Okyanus",description:"Mavi ve serin tema",backgroundColor:"#d1ecf1",borderColor:"#74b9ff",unlocked:!1,rarity:"rare"},forest:{id:"forest",name:"Orman",description:"Yeşil ve doğal tema",backgroundColor:"#d4edda",borderColor:"#00b894",unlocked:!1,rarity:"epic"},sunset:{id:"sunset",name:"Gün Batımı",description:"Turuncu ve pembe tonlar",backgroundColor:"#ffeaa7",borderColor:"#fd79a8",unlocked:!1,rarity:"epic"},galaxy:{id:"galaxy",name:"Galaksi",description:"Kozmik ve gizemli",backgroundColor:"#2d3436",borderColor:"#6c5ce7",unlocked:!1,rarity:"legendary"},rainbow:{id:"rainbow",name:"Gökkuşağı",description:"Renkli ve neşeli",backgroundColor:"#f8f9fa",borderColor:"#00cec9",unlocked:!1,rarity:"legendary"}},K_={classic:{id:"classic",name:"Klasik",backgroundColor:"#ffffff",textColor:"#333333",borderColor:"#333333",unlocked:!0,rarity:"common"},neon:{id:"neon",name:"Neon",backgroundColor:"#000000",textColor:"#00ff00",borderColor:"#00ff00",unlocked:!1,rarity:"rare"},sunset:{id:"sunset",name:"Gün Batımı",backgroundColor:"#ff6b6b",textColor:"#ffffff",borderColor:"#ff4757",unlocked:!1,rarity:"rare"},ocean:{id:"ocean",name:"Okyanus",backgroundColor:"#74b9ff",textColor:"#ffffff",borderColor:"#0984e3",unlocked:!1,rarity:"epic"},forest:{id:"forest",name:"Orman",backgroundColor:"#00b894",textColor:"#ffffff",borderColor:"#00a085",unlocked:!1,rarity:"epic"},gold:{id:"gold",name:"Altın",backgroundColor:"#fdcb6e",textColor:"#2d3436",borderColor:"#e17055",unlocked:!1,rarity:"legendary"},diamond:{id:"diamond",name:"Elmas",backgroundColor:"#ddd6fe",textColor:"#4c1d95",borderColor:"#8b5cf6",unlocked:!1,rarity:"legendary"}},W_=async(e,t,n)=>{try{const{db:r}=await V_(async()=>{const{db:e}=await Promise.resolve().then(()=>l_);return{db:e}},void 0),{doc:i,getDoc:s}=await V_(async()=>{const{doc:e,getDoc:t}=await Promise.resolve().then(()=>sx);return{doc:e,getDoc:t}},void 0),o=i(r,"rooms",e,"characters",t,"themes",n),a=await s(o);return a.exists()?a.data().themeId:"default"}catch(r){return"default"}},G_=({roomId:e,characterId:t,currentThemes:n,onThemeChange:r,onClose:i})=>{const[s,o]=F.useState("poop"),[a,l]=F.useState([]),[c,u]=F.useState(!0);F.useEffect(()=>{d()},[e,t]);const d=async()=>{try{const n=await(async(e,t)=>{try{const{db:n}=await V_(async()=>{const{db:e}=await Promise.resolve().then(()=>l_);return{db:e}},void 0),{collection:r,getDocs:i}=await V_(async()=>{const{collection:e,getDocs:t}=await Promise.resolve().then(()=>sx);return{collection:e,getDocs:t}},void 0),s=r(n,"rooms",e,"characters",t,"unlocks");return(await i(s)).docs.map(e=>e.data().themeId)}catch(n){return["default","classic","basic"]}})(e,t);l(n)}catch(n){}finally{u(!1)}},h=async(n,i)=>{try{await(async(e,t,n,r)=>{try{const{db:i}=await V_(async()=>{const{db:e}=await Promise.resolve().then(()=>l_);return{db:e}},void 0),{doc:s,setDoc:o}=await V_(async()=>{const{doc:e,setDoc:t}=await Promise.resolve().then(()=>sx);return{doc:e,setDoc:t}},void 0),a=s(i,"rooms",e,"characters",t,"themes",n);await o(a,{themeType:n,themeId:r,timestamp:new Date})}catch(i){}})(e,t,n,i),r(n,i)}catch(s){}};if(c)return G.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:G.jsx(h_,{style:{padding:"40px",textAlign:"center"},children:G.jsx("div",{style:{fontSize:"12px",color:"#333"},children:"Temalar yükleniyor..."})})});const f=(()=>{switch(s){case"poop":default:return $_;case"costume":return q_;case"room":return H_;case"counter":return K_}})(),p=n[s]||"default";return G.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:G.jsxs(h_,{style:{maxWidth:"500px",width:"100%",maxHeight:"80vh",overflow:"auto",position:"relative"},children:[G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"2px solid #333",paddingBottom:"10px"},children:[G.jsx("h2",{style:{fontSize:"14px",margin:0,color:"#333"},children:"🎨 Tema Seçici"}),G.jsx("button",{onClick:i,style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#999"},children:"×"})]}),G.jsx("div",{style:{display:"flex",gap:"5px",marginBottom:"20px",flexWrap:"wrap"},children:[{id:"poop",name:"💩 Poop",icon:"💩"},{id:"costume",name:"👤 Kostüm",icon:"👤"},{id:"room",name:"🏠 Oda",icon:"🏠"},{id:"counter",name:"📊 Sayaç",icon:"📊"}].map(e=>G.jsxs("button",{onClick:()=>o(e.id),style:{padding:"8px 12px",fontSize:"8px",border:"2px solid #333",backgroundColor:s===e.id?"#333":"#fff",color:s===e.id?"#fff":"#333",cursor:"pointer",borderRadius:"4px",fontFamily:"inherit"},children:[e.icon," ",e.name]},e.id))}),G.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px"},children:Object.values(f).map(e=>{const t="default"===(n=e.id)||"classic"===n||"basic"===n||a.includes(n);var n;const r=p===e.id,i={common:"#95A5A6",rare:"#3498DB",epic:"#9B59B6",legendary:"#F39C12"}[e.rarity]||"#95A5A6";return G.jsxs("div",{onClick:()=>t&&h(s,e.id),style:{padding:"15px",border:`3px solid ${r?"#ff6b6b":t?i:"#ddd"}`,backgroundColor:t?"#fff":"#f5f5f5",borderRadius:"8px",textAlign:"center",cursor:t?"pointer":"not-allowed",opacity:t?1:.5,transition:"all 0.2s ease",position:"relative"},children:[r&&G.jsx("div",{style:{position:"absolute",top:"5px",right:"5px",fontSize:"12px"},children:"✅"}),!t&&G.jsx("div",{style:{position:"absolute",top:"5px",right:"5px",fontSize:"12px"},children:"🔒"}),G.jsx("div",{style:{position:"absolute",top:"5px",left:"5px",fontSize:"6px",backgroundColor:i,color:"#fff",padding:"2px 4px",borderRadius:"8px",textTransform:"uppercase",fontWeight:"bold"},children:e.rarity}),G.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:e.emoji||"🎨"}),G.jsx("div",{style:{fontSize:"8px",fontWeight:"bold",marginBottom:"4px",color:t?"#333":"#999"},children:e.name}),G.jsx("div",{style:{fontSize:"6px",color:"#666",lineHeight:1.2},children:e.description})]},e.id)})}),G.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:G.jsx(h_,{onClick:i,style:{backgroundColor:"#ff6b6b",borderColor:"#e55a5a",color:"#fff",fontSize:"10px",padding:"10px 20px"},children:"Kapat"})})]})})},Q_="reminder",Y_="partner_activity",X_="motivation",J_={daily_reminder:{title:"Günlük Poop Hatırlatıcısı",body:"Bugün henüz poop yapmadın! Hadi başla! 💩",icon:"💩",type:Q_},afternoon_reminder:{title:"Öğleden Sonra Hatırlatıcısı",body:"Öğleden sonra da aktif ol! 💪",icon:"☀️",type:Q_},evening_reminder:{title:"Akşam Hatırlatıcısı",body:"Akşam da harika gidiyorsun! 🌅",icon:"🌅",type:Q_},achievement_unlocked:{title:"Yeni Başarı!",body:"Tebrikler! Yeni bir başarı rozeti kazandın! 🏆",icon:"🏆",type:"achievement"},streak_milestone:{title:"Streak Rekoru!",body:"Harika! Yeni bir streak rekoru kırdın! 🔥",icon:"🔥",type:"streak"},partner_poop:{title:"Partner Aktivitesi",body:"Partnerin de aktif! Sen de katıl! 👫",icon:"👫",type:Y_},partner_achievement:{title:"Partner Başarısı",body:"Partnerin yeni bir başarı kazandı! Tebrik et! 🎉",icon:"🎉",type:Y_},daily_motivation:{title:"Günlük Motivasyon",body:"Sen harikasın! Bugün de mükemmel gidiyorsun! ⭐",icon:"⭐",type:X_},weekly_motivation:{title:"Haftalık Motivasyon",body:"Bu hafta inanılmaz bir performans! 🚀",icon:"🚀",type:X_}},Z_=9,eE=15,tE=19,nE=async()=>{if(!("Notification"in window))return!1;if("granted"===Notification.permission)return!0;if("denied"!==Notification.permission){return"granted"===await Notification.requestPermission()}return!1},rE=async(e,t={})=>{try{if("serviceWorker"in navigator&&"PushManager"in window){const n=await navigator.serviceWorker.ready;return await n.showNotification(e.title,{body:e.body,icon:"/poop-emoji.svg",badge:"/poop-emoji.svg",tag:e.type,requireInteraction:!1,data:{type:e.type,timestamp:(new Date).toISOString(),...t},actions:[{action:"open",title:"Aç",icon:"/poop-emoji.svg"}]}),!0}return await iE(e,t)}catch(n){return await iE(e,t)}},iE=async(e,t={})=>{if(!(await nE()))return!1;try{const n=new Notification(e.title,{body:e.body,icon:"/poop-emoji.svg",badge:"/poop-emoji.svg",tag:e.type,data:{type:e.type,timestamp:(new Date).toISOString(),...t}});return setTimeout(()=>{n.close()},5e3),!0}catch(n){return!1}},sE=(e,t,n,r)=>{const i=new Date;i.setDate(i.getDate()+1),i.setHours(n,0,0,0);const s=i.getTime()-(new Date).getTime();setTimeout(async()=>{0===(await aE(e,t)).length&&await iE(J_[r],{roomId:e,characterId:t}),sE(e,t,n,r)},s)},oE=(e,t)=>{const n=`reminders_${e}_${t}`;localStorage.removeItem(n)},aE=async(e,t)=>{try{const{getTodayPoops:n}=await V_(async()=>{const{getTodayPoops:e}=await Promise.resolve().then(()=>k_);return{getTodayPoops:e}},void 0);return await n(e,t)}catch(n){return[]}},lE=({roomId:e,characterId:t,onClose:n})=>{const[r,i]=F.useState({dailyReminders:!0,achievementNotifications:!0,partnerActivity:!0,motivationMessages:!0,reminderTimes:{morning:!0,afternoon:!0,evening:!1}}),[s,o]=F.useState(!1),[a,l]=F.useState(!0);F.useEffect(()=>{c(),u()},[e,t]);const c=async()=>{try{const n=((e,t)=>{const n=`notification_settings_${e}_${t}`,r=localStorage.getItem(n);return r?JSON.parse(r):{dailyReminders:!0,achievementNotifications:!0,partnerActivity:!0,motivationMessages:!0,reminderTimes:{morning:!0,afternoon:!0,evening:!1}}})(e,t);i(n)}catch(n){}finally{l(!1)}},u=async()=>{const e=await nE();o(e)};return a?G.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:G.jsx(S_,{style:{padding:"40px",textAlign:"center"},children:G.jsx("div",{style:{fontSize:"12px",color:"#333"},children:"Ayarlar yükleniyor..."})})}):G.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:G.jsxs(S_,{style:{maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto",position:"relative"},children:[G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"2px solid #333",paddingBottom:"10px"},children:[G.jsx("h2",{style:{fontSize:"14px",margin:0,color:"#333"},children:"🔔 Bildirim Ayarları"}),G.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#999"},children:"×"})]}),G.jsxs("div",{style:{padding:"10px",backgroundColor:s?"#d4edda":"#f8d7da",border:"2px solid "+(s?"#c3e6cb":"#f5c6cb"),borderRadius:"4px",marginBottom:"20px"},children:[G.jsx("div",{style:{fontSize:"10px",color:s?"#155724":"#721c24",fontWeight:"bold",marginBottom:"5px"},children:s?"✅ Bildirim İzni Verildi":"❌ Bildirim İzni Gerekli"}),G.jsx("div",{style:{fontSize:"8px",color:s?"#155724":"#721c24"},children:s?"Bildirimler aktif ve çalışıyor":"Bildirim alabilmek için izin vermelisin"}),!s&&G.jsx(h_,{onClick:async()=>{const e=await nE();o(e),e?alert("Bildirim izni verildi! Artık hatırlatıcılar alabilirsin."):alert("Bildirim izni reddedildi. Ayarlardan izni tekrar verebilirsin.")},style:{marginTop:"10px",fontSize:"8px",padding:"8px 16px",backgroundColor:"#007bff",borderColor:"#0056b3",color:"#fff"},children:"İzin Ver"})]}),G.jsxs("div",{style:{marginBottom:"20px"},children:[G.jsx("h3",{style:{fontSize:"12px",marginBottom:"15px",color:"#333"},children:"📱 Bildirim Türleri"}),[{key:"dailyReminders",label:"Günlük Hatırlatıcılar",icon:"⏰"},{key:"achievementNotifications",label:"Başarı Bildirimleri",icon:"🏆"},{key:"partnerActivity",label:"Partner Aktivitesi",icon:"👫"},{key:"motivationMessages",label:"Motivasyon Mesajları",icon:"💪"}].map(({key:e,label:t,icon:n})=>G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 0",borderBottom:"1px solid #eee"},children:[G.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[G.jsx("span",{style:{fontSize:"14px"},children:n}),G.jsx("span",{style:{fontSize:"10px",color:"#333"},children:t})]}),G.jsxs("label",{style:{position:"relative",display:"inline-block",width:"40px",height:"20px"},children:[G.jsx("input",{type:"checkbox",checked:r[e],onChange:t=>{return n=e,r=t.target.checked,void i(e=>({...e,[n]:r}));var n,r},style:{display:"none"}}),G.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:r[e]?"#ff6b6b":"#ccc",borderRadius:"20px",transition:"0.3s"},children:G.jsx("span",{style:{position:"absolute",content:"",height:"16px",width:"16px",left:r[e]?"22px":"2px",bottom:"2px",backgroundColor:"#fff",borderRadius:"50%",transition:"0.3s"}})})]})]},e))]}),r.dailyReminders&&G.jsxs("div",{style:{marginBottom:"20px"},children:[G.jsx("h3",{style:{fontSize:"12px",marginBottom:"15px",color:"#333"},children:"⏰ Hatırlatıcı Saatleri"}),[{key:"morning",label:"Sabah (09:00)",icon:"🌅"},{key:"afternoon",label:"Öğleden Sonra (15:00)",icon:"☀️"},{key:"evening",label:"Akşam (19:00)",icon:"🌅"}].map(({key:e,label:t,icon:n})=>G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0"},children:[G.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[G.jsx("span",{style:{fontSize:"12px"},children:n}),G.jsx("span",{style:{fontSize:"9px",color:"#333"},children:t})]}),G.jsxs("label",{style:{position:"relative",display:"inline-block",width:"30px",height:"15px"},children:[G.jsx("input",{type:"checkbox",checked:r.reminderTimes[e],onChange:t=>{return n=e,r=t.target.checked,void i(e=>({...e,reminderTimes:{...e.reminderTimes,[n]:r}}));var n,r},style:{display:"none"}}),G.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:r.reminderTimes[e]?"#ff6b6b":"#ccc",borderRadius:"15px",transition:"0.3s"},children:G.jsx("span",{style:{position:"absolute",content:"",height:"12px",width:"12px",left:r.reminderTimes[e]?"16px":"1px",bottom:"1.5px",backgroundColor:"#fff",borderRadius:"50%",transition:"0.3s"}})})]})]},e))]}),G.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},children:[G.jsx(h_,{onClick:n,style:{backgroundColor:"#6c757d",borderColor:"#5a6268",color:"#fff",fontSize:"10px",padding:"10px 20px"},children:"İptal"}),G.jsx(h_,{onClick:async()=>{try{((e,t,n)=>{const r=`notification_settings_${e}_${t}`;localStorage.setItem(r,JSON.stringify({...n,updatedAt:(new Date).toISOString()}))})(e,t,r),r.dailyReminders?(oE(e,t),((e,t)=>{const n=`reminders_${e}_${t}`;if(localStorage.getItem(n))return;const r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate());[{time:Z_,template:"daily_reminder"},{time:eE,template:"afternoon_reminder"},{time:tE,template:"evening_reminder"}].forEach(({time:n,template:s})=>{const o=new Date(i.getTime()+60*n*60*1e3);o<=r&&o.setDate(o.getDate()+1);const a=o.getTime()-r.getTime();setTimeout(async()=>{0===(await aE(e,t)).length&&await iE(J_[s],{roomId:e,characterId:t}),sE(e,t,n,s)},a)}),localStorage.setItem(n,JSON.stringify({roomId:e,characterId:t,scheduledAt:(new Date).toISOString()}))})(e,t)):oE(e,t),n()}catch(i){}},style:{backgroundColor:"#28a745",borderColor:"#1e7e34",color:"#fff",fontSize:"10px",padding:"10px 20px"},children:"Kaydet"})]})]})})},cE={daily:[{text:"Güne harika bir başlangıç! 🌅",emoji:"🌅"},{text:"Bugün senin günün! 💪",emoji:"💪"},{text:"Her poop bir zafer! 🏆",emoji:"🏆"},{text:"Sen bir şampiyonsun! ⭐",emoji:"⭐"},{text:"Harika gidiyorsun! 🚀",emoji:"🚀"},{text:"Mükemmel performans! ✨",emoji:"✨"},{text:"Sen gerçek bir kahramansın! 🦸‍♀️",emoji:"🦸‍♀️"},{text:"İnanılmaz! 🤩",emoji:"🤩"}],achievement:[{text:"Tebrikler! Yeni bir başarı kazandın! 🎉",emoji:"🎉"},{text:"Harika! Başarı rozeti kazandın! 🏅",emoji:"🏅"},{text:"Muhteşem! Sen gerçek bir şampiyonsun! 👑",emoji:"👑"},{text:"İnanılmaz! Yeni başarın için kutluyoruz! 🎊",emoji:"🎊"},{text:"Bravo! Başarı koleksiyonuna yeni bir rozet! 🎖️",emoji:"🎖️"},{text:"Harika! Sen gerçekten özel birisin! 💎",emoji:"💎"},{text:"Tebrikler! Başarı listende yeni bir madalya! 🥇",emoji:"🥇"},{text:"Muhteşem performans! 🎆",emoji:"🎆"}],streak:[{text:"Harika! Streak devam ediyor! 🔥",emoji:"🔥"},{text:"İnanılmaz seri! Sen gerçek bir efsanesin! ⚡",emoji:"⚡"},{text:"Mükemmel! Streak listesinde zirvedesin! 🏔️",emoji:"🏔️"},{text:"Harika! Bu seri böyle devam etsin! 🌟",emoji:"🌟"},{text:"İnanılmaz! Streak şampiyonu sensin! 🚀",emoji:"🚀"},{text:"Muhteşem! Bu seri çok etkileyici! 💫",emoji:"💫"},{text:"Harika! Streak rekoru kırıyorsun! 📈",emoji:"📈"},{text:"İnanılmaz! Sen gerçek bir tutarlılık ustasısın! 🎯",emoji:"🎯"}],special:[{text:"Gece kuşu! 🌙",emoji:"🦉"},{text:"Erken kalkan! 🌅",emoji:"🐦"},{text:"Hız şeytanı! ⚡",emoji:"⚡"},{text:"Mükemmel gün! ✨",emoji:"✨"},{text:"Haftalık şampiyon! 🥇",emoji:"🥇"},{text:"Tutarlı kahraman! ⭐",emoji:"⭐"},{text:"Günlük efsane! 💎",emoji:"💎"},{text:"Günlük şampiyon! 👑",emoji:"👑"}],partner:[{text:"Partnerin de harika gidiyor! 👫",emoji:"👫"},{text:"İkiniz de şampiyonsunuz! 🏆",emoji:"🏆"},{text:"Mükemmel takım çalışması! 🤝",emoji:"🤝"},{text:"İkiniz de efsanesiniz! 🌟",emoji:"🌟"},{text:"Harika rekabet! 💪",emoji:"💪"},{text:"İkiniz de kahramansınız! 🦸‍♀️🦸‍♂️",emoji:"🦸‍♀️🦸‍♂️"},{text:"Mükemmel partnerlik! 💕",emoji:"💕"},{text:"İkiniz de şampiyonluk seviyesinde! 🎯",emoji:"🎯"}],general:[{text:"Sen harikasın! 🌟",emoji:"🌟"},{text:"Mükemmel gidiyorsun! 💪",emoji:"💪"},{text:"Sen bir şampiyonsun! 🏆",emoji:"🏆"},{text:"İnanılmaz performans! 🚀",emoji:"🚀"},{text:"Harika iş çıkarıyorsun! ✨",emoji:"✨"},{text:"Sen gerçek bir kahramansın! 🦸‍♀️",emoji:"🦸‍♀️"},{text:"Muhteşem! 🤩",emoji:"🤩"},{text:"Sen özelsin! 💎",emoji:"💎"}]},uE=(e="general")=>{const t=cE[e]||cE.general;return t[Math.floor(Math.random()*t.length)]},dE=({character:e,profile:t,userColor:n,roomId:r,onPoopAdded:i})=>{var s;const[o,a]=F.useState(0),[l,c]=F.useState(!1),[u,d]=F.useState(""),[h,f]=F.useState([]),[p,m]=F.useState(!1),[g,y]=F.useState([]),[v,b]=F.useState(null),[w,x]=F.useState(0),[k,S]=F.useState(!1),[_,E]=F.useState(!1),[T,I]=F.useState({poop:"classic",costume:"default",room:"basic",counter:"classic"});F.useEffect(()=>{A(),N(),C()},[r,e.id]);const C=async()=>{try{const[t,n,i,s]=await Promise.all([W_(r,e.id,"poop"),W_(r,e.id,"costume"),W_(r,e.id,"room"),W_(r,e.id,"counter")]);I({poop:t||"classic",costume:n||"default",room:i||"basic",counter:s||"classic"})}catch(t){}};F.useEffect(()=>{if(o>0&&o%3==0){const e=(()=>{const e=(new Date).getHours();return e>=6&&e<12?uE("daily"):e>=12&&e<18?{text:"Öğleden sonra harika gidiyorsun! ☀️",emoji:"☀️"}:e>=18&&e<22?{text:"Akşam da mükemmel! 🌅",emoji:"🌅"}:{text:"Gece de harika gidiyorsun! 🌙",emoji:"🌙"}})();b(e),setTimeout(()=>b(null),4e3)}},[o]);const A=async()=>{try{const t=(await x_(r)).filter(t=>t.characterId===e.id);a(t.length)}catch(t){a(0)}},N=async()=>{try{const t=await(async(e,t)=>{const n=new Date;let r=0,i=new Date(n);for(;;){const n=i.toISOString().split("T")[0];if(!((await z_(e,t,n)).length>0))break;r++,i.setDate(i.getDate()-1)}const s=[];r>=3&&r<7&&s.push(R_),r>=7&&r<14&&s.push(D_),r>=14&&r<30&&s.push(P_),r>=30&&s.push(j_);for(const o of s)await L_(e,t,o,n.toISOString().split("T")[0]);return{streak:r,achievements:s}})(r,e.id);x(t.streak)}catch(t){x(0)}},R=H_[T.room],D={backgroundColor:(null==R?void 0:R.backgroundColor)||n.background,borderColor:(null==R?void 0:R.borderColor)||n.border,position:"relative",overflow:"hidden"};return G.jsxs(S_,{style:D,children:[h.map(e=>G.jsx("div",{className:"poop-particle",style:{left:`${e.left}%`,top:`${e.top}%`,animationDelay:`${e.delay}ms`},children:e.emoji},e.id)),G.jsxs("div",{style:{textAlign:"center"},children:[G.jsxs("h2",{style:{color:n.text,marginBottom:"20px",fontSize:"14px",animation:u?`${u}`:"none"},children:[e.name," ",(null==(s=q_[T.costume])?void 0:s.emoji)||e.emoji]}),t&&G.jsxs("div",{style:{fontSize:"10px",color:n.text,marginBottom:"10px",opacity:.8},children:[t.firstName," ",t.lastName]}),G.jsx("div",{style:{fontSize:"48px",marginBottom:"10px",position:"relative",animation:p?"count-jump":"none"},children:o}),w>0&&G.jsxs("div",{style:{fontSize:"10px",color:"#E74C3C",marginBottom:"10px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:["🔥 ",w," Günlük Seri"]}),G.jsx("div",{style:{fontSize:"10px",color:n.text,marginBottom:"20px",opacity:.7},children:"Bugünkü Sayı"}),G.jsx(h_,{onClick:async()=>{if(!l){c(!0),d("poop-explosion"),(()=>{const e=$_[T.poop],t=e?e.emoji:"💩",n=[];for(let r=0;r<6;r++)n.push({id:Date.now()+r,emoji:t,left:50+60*(Math.random()-.5),top:50+40*(Math.random()-.5),delay:200*Math.random()});f(n),setTimeout(()=>f([]),1200)})();try{await v_(r,e.id,t.id);await A(),m(!0),setTimeout(()=>m(!1),1e3);const n=await(async(e,t)=>{const n=[],r=(new Date).toISOString().split("T")[0],i=(new Date).getHours(),s=await M_(e,t),o=s.length;if(o>=__.target&&o<E_.target&&n.push(__),o>=E_.target&&o<T_.target&&n.push(E_),o>=T_.target&&n.push(T_),i>=2&&i<6&&n.push(I_),i>=4&&i<6&&n.push(C_),o===N_.target&&n.push(N_),s.length>=2){const e=s[s.length-1];(new Date-new Date(e.timestamp))/6e4<=10&&n.push(A_)}for(const a of n)await L_(e,t,a,r);return n})(r,e.id,e.id);if(n.length>0){y(n);const e=(e=>{const t=e.type,n=e.rarity;let r;return r=uE("streak"===t?"streak":"daily"===t?"daily":"special"===t?"special":"achievement"),"legendary"===n?r.text=`🌟 ${r.text} 🌟 (Efsanevi!)`:"epic"===n?r.text=`💎 ${r.text} 💎 (Epik!)`:"rare"===n&&(r.text=`⭐ ${r.text} ⭐ (Nadir!)`),r})(n[0]);b(e),setTimeout(()=>b(null),5e3),await rE({title:"🏆 Yeni Başarı!",body:`${n[0].name} başarısını kazandın! ${n[0].emoji}`,icon:n[0].emoji,type:"achievement"})}await N(),i&&i()}catch(n){alert(`Hata: ${n.message||"Poop eklenemedi!"}`),d("shake"),setTimeout(()=>d(""),500)}finally{c(!1),setTimeout(()=>d(""),800)}}},disabled:l,style:{backgroundColor:n.button,borderColor:n.buttonBorder,color:"#fff",fontSize:"12px",padding:"15px 30px",animation:l?"button-squash":"none"},children:l?"Ekleniyor...":"+1 Poop!"}),G.jsxs("div",{style:{fontSize:"8px",color:n.text,marginTop:"15px",opacity:.6},children:["Son: ",(new Date).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})]}),G.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",display:"flex",gap:"5px"},children:[G.jsx("button",{onClick:()=>E(!0),style:{background:"none",border:"none",fontSize:"14px",cursor:"pointer",padding:"5px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.8)",display:"flex",alignItems:"center",justifyContent:"center",width:"30px",height:"30px"},title:"Bildirim Ayarları",children:"🔔"}),G.jsx("button",{onClick:()=>S(!0),style:{background:"none",border:"none",fontSize:"16px",cursor:"pointer",padding:"5px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.8)",display:"flex",alignItems:"center",justifyContent:"center",width:"30px",height:"30px"},title:"Tema Seç",children:"🎨"})]})]}),g.map((e,t)=>G.jsx(F_,{achievement:e,onClose:()=>y(t=>t.filter(t=>t!==e))},`${e.id}_${t}`)),v&&G.jsx(U_,{message:v,type:"achievement",onClose:()=>b(null)}),k&&G.jsx(G_,{roomId:r,characterId:e.id,currentThemes:T,onThemeChange:(e,t)=>{I(n=>({...n,[e]:t}))},onClose:()=>S(!1)}),_&&G.jsx(lE,{roomId:r,characterId:e.id,onClose:()=>E(!1)})]})},hE=({room:e})=>{const[t,n]=F.useState([]),[r,i]=F.useState([]),[s,o]=F.useState({today:{},yesterday:{},week:{},month:{},total:{}}),[a,l]=F.useState("today"),[c,u]=F.useState(!0);F.useEffect(()=>{d()},[e.id]),F.useEffect(()=>{t.length>0&&h()},[t,e.id]),F.useEffect(()=>{t.length>0&&f()},[a,t,e.id]);const d=async()=>{try{u(!0);const[t,r]=await Promise.all([u_(e.id),m_(e.id)]);n(t),i(r)}catch(t){}finally{u(!1)}},h=async()=>{try{const n=(new Date).toISOString().split("T")[0],r=await w_(e.id,n,n),i={};t.forEach(e=>{const t=r.filter(t=>t.characterId===e.id);i[e.id]=t.length}),o(e=>({...e,today:i}))}catch(n){}},f=async()=>{try{const n=(new Date).toISOString().split("T")[0];let r,i;switch(a){case"today":default:r=i=n;break;case"yesterday":const e=new Date;e.setDate(e.getDate()-1),r=i=e.toISOString().split("T")[0];break;case"week":const t=new Date;t.setDate(t.getDate()-t.getDay()),r=t.toISOString().split("T")[0],i=n;break;case"month":const s=new Date;s.setDate(1),r=s.toISOString().split("T")[0],i=n;break;case"total":r="2024-01-01",i=n}const s=await w_(e.id,r,i),l={};t.forEach(e=>{const t=s.filter(t=>t.characterId===e.id);l[e.id]=t.length}),o(e=>({...e,[a]:l}))}catch(n){const e={};t.forEach(t=>{e[t.id]=0}),o(t=>({...t,[a]:e}))}},p=()=>{const e=s[a],n=t.map(t=>({character:t,count:e[t.id]||0}));return n.sort((e,t)=>t.count-e.count),0===n.length?{name:"Henüz veri yok",count:0,emoji:"📊"}:1===n.length?{name:n[0].character.name,count:n[0].count,emoji:n[0].character.emoji}:n[0].count===n[1].count&&n[0].count>0?{name:"Berabere",count:n[0].count,emoji:"🤝"}:{name:n[0].character.name,count:n[0].count,emoji:n[0].character.emoji}},m=e=>r.find(t=>t.characterId===e),g=()=>{f()};return c?G.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f0f0f0"},children:G.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #333",borderRadius:"8px",padding:"30px",textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"24px",marginBottom:"20px"},children:"⏳"}),G.jsx("div",{children:"Room verileri yükleniyor..."})]})}):G.jsxs("div",{style:{minHeight:"100vh",padding:"0"},children:[G.jsxs("header",{style:{backgroundColor:"#fff",borderBottom:"3px solid #333",padding:"15px 20px",textAlign:"center",boxShadow:"0 4px 0px rgba(0, 0, 0, 0.2)"},children:[G.jsxs("h1",{style:{fontSize:"18px",color:"#333",margin:"0",textShadow:"2px 2px 0px rgba(0, 0, 0, 0.1)"},children:["💩 Poop Count - ",e.name," 💩"]}),G.jsxs("div",{style:{fontSize:"14px",color:"#333",marginTop:"5px",fontWeight:"bold",backgroundColor:"#f0f0f0",padding:"5px 10px",borderRadius:"4px",border:"2px solid #333",display:"inline-block"},children:["Room ID: ",e.id]})]}),G.jsxs("main",{style:{padding:"0",flex:1},children:[G.jsx("div",{className:"user-grid",children:t.map(t=>{const n=m(t.id),r={background:"male"===t.gender?"#e6f7ff":"#ffe6f2",border:t.color,text:t.color,button:t.color,buttonBorder:t.color};return G.jsx(dE,{character:t,profile:n,userColor:r,roomId:e.id,onPoopAdded:g},t.id)})}),G.jsxs("div",{style:{backgroundColor:"#fff",border:"3px solid #333",borderRadius:"8px",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.2)",margin:"20px",padding:"20px",textAlign:"center"},children:[G.jsx("h2",{style:{color:"#333",marginBottom:"20px",fontSize:"16px"},children:"📊 İstatistikler"}),G.jsx("div",{style:{marginBottom:"20px"},children:["today","yesterday","week","month","total"].map(e=>G.jsx(h_,{onClick:()=>l(e),variant:a===e?"primary":"secondary",size:"sm",style:{margin:"0 5px"},children:"today"===e?"Bugün":"yesterday"===e?"Dün":"week"===e?"Hafta":"month"===e?["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"][(new Date).getMonth()]:"Toplam"},e))}),G.jsx("div",{style:{display:"grid",gridTemplateColumns:1===t.length?"1fr":"1fr 1fr",gap:"20px",marginBottom:"20px"},children:t.map(e=>{const t=m(e.id),n=(s[a]||{})[e.id]||0;return G.jsxs("div",{style:{backgroundColor:e.color,color:"#fff",padding:"15px",borderRadius:"8px",border:`3px solid ${e.color}`},children:[G.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:[e.name," ",e.emoji]}),G.jsx("div",{style:{fontSize:"24px",fontWeight:"bold"},children:n}),t&&G.jsxs("div",{style:{fontSize:"10px",opacity:.8,marginTop:"5px"},children:[t.firstName," ",t.lastName]})]},e.id)})}),G.jsxs("div",{style:{backgroundColor:"#f0f0f0",padding:"15px",borderRadius:"8px",border:"3px solid #ddd"},children:[G.jsxs("div",{style:{fontSize:"14px",marginBottom:"5px"},children:[(()=>{switch(a){case"today":default:return"Bugün";case"yesterday":return"Dün";case"week":return"Bu Hafta";case"month":return["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"][(new Date).getMonth()];case"total":return"Toplam"}})()," Kazananı:"]}),G.jsxs("div",{style:{fontSize:"16px",fontWeight:"bold"},children:[p().emoji," ",p().name]}),"Berabere"!==p().name&&p().count>0&&G.jsxs("div",{style:{fontSize:"12px",opacity:.7,marginTop:"5px"},children:[p().count," poop ile! 🏆"]})]})]})]}),G.jsxs("footer",{style:{backgroundColor:"#333",color:"#fff",textAlign:"center",padding:"10px",fontSize:"8px",borderTop:"3px solid #000"},children:[G.jsx("div",{children:"💕 Sevgililer için özel olarak tasarlandı 💕"}),G.jsx("div",{style:{marginTop:"5px",opacity:.7},children:"Her poop anı değerlidir! 🎉"})]})]})},fE=["admin@poopcount.com"],pE=async(e,t)=>fE.includes(t),mE=()=>new Promise(e=>{const t=(n=async n=>{t(),n&&await pE(n.uid,n.email)?(localStorage.setItem("adminUser",JSON.stringify({email:n.email,uid:n.uid,loginTime:(new Date).toISOString()})),e({isAdmin:!0,user:{email:n.email,uid:n.uid}})):(localStorage.removeItem("adminUser"),e({isAdmin:!1}))},Td(a_).onAuthStateChanged(n,r,i));var n,r,i}),gE=({onLoginSuccess:e})=>{const[t,n]=F.useState(""),[r,i]=F.useState(""),[s,o]=F.useState(!1),[a,l]=F.useState("");return G.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)",padding:"20px"},children:G.jsxs(S_,{style:{maxWidth:"400px",width:"100%",textAlign:"center"},children:[G.jsxs("div",{style:{marginBottom:"30px"},children:[G.jsx("h1",{style:{fontSize:"16px",color:"#333",marginBottom:"10px"},children:"🔐 Admin Panel"}),G.jsx("p",{style:{fontSize:"10px",color:"#666",margin:0},children:"Poop Count Admin Paneli"})]}),G.jsxs("form",{onSubmit:async n=>{n.preventDefault(),o(!0),l("");try{const n=await(async(e,t)=>{try{const n=(await Wk(a_,e,t)).user;if(!(await pE(n.uid,n.email)))throw await Gk(a_),new Error("Bu kullanıcı admin yetkisine sahip değil");return localStorage.setItem("adminUser",JSON.stringify({email:n.email,uid:n.uid,loginTime:(new Date).toISOString()})),{success:!0,user:{email:n.email,uid:n.uid}}}catch(a){return{success:!1,error:a.message}}})(t,r);n.success?e(n.user):l(n.error)}catch(i){l("Giriş yapılırken bir hata oluştu")}finally{o(!1)}},children:[G.jsxs("div",{style:{marginBottom:"20px"},children:[G.jsx("label",{style:{display:"block",fontSize:"10px",color:"#333",marginBottom:"8px",textAlign:"left"},children:"📧 Email"}),G.jsx("input",{type:"email",value:t,onChange:e=>n(e.target.value),required:!0,className:"pixel-input",style:{width:"100%",fontSize:"10px",padding:"12px"},placeholder:"admin@poopcount.com"})]}),G.jsxs("div",{style:{marginBottom:"20px"},children:[G.jsx("label",{style:{display:"block",fontSize:"10px",color:"#333",marginBottom:"8px",textAlign:"left"},children:"🔑 Şifre"}),G.jsx("input",{type:"password",value:r,onChange:e=>i(e.target.value),required:!0,className:"pixel-input",style:{width:"100%",fontSize:"10px",padding:"12px"},placeholder:"••••••••"})]}),a&&G.jsxs("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"10px",borderRadius:"4px",fontSize:"8px",marginBottom:"20px",border:"2px solid #f5c6cb"},children:["❌ ",a]}),G.jsx(h_,{type:"submit",disabled:s,style:{width:"100%",fontSize:"12px",padding:"15px",backgroundColor:s?"#6c757d":"#ff6b6b",borderColor:s?"#5a6268":"#e55a5a",color:"#fff"},children:s?"Giriş yapılıyor...":"🚀 Admin Girişi"})]}),G.jsxs("div",{style:{marginTop:"30px",fontSize:"8px",color:"#999",lineHeight:1.4},children:[G.jsx("p",{children:"🔒 Güvenli admin girişi"}),G.jsx("p",{children:"📊 Tüm verileri yönetin"}),G.jsx("p",{children:"📱 Push bildirimleri gönderin"}),G.jsx("p",{children:"⚠️ Sadece Firebase'de kayıtlı admin kullanıcılar"})]}),G.jsxs("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#e8f5e8",border:"2px solid #4caf50",borderRadius:"4px",fontSize:"8px",color:"#2e7d32"},children:[G.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"✅ Basit Admin Sistemi:"}),G.jsx("div",{children:"• Firebase Console > Authentication > Users"}),G.jsx("div",{children:"• Yeni kullanıcı ekle (email + şifre)"}),G.jsx("div",{children:"• Bu email/şifre ile admin paneline giriş yap"}),G.jsx("div",{children:"• Kodda email listesi yok, tamamen güvenli!"})]})]})})},yE=async()=>{try{const e=Zb(o_,"rooms"),t=await Zw(e),n=[];for(const r of t.docs){const e=r.data(),t=jw(Zb(o_,"characters"),Lw("roomId","==",e.id)),i=await Zw(t);let s=new Date;e.createdAt&&(e.createdAt.toDate?s=e.createdAt.toDate():e.createdAt instanceof Date?s=e.createdAt:("string"==typeof e.createdAt||"number"==typeof e.createdAt)&&(s=new Date(e.createdAt))),isNaN(s.getTime())&&(s=new Date),n.push({id:r.id,firestoreId:r.id,roomId:e.id,name:e.name||"İsimsiz Oda",createdAt:s,characterCount:i.size,...e})}return n.sort((e,t)=>t.createdAt-e.createdAt)}catch(e){return[]}},vE=async()=>{try{const e=await yE(),t=[],n=Zb(o_,"characters"),r=await Zw(n);for(const i of r.docs){const n=i.data(),r=e.find(e=>e.roomId===n.roomId),s=jw(Zb(o_,"poops"),Lw("characterId","==",i.id)),o=await Zw(s);let a=new Date;n.createdAt&&(n.createdAt.toDate?a=n.createdAt.toDate():n.createdAt instanceof Date?a=n.createdAt:("string"==typeof n.createdAt||"number"==typeof n.createdAt)&&(a=new Date(n.createdAt))),isNaN(a.getTime())&&(a=new Date),t.push({id:i.id,roomId:n.roomId,roomName:(null==r?void 0:r.name)||"Bilinmeyen Oda",name:n.name||"İsimsiz",emoji:n.emoji||"👤",gender:n.gender||"unknown",color:n.color||"#000000",createdAt:a,poopCount:o.size,...n})}return t.sort((e,t)=>t.createdAt-e.createdAt)}catch(e){return[]}},bE=async()=>{try{const e=await yE(),t=await vE(),n=[],r=jw(Zb(o_,"poops"),Fw("timestamp","desc")),i=await Zw(r);for(const s of i.docs){const r=s.data(),i=t.find(e=>e.id===r.characterId),o=e.find(e=>e.roomId===r.roomId);let a=new Date,l=(new Date).toISOString().split("T")[0];r.timestamp&&(r.timestamp.toDate?a=r.timestamp.toDate():r.timestamp instanceof Date?a=r.timestamp:("string"==typeof r.timestamp||"number"==typeof r.timestamp)&&(a=new Date(r.timestamp))),isNaN(a.getTime())&&(a=new Date),l=r.date?r.date:a.toISOString().split("T")[0],n.push({id:s.id,roomId:r.roomId,roomName:(null==o?void 0:o.name)||"Bilinmeyen Oda",characterId:r.characterId,characterName:(null==i?void 0:i.name)||"Bilinmeyen Karakter",characterEmoji:(null==i?void 0:i.emoji)||"👤",characterGender:(null==i?void 0:i.gender)||"unknown",characterColor:(null==i?void 0:i.color)||"#000000",timestamp:a,date:l,...r})}return n.sort((e,t)=>t.timestamp-e.timestamp)}catch(e){return[]}},wE=Object.freeze(Object.defineProperty({__proto__:null,getCharactersData:vE,getDailyStats:async e=>{try{const t=await bE(),n=e||(new Date).toISOString().split("T")[0],r=t.filter(e=>e.date===n),i={totalPoops:r.length,uniqueRooms:new Set(r.map(e=>e.roomId)).size,uniqueCharacters:new Set(r.map(e=>e.characterId)).size,roomStats:{},characterStats:{}};return r.forEach(e=>{i.roomStats[e.roomId]||(i.roomStats[e.roomId]={roomName:e.roomName,count:0,characters:new Set}),i.roomStats[e.roomId].count++,i.roomStats[e.roomId].characters.add(e.characterId)}),r.forEach(e=>{i.characterStats[e.characterId]||(i.characterStats[e.characterId]={characterName:e.characterName,roomName:e.roomName,count:0}),i.characterStats[e.characterId].count++}),i}catch(t){return{totalPoops:0,uniqueRooms:0,uniqueCharacters:0,roomStats:{},characterStats:{}}}},getPoopsData:bE,getRoomsData:yE,getWeeklyStats:async()=>{try{const e=await bE(),t=new Date;t.setDate(t.getDate()-7);const n=e.filter(e=>e.timestamp>=t),r={};for(let i=6;i>=0;i--){const e=new Date;e.setDate(e.getDate()-i);const t=e.toISOString().split("T")[0];r[t]=0}return n.forEach(e=>{void 0!==r[e.date]&&r[e.date]++}),{totalPoops:n.length,dailyBreakdown:r,uniqueRooms:new Set(n.map(e=>e.roomId)).size,uniqueCharacters:new Set(n.map(e=>e.characterId)).size}}catch(e){return{totalPoops:0,dailyBreakdown:{},uniqueRooms:0,uniqueCharacters:0}}}},Symbol.toStringTag,{value:"Module"})),xE=async()=>{try{const e=jw(Zb(o_,"admin_pushes"),Fw("sentAt","desc"),Bw(50));return(await Zw(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return[]}},kE=()=>{const[e,t]=F.useState({title:"",body:"",imageUrl:"",imageFile:null,targetType:"all",targetId:""}),[n,r]=F.useState([]),[i,s]=F.useState([]),[o,a]=F.useState([]),[l,c]=F.useState(!1),[u,d]=F.useState(!1);F.useEffect(()=>{h()},[]);const h=async()=>{try{c(!0);const[e,t,n]=await Promise.all([V_(()=>Promise.resolve().then(()=>wE),void 0).then(e=>e.getRoomsData()),V_(()=>Promise.resolve().then(()=>wE),void 0).then(e=>e.getCharactersData()),xE()]);r(e),s(t),a(n)}catch(e){}finally{c(!1)}},f=(e,n)=>{t(t=>({...t,[e]:n}))},p=async n=>{const r={title:e.title,body:e.body,imageUrl:n,targetType:e.targetType,targetId:e.targetId||null,sentAt:(new Date).toISOString(),status:"sent"};let i;await(async e=>{try{const t=Zb(o_,"admin_pushes"),n=await nx(t,{...e,createdAt:new Date,id:null});return await tx(n,{id:n.id}),{success:!0,id:n.id}}catch(t){return{success:!1,error:t.message}}})(r),"all"===e.targetType?i=await(async e=>{try{return await rE({title:e.title,body:e.body,icon:e.imageUrl||"/poop-emoji.svg",type:"admin_push"},{pushId:e.id,targetType:"all"}),{success:!0,message:"Push tüm kullanıcılara gönderildi",sent:!0}}catch(t){return{success:!1,error:t.message}}})(r):"room"===e.targetType?i=await(async(e,t)=>{try{return await rE({title:t.title,body:t.body,icon:t.imageUrl||"/poop-emoji.svg",type:"admin_push"},{pushId:t.id,targetType:"room",targetId:e}),{success:!0,message:`Push oda ${e} kullanıcılarına gönderildi`,sent:!0}}catch(n){return{success:!1,error:n.message}}})(e.targetId,r):"character"===e.targetType&&(i=await(async(e,t)=>{try{return await rE({title:t.title,body:t.body,icon:t.imageUrl||"/poop-emoji.svg",type:"admin_push"},{pushId:t.id,targetType:"character",targetId:e}),{success:!0,message:`Push karakter ${e} kullanıcısına gönderildi`,sent:!0}}catch(n){return{success:!1,error:n.message}}})(e.targetId,r)),i.success?(alert("Push bildirimi başarıyla gönderildi!"),t({title:"",body:"",imageUrl:"",imageFile:null,targetType:"all",targetId:""}),h()):alert("Push gönderilirken hata oluştu: "+i.error)};return l?G.jsx(S_,{style:{textAlign:"center",padding:"40px"},children:G.jsx("div",{style:{fontSize:"12px",color:"#333"},children:"📱 Push yöneticisi yükleniyor..."})}):G.jsxs("div",{children:[G.jsx("h2",{style:{fontSize:"14px",color:"#333",marginBottom:"20px"},children:"📱 Push Bildirim Yöneticisi"}),G.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"20px"},children:[G.jsxs(S_,{children:[G.jsx("h3",{style:{fontSize:"12px",marginBottom:"15px",color:"#333"},children:"📤 Yeni Push Gönder"}),G.jsxs("div",{style:{marginBottom:"15px"},children:[G.jsx("label",{style:{display:"block",fontSize:"10px",color:"#333",marginBottom:"5px"},children:"📝 Başlık *"}),G.jsx("input",{type:"text",value:e.title,onChange:e=>f("title",e.target.value),className:"pixel-input",style:{width:"100%",fontSize:"10px"},placeholder:"Push bildirim başlığı",maxLength:50})]}),G.jsxs("div",{style:{marginBottom:"15px"},children:[G.jsx("label",{style:{display:"block",fontSize:"10px",color:"#333",marginBottom:"5px"},children:"📄 Açıklama *"}),G.jsx("textarea",{value:e.body,onChange:e=>f("body",e.target.value),style:{width:"100%",minHeight:"80px",fontSize:"10px",padding:"10px",border:"3px solid #333",borderRadius:"4px",fontFamily:"inherit",resize:"vertical"},placeholder:"Push bildirim açıklaması",maxLength:200})]}),G.jsxs("div",{style:{marginBottom:"15px"},children:[G.jsx("label",{style:{display:"block",fontSize:"10px",color:"#333",marginBottom:"5px"},children:"🖼️ Görsel (opsiyonel)"}),G.jsxs("div",{style:{marginBottom:"10px"},children:[G.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const n=e.target.files[0];if(n){if(n.size>5242880)return void alert("Dosya boyutu 5MB'dan büyük olamaz!");if(!n.type.startsWith("image/"))return void alert("Lütfen sadece resim dosyası seçin!");t(e=>({...e,imageFile:n,imageUrl:""}))}},style:{display:"none"},id:"imageUpload"}),G.jsxs("label",{htmlFor:"imageUpload",style:{display:"block",padding:"10px",border:"2px dashed #333",borderRadius:"4px",textAlign:"center",cursor:"pointer",fontSize:"10px",backgroundColor:e.imageFile?"#e8f5e8":"#f8f9fa",transition:"all 0.2s ease"},children:["📁 ",e.imageFile?e.imageFile.name:"Resim Dosyası Seç"]})]}),G.jsxs("div",{style:{marginBottom:"10px"},children:[G.jsx("div",{style:{fontSize:"8px",color:"#666",marginBottom:"3px"},children:"veya URL girin:"}),G.jsx("input",{type:"url",value:e.imageUrl,onChange:e=>f("imageUrl",e.target.value),className:"pixel-input",style:{width:"100%",fontSize:"10px"},placeholder:"https://example.com/image.png",disabled:!!e.imageFile})]}),e.imageFile&&G.jsxs("div",{style:{marginTop:"10px",padding:"10px",border:"2px solid #28a745",borderRadius:"4px",backgroundColor:"#f8fff8"},children:[G.jsxs("div",{style:{fontSize:"8px",color:"#28a745",marginBottom:"5px"},children:["✅ Seçilen dosya: ",e.imageFile.name]}),G.jsx(h_,{onClick:()=>{t(e=>({...e,imageFile:null,imageUrl:""}))},style:{fontSize:"8px",padding:"5px 10px",backgroundColor:"#dc3545",borderColor:"#c82333",color:"#fff"},children:"🗑️ Kaldır"})]})]}),G.jsxs("div",{style:{marginBottom:"15px"},children:[G.jsx("label",{style:{display:"block",fontSize:"10px",color:"#333",marginBottom:"5px"},children:"🎯 Hedef Seç"}),G.jsxs("select",{value:e.targetType,onChange:e=>f("targetType",e.target.value),style:{width:"100%",fontSize:"10px",padding:"10px",border:"3px solid #333",borderRadius:"4px",fontFamily:"inherit"},children:[G.jsx("option",{value:"all",children:"🌍 Tüm Kullanıcılar"}),G.jsx("option",{value:"room",children:"🏠 Belirli Oda"}),G.jsx("option",{value:"character",children:"👤 Belirli Karakter"})]})]}),"room"===e.targetType&&G.jsxs("div",{style:{marginBottom:"15px"},children:[G.jsx("label",{style:{display:"block",fontSize:"10px",color:"#333",marginBottom:"5px"},children:"🏠 Oda Seç"}),G.jsxs("select",{value:e.targetId,onChange:e=>f("targetId",e.target.value),style:{width:"100%",fontSize:"10px",padding:"10px",border:"3px solid #333",borderRadius:"4px",fontFamily:"inherit"},children:[G.jsx("option",{value:"",children:"Oda seçin..."}),n.map(e=>G.jsxs("option",{value:e.id,children:[e.name," (",e.characterCount," karakter)"]},e.id))]})]}),"character"===e.targetType&&G.jsxs("div",{style:{marginBottom:"15px"},children:[G.jsx("label",{style:{display:"block",fontSize:"10px",color:"#333",marginBottom:"5px"},children:"👤 Karakter Seç"}),G.jsxs("select",{value:e.targetId,onChange:e=>f("targetId",e.target.value),style:{width:"100%",fontSize:"10px",padding:"10px",border:"3px solid #333",borderRadius:"4px",fontFamily:"inherit"},children:[G.jsx("option",{value:"",children:"Karakter seçin..."}),i.map(e=>G.jsxs("option",{value:e.id,children:[e.emoji," ",e.name," - ",e.roomName]},e.id))]})]}),G.jsx(h_,{onClick:async()=>{if(e.title&&e.body)try{d(!0);let t="/poop-emoji.svg";if(e.imageFile){const n=new FileReader;return n.onload=async e=>{t=e.target.result,await p(t)},void n.readAsDataURL(e.imageFile)}e.imageUrl&&(t=e.imageUrl),await p(t)}catch(t){alert("Push gönderilirken hata oluştu!")}finally{d(!1)}else alert("Başlık ve açıklama alanları zorunludur!")},disabled:u||!e.title||!e.body,style:{width:"100%",fontSize:"12px",padding:"15px",backgroundColor:u?"#6c757d":"#28a745",borderColor:u?"#5a6268":"#1e7e34",color:"#fff"},children:u?"📤 Gönderiliyor...":"🚀 Push Gönder"})]}),G.jsxs(S_,{children:[G.jsx("h3",{style:{fontSize:"12px",marginBottom:"15px",color:"#333"},children:"📜 Push Geçmişi"}),G.jsx("div",{style:{maxHeight:"400px",overflow:"auto"},children:0===o.length?G.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:"10px",padding:"20px"},children:"Henüz push gönderilmemiş"}):o.map(e=>{return G.jsxs("div",{style:{padding:"10px",borderBottom:"1px solid #eee",fontSize:"9px"},children:[G.jsxs("div",{style:{fontWeight:"bold",color:"#333",marginBottom:"5px"},children:["📱 ",e.title]}),G.jsx("div",{style:{color:"#666",marginBottom:"5px",lineHeight:1.3},children:e.body}),G.jsxs("div",{style:{fontSize:"8px",color:"#999"},children:[(t=e.sentAt,new Date(t).toLocaleString("tr-TR"))," -","all"===e.targetType?" Tüm kullanıcılar":"room"===e.targetType?` Oda: ${e.targetId}`:` Karakter: ${e.targetId}`]})]},e.id);var t})})]})]}),G.jsxs(S_,{style:{marginTop:"20px"},children:[G.jsx("h3",{style:{fontSize:"12px",marginBottom:"15px",color:"#333"},children:"⚡ Hızlı Şablonlar"}),G.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:[{title:"🎉 Başarı Tebriği",body:"Harika gidiyorsun! Sen bir şampiyonsun! 🏆",icon:"🏆"},{title:"⏰ Hatırlatıcı",body:"Bugün henüz poop yapmadın! Hadi başla! 💩",icon:"⏰"},{title:"🔥 Streak Motivasyonu",body:"Streak serin devam ediyor! Harika! 🔥",icon:"🔥"},{title:"👫 Partner Aktivitesi",body:"Partnerin de aktif! Sen de katıl! 👫",icon:"👫"}].map((e,n)=>G.jsxs("div",{onClick:()=>{t(t=>({...t,title:e.title,body:e.body}))},style:{padding:"10px",border:"2px solid #ddd",borderRadius:"4px",cursor:"pointer",textAlign:"center",fontSize:"8px",transition:"all 0.2s ease"},onMouseOver:e=>{e.target.style.borderColor="#ff6b6b",e.target.style.backgroundColor="#fff5f5"},onMouseOut:e=>{e.target.style.borderColor="#ddd",e.target.style.backgroundColor="transparent"},children:[G.jsx("div",{style:{fontSize:"16px",marginBottom:"5px"},children:e.icon}),G.jsx("div",{style:{fontWeight:"bold",color:"#333"},children:e.title})]},n))})]})]})},SE=({user:e,onLogout:t})=>{const[n,r]=F.useState("overview"),[i,s]=F.useState([]),[o,a]=F.useState([]),[l,c]=F.useState([]),[u,d]=F.useState(!0),[h,f]=F.useState({totalRooms:0,totalCharacters:0,totalPoops:0,todayPoops:0,activeUsers:0});F.useEffect(()=>{p()},[]);const p=async()=>{try{d(!0);const[e,t,n]=await Promise.all([yE(),vE(),bE()]);s(e),a(t),c(n);const r=(new Date).toISOString().split("T")[0],i=n.filter(e=>e.date===r),o=new Set(n.map(e=>e.characterId));f({totalRooms:e.length,totalCharacters:t.length,totalPoops:n.length,todayPoops:i.length,activeUsers:o.size})}catch(e){}finally{d(!1)}},m=e=>{try{if(!e)return"Tarih bilinmiyor";let t;return t=e instanceof Date?e:e.toDate?e.toDate():new Date(e),isNaN(t.getTime())?"Geçersiz tarih":t.toLocaleString("tr-TR")}catch(t){return"Tarih hatası"}};return u?G.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)"},children:G.jsx(S_,{style:{padding:"40px",textAlign:"center"},children:G.jsx("div",{style:{fontSize:"12px",color:"#333"},children:"📊 Dashboard yükleniyor..."})})}):G.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)",padding:"20px"},children:[G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"10px"},children:[G.jsxs("div",{children:[G.jsx("h1",{style:{fontSize:"16px",color:"#fff",margin:0,textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"🔐 Admin Dashboard"}),G.jsxs("p",{style:{fontSize:"10px",color:"#fff",margin:"5px 0 0 0",opacity:.8},children:["Hoş geldin, ",e.email]})]}),G.jsx(h_,{onClick:async()=>{await(async()=>{try{return await Gk(a_),localStorage.removeItem("adminUser"),{success:!0}}catch(e){return{success:!1,error:e.message}}})(),t()},style:{backgroundColor:"#dc3545",borderColor:"#c82333",color:"#fff",fontSize:"10px",padding:"10px 15px"},children:"🚪 Çıkış"})]}),G.jsx("div",{style:{display:"flex",gap:"5px",marginBottom:"20px",flexWrap:"wrap"},children:[{id:"overview",name:"📊 Genel",icon:"📊"},{id:"rooms",name:"🏠 Odalar",icon:"🏠"},{id:"poops",name:"💩 Poops",icon:"💩"},{id:"push",name:"📱 Push",icon:"📱"}].map(e=>G.jsxs("button",{onClick:()=>r(e.id),style:{padding:"10px 15px",fontSize:"10px",border:"2px solid #333",backgroundColor:n===e.id?"#333":"#fff",color:n===e.id?"#fff":"#333",cursor:"pointer",borderRadius:"4px",fontFamily:"inherit",display:"flex",alignItems:"center",gap:"5px"},children:[e.icon," ",e.name]},e.id))}),G.jsxs("div",{children:["overview"===n&&G.jsxs("div",{children:[G.jsx("h2",{style:{fontSize:"14px",color:"#333",marginBottom:"20px"},children:"📊 Genel İstatistikler"}),G.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:[G.jsxs(S_,{style:{textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"🏠"}),G.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#ff6b6b"},children:h.totalRooms}),G.jsx("div",{style:{fontSize:"10px",color:"#666"},children:"Toplam Oda"})]}),G.jsxs(S_,{style:{textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"👤"}),G.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#4ecdc4"},children:h.totalCharacters}),G.jsx("div",{style:{fontSize:"10px",color:"#666"},children:"Toplam Karakter"})]}),G.jsxs(S_,{style:{textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"💩"}),G.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#ffa726"},children:h.totalPoops}),G.jsx("div",{style:{fontSize:"10px",color:"#666"},children:"Toplam Poop"})]}),G.jsxs(S_,{style:{textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"📅"}),G.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#66bb6a"},children:h.todayPoops}),G.jsx("div",{style:{fontSize:"10px",color:"#666"},children:"Bugünkü Poop"})]}),G.jsxs(S_,{style:{textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"👥"}),G.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#ab47bc"},children:h.activeUsers}),G.jsx("div",{style:{fontSize:"10px",color:"#666"},children:"Aktif Kullanıcı"})]})]}),G.jsxs(S_,{children:[G.jsx("h3",{style:{fontSize:"12px",marginBottom:"15px",color:"#333"},children:"📈 Son Aktiviteler"}),G.jsx("div",{style:{maxHeight:"300px",overflow:"auto"},children:l.slice(-10).reverse().map(e=>G.jsxs("div",{style:{padding:"10px",borderBottom:"1px solid #eee",fontSize:"9px"},children:[G.jsxs("div",{style:{fontWeight:"bold",color:"#333"},children:[e.characterName," - ",e.roomName]}),G.jsx("div",{style:{color:"#666"},children:m(e.timestamp)})]},e.id))})]})]}),"rooms"===n&&G.jsxs("div",{children:[G.jsx("h2",{style:{fontSize:"14px",color:"#333",marginBottom:"20px"},children:"🏠 Oda Yönetimi"}),G.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"15px"},children:i.map(e=>{const t=o.filter(t=>t.roomId===e.roomId);return G.jsxs(S_,{children:[G.jsxs("h3",{style:{fontSize:"12px",marginBottom:"10px",color:"#333"},children:["🏠 ",e.name]}),G.jsxs("div",{style:{fontSize:"9px",color:"#666",marginBottom:"10px"},children:[G.jsxs("div",{children:["ID: ",e.id]}),G.jsxs("div",{children:["Oluşturulma: ",m(e.createdAt)]}),G.jsxs("div",{children:["Karakter Sayısı: ",t.length]})]}),t.length>0&&G.jsxs("div",{style:{marginBottom:"10px"},children:[G.jsx("div",{style:{fontSize:"10px",fontWeight:"bold",color:"#333",marginBottom:"5px"},children:"👥 Odadaki Karakterler:"}),t.map(e=>G.jsxs("div",{style:{fontSize:"8px",color:"#666",backgroundColor:"#f8f9fa",padding:"5px",borderRadius:"3px",marginBottom:"3px",border:"1px solid #e9ecef"},children:[G.jsxs("div",{style:{fontWeight:"bold",color:"#333"},children:[e.emoji," ",e.name]}),G.jsxs("div",{children:["Cinsiyet: ","male"===e.gender?"👨 Erkek":"👩 Kadın"]}),G.jsxs("div",{children:["Renk: ",G.jsx("span",{style:{color:e.color},children:"●"})," ",e.color]}),G.jsxs("div",{children:["Poop Sayısı: ",e.poopCount||0]}),G.jsxs("div",{children:["Oluşturulma: ",m(e.createdAt)]})]},e.id))]}),G.jsx("div",{style:{fontSize:"8px",color:"#999",backgroundColor:"#f5f5f5",padding:"5px",borderRadius:"4px",fontFamily:"monospace"},children:e.id})]},e.id)})})]}),"poops"===n&&G.jsxs("div",{children:[G.jsx("h2",{style:{fontSize:"14px",color:"#333",marginBottom:"20px"},children:"💩 Poop Geçmişi"}),G.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px",marginBottom:"20px"},children:[G.jsxs(S_,{style:{textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"20px",marginBottom:"5px"},children:"💩"}),G.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#ff6b6b"},children:l.length}),G.jsx("div",{style:{fontSize:"8px",color:"#666"},children:"Toplam Poop"})]}),G.jsxs(S_,{style:{textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"20px",marginBottom:"5px"},children:"📅"}),G.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#4ecdc4"},children:h.todayPoops}),G.jsx("div",{style:{fontSize:"8px",color:"#666"},children:"Bugünkü Poop"})]}),G.jsxs(S_,{style:{textAlign:"center"},children:[G.jsx("div",{style:{fontSize:"20px",marginBottom:"5px"},children:"📊"}),G.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#ffa726"},children:l.length>0?(l.length/h.totalCharacters).toFixed(1):0}),G.jsx("div",{style:{fontSize:"8px",color:"#666"},children:"Karakter Başına Ort."})]})]}),G.jsxs(S_,{children:[G.jsx("h3",{style:{fontSize:"12px",marginBottom:"15px",color:"#333"},children:"📜 Tüm Poop Kayıtları"}),G.jsx("div",{style:{maxHeight:"500px",overflow:"auto"},children:0===l.length?G.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:"10px",padding:"40px"},children:"Henüz poop kaydı bulunmuyor"}):l.slice().reverse().map(e=>G.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid #eee",fontSize:"9px",backgroundColor:"#fafafa",marginBottom:"5px",borderRadius:"4px"},children:[G.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[G.jsx("div",{style:{fontSize:"16px"},children:e.characterEmoji||"👤"}),G.jsx("div",{style:{fontWeight:"bold",color:"#333"},children:e.characterName||"Bilinmeyen Karakter"}),G.jsxs("div",{style:{color:"#666",fontSize:"8px"},children:["- ",e.roomName||"Bilinmeyen Oda"]})]}),G.jsxs("div",{style:{color:"#666",marginBottom:"5px"},children:["📅 Tarih: ",e.date,G.jsxs("span",{style:{marginLeft:"10px"},children:["🕐 Saat: ",m(e.timestamp)]})]}),G.jsxs("div",{style:{fontSize:"8px",color:"#888",marginBottom:"5px"},children:["Cinsiyet: ","male"===e.characterGender?"👨 Erkek":"female"===e.characterGender?"👩 Kadın":"❓ Bilinmeyen"," | Renk: ",G.jsx("span",{style:{color:e.characterColor},children:"●"})," ",e.characterColor]}),G.jsxs("div",{style:{fontSize:"7px",color:"#999",backgroundColor:"#f0f0f0",padding:"3px",borderRadius:"3px",fontFamily:"monospace",wordBreak:"break-all"},children:["ID: ",e.id]})]},e.id))})]})]}),"push"===n&&G.jsx(kE,{})]})]})},_E=()=>{const[e,t]=F.useState(null),[n,r]=F.useState(!0);F.useEffect(()=>{i()},[]);const i=async()=>{try{const e=await mE();e.isAdmin&&t(e.user)}catch(e){}finally{r(!1)}};return n?G.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)"},children:G.jsx("div",{style:{padding:"40px",backgroundColor:"#fff",border:"3px solid #333",borderRadius:"8px",textAlign:"center"},children:G.jsx("div",{style:{fontSize:"12px",color:"#333"},children:"🔐 Admin paneli yükleniyor..."})})}):G.jsx("div",{children:e?G.jsx(SE,{user:e,onLogout:()=>{t(null)}}):G.jsx(gE,{onLoginSuccess:e=>{t(e)}})})};function EE(){const[e,t]=F.useState("room-select"),[n,r]=F.useState(null),[i,s]=F.useState(null),[o,a]=F.useState(null);F.useEffect(()=>{if("/admin"===window.location.pathname)return void t("admin");const e=new URLSearchParams(window.location.search),n=e.get("room"),r=e.get("invite");n&&(r?l(n):c(n))},[]);const l=async e=>{try{const n=await c_(e);n&&(r(n),t("character-create"))}catch(n){}},c=async e=>{try{const n=await c_(e);if(n){r(n);(await u_(e)).length>=2?t("dashboard"):t("character-create")}}catch(n){}},u=e=>{r(e),t("character-create")},d=e=>{s(e),t("profile-setup")},h=e=>{a(e),t("partner-invite")},f=()=>{t("dashboard")};return G.jsx("div",{style:{minHeight:"100vh"},children:(()=>{switch(e){case"admin":return G.jsx(_E,{});case"room-select":default:return G.jsx(f_,{onRoomSelected:u});case"character-create":return G.jsx(p_,{roomId:n.id,onCharacterCreated:d});case"profile-setup":return G.jsx(g_,{roomId:n.id,characterId:i.id,onProfileCreated:h});case"partner-invite":return G.jsx(y_,{room:n,character:i,onPartnerJoined:f});case"dashboard":return G.jsx(hE,{room:n})}})()})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})}),Q.createRoot(document.getElementById("root")).render(G.jsx(U.StrictMode,{children:G.jsx(EE,{})}));
